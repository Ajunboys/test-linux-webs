angular.module("rest").factory("ApplicationEntry",[function defineApplicationEntry(){var a=function a(b){b=b||{};this.identifier=b.identifier;this.name=b.name;this.description=b.description;this.logo=b.logo;this.status=b.status;this.hostname=b.hostname;this.online=b.online;this.isSso=b.isSso;this.isCloudStorage=b.isCloudStorage;this.setSsoAccount=b.setSssoAccount;this.type=b.type;this.url=b.url;this.application=b.application};return a}]);angular.module("application").controller("applicationManageController",["$scope","$injector","$interval","$timeout",function applicationManageController(q,w,v,C){var z=w.get("$q");var l=w.get("$route");var F=w.get("$http");var g=w.get("$routeParams");var D=w.get("$document");var m=w.get("$window");var i=w.get("$location");var E=w.get("$cookieStore");var j=w.get("$rootScope");var u=w.get("loggerService");var h=w.get("utilService");var G=w.get("userService");var e=w.get("systemService");var t=w.get("applicationService");var d=g.id;q.application={};q.application.type="clint-remote-app";q.application.icon="images/app-icons/browser.png";q.connectionPermissions={clienModel:false,browserModel:false};q.application.softwares=[];q.addedApplicationSoftwares=[];q.applicationSoftwares=[];q.systemSoftwaresMap={};var s={};var a=function(H,I){return{identifier:d,name:H,value:I}};q.addApplicationSoftwares=function b(){u.i("add application softwares...");var K=[];var J={};angular.forEach(q.addedApplicationSoftwares,function(L){J[""+L.machine.hostname]=true});q.message.text="";for(var H=0;H<q.applicationSoftwares.length;H++){var I=q.applicationSoftwares[H];if(I.selected){if(I.machine.hostname in J){q.message.text="已存在相同主机“"+I.machine.hostname+"”的应用程序";$("#modal-alert-message").modal("show");return false}J[""+I.machine.hostname]=true}}angular.forEach(q.applicationSoftwares,function(M){var L={selected:false,identifier:M.identifier,machine:M.machine,name:M.name};if(M.selected){q.addedApplicationSoftwares.push(L)}else{K.push(L)}});q.applicationSoftwares=K};q.removeApplicationSoftwares=function y(){u.i("remove application softwares...");var H=[];angular.forEach(q.addedApplicationSoftwares,function(J){var I={selected:false,identifier:J.identifier,machine:J.machine,name:J.name};if(J.selected){q.applicationSoftwares.push(I)}else{H.push(I)}});q.addedApplicationSoftwares=H};q.icons=h.icons;q.setAppIcon=function x(H){u.i("set application icon '{}'...",H);q.application.icon="images/app-icons/"+H};var f=false;var k=function k(){if(f){return false}f=true;t.getSystemPrograms().success(function(H){f=false;if(!!!H||H.length==0){return false}q.systemSoftwaresMap={};q.applicationSoftwares=[];angular.forEach(H,function(J){var I={selected:false,identifier:J.identifier,machine:J.machine,name:J.name};if(!!!s[""+J.identifier]){q.applicationSoftwares.push(I)}q.systemSoftwaresMap[J.identifier]=J})}).error(function(H){f=false})};q.uploadApplicationIcon=function r(H,I){q.f=H;q.errFile=I&&I[0];if(H){e.uploadAppIconFile(H).success(function J(K){q.application.icon=K.src}).error(function(K){})}};q.message={title:"提示",text:""};var A=false;q.saveApplication=function p(){if(j.expectedCredentials||!j.canUseManageFeature){return false}if(A){return false}if(!!!q.application.name){q.message.text="请输入应用名称";$("#modal-alert-message").modal("show");return false}if(!!!q.application.type){q.message.text="请选择应用使用模式";$("#modal-alert-message").modal("show");return false}q.application.permissions=[];if(q.application.type=="clint-browser-type"){if(!!!q.application.url){q.message.text="请输入应用链接地址,如:https://192.168.10.120或 http://192.168.10.120";$("#modal-alert-message").modal("show");return false}if(q.application.url.toLocaleLowerCase().indexOf("https://")<0&&q.application.url.toLocaleLowerCase().indexOf("http://")<0){q.message.text="请输入应用链接地址访问的协议:https://192.168.10.120或 http://192.168.10.120";$("#modal-alert-message").modal("show");return false}}else{if(!q.addedApplicationSoftwares||q.addedApplicationSoftwares.length==0){if(!q.applicationSoftwares||q.applicationSoftwares.length==0){q.message.text="系统还没有添加应用程序,请先添加应用程序";$("#modal-alert-message").modal("show");return false}else{q.message.text="请选择需要应用对应的应用程序";$("#modal-alert-message").modal("show");return false}}}var J={"clint-remote-app":false,"clint-desktop-app":false,"clint-browser-type":false,"clint-web-app":false};J[""+q.application.type]=true;q.application.permissions.push(a("application-visit-type",q.application.type));for(var I in J){q.application.permissions.push(a(I,J[I]))}q.application.permissions.push(a("connection-icon",q.application.icon));if(!!!!q.application.url){q.application.permissions.push(a("clint-browser-url",q.application.url))}q.application.permissions.push(a("pc-app-not-browser-model",q.connectionPermissions.browserModel));q.application.softwares=[];angular.forEach(q.addedApplicationSoftwares,function(K){q.application.softwares.push(q.systemSoftwaresMap[""+K.identifier])});var H={name:q.application.name,identifier:d};H.softwares=q.application.softwares;H.permissions=q.application.permissions;H.createTime=q.application.createTime;H.modifiedTime=q.application.modifiedTime;H.modifiedTime=q.application.modifiedTime;H.state=q.application.state;A=true;t.updateApplication(H).success(function(K){A=false;q.message.text="发布应用成功";$("#modal-alert-message").modal("show");C(function(){q.back()},3000)}).error(function(K){A=false;q.message.text="发布应用失败."+K.message;$("#modal-alert-message").modal("show")})};var c=false;q.deleteApplication=function B(){if(j.expectedCredentials||!j.canUseManageFeature){return false}if(c){return false}if(!!!q.application){return false}if(!!!q.application.identifier){return false}c=true;t.deleteApplication(q.application).success(function I(){c=false;q.message.text="删除成功!";$("#modal-alert-message").modal("show");C(function(){q.back()},3000)}).error(function H(J){c=false;q.message.text="删除失败!";$("#modal-alert-message").modal("show")})};var n=function n(){u.i("get application information:{}",d);t.getApplication(d).success(function(H){q.application.name=H.name;q.application.identifier=H.identifier;q.application.createTime=H.createTime;q.application.modifiedTime=H.modifiedTime;q.application.state=H.state;var M=H.permissions;if(!!!!M){var L={};angular.forEach(M,function(P){var Q=P.name;var R=P.value;L[Q]=R});var J="clint-desktop-type";var I="clint-browser-type";var O="clint-desktop-app";var K="clint-remote-app";if(!!!!L["application-visit-type"]){if(L["application-visit-type"]==I){if(h.valueIsTrue(L[I])){q.application.type=I}}else{if(L["application-visit-type"]==O){if(h.valueIsTrue(L[O])){q.application.type=O}}else{if(L["application-visit-type"]==K){if(h.valueIsTrue(L[K])){q.application.type=K}}}}}if(!!!!L["connection-icon"]){q.application.icon=L["connection-icon"]}if(!!!!L["clint-browser-url"]){q.application.url=L["clint-browser-url"]}if(h.valueIsTrue(L["pc-app-not-browser-model"])){q.connectionPermissions.browserModel=h.valueIsTrue(!!!!L["pc-app-not-browser-model"])}}var N=H.softwares;s={};angular.forEach(N,function(Q){var P={selected:false,identifier:Q.identifier,machine:Q.machine,name:Q.name};q.addedApplicationSoftwares.push(P);s[""+Q.identifier]=true});k()}).error(function(H){})};q.back=function o(){i.url("/system-manage/application/view")};if(!j.expectedCredentials&&j.canUseManageFeature){if(!!!!d){n()}else{k()}}}]);angular.module("application",[]);angular.module("application").controller("applicationNewController",["$scope","$injector","$interval","$timeout",function applicationNewController(n,s,r,x){var v=s.get("$q");var j=s.get("$route");var A=s.get("$http");var e=s.get("$routeParams");var y=s.get("$document");var k=s.get("$window");var g=s.get("$location");var z=s.get("$cookieStore");var h=s.get("$rootScope");var q=s.get("loggerService");var f=s.get("utilService");var B=s.get("userService");var c=s.get("systemService");var p=s.get("applicationService");n.back=function m(){g.url("/system-manage/application/view")};n.application={};n.application.type="clint-remote-app";n.application.icon="images/app-icons/browser.png";n.connectionPermissions={clienModel:false,browserModel:false};n.application.softwares=[];n.addedApplicationSoftwares=[];n.applicationSoftwares=[];n.systemSoftwaresMap={};var a=function(C,D){return{identifier:"",name:C,value:D}};n.addApplicationSoftwares=function b(){q.i("add application softwares...");var F=[];var E={};angular.forEach(n.addedApplicationSoftwares,function(G){E[""+G.machine.hostname]=true});n.message.text="";for(var C=0;C<n.applicationSoftwares.length;C++){var D=n.applicationSoftwares[C];if(D.selected){if(D.machine.hostname in E){n.message.text="已存在相同主机“"+D.machine.hostname+"”的应用程序";$("#modal-alert-message").modal("show");return false}E[""+D.machine.hostname]=true}}angular.forEach(n.applicationSoftwares,function(H){var G={selected:false,identifier:H.identifier,machine:H.machine,name:H.name};if(H.selected){n.addedApplicationSoftwares.push(G)}else{F.push(G)}});n.applicationSoftwares=F};n.removeApplicationSoftwares=function u(){q.i("remove application softwares...");var C=[];angular.forEach(n.addedApplicationSoftwares,function(E){var D={selected:false,identifier:E.identifier,machine:E.machine,name:E.name};if(E.selected){n.applicationSoftwares.push(D)}else{C.push(D)}});n.addedApplicationSoftwares=C};n.icons=f.icons;n.setAppIcon=function t(C){q.i("set application icon '{}'...",C);n.application.icon="images/app-icons/"+C};var d=false;var i=function i(){if(d){return false}d=true;p.getSystemPrograms().success(function(C){d=false;if(!!!C||C.length==0){return false}n.systemSoftwaresMap={};n.addedApplicationSoftwares=[];n.applicationSoftwares=[];angular.forEach(C,function(E){var D={selected:false,identifier:E.identifier,machine:E.machine,name:E.name};n.applicationSoftwares.push(D);n.systemSoftwaresMap[E.identifier]=E})}).error(function(C){d=false})};i();n.uploadApplicationIcon=function o(C,D){n.f=C;n.errFile=D&&D[0];if(C){c.uploadAppIconFile(C).success(function E(F){n.application.icon=F.src}).error(function(F){})}};n.message={title:"提示",text:""};var w=false;n.saveApplication=function l(){q.i("save application...");if(w){return false}if(h.expectedCredentials||!h.canUseManageFeature){return false}if(!!!n.application.name){n.message.text="请输入应用名称";$("#modal-alert-message").modal("show");return false}if(!!!n.application.type){n.message.text="请选择应用使用模式";$("#modal-alert-message").modal("show");return false}n.application.permissions=[];if(n.application.type=="clint-browser-type"){if(!!!n.application.url){n.message.text="请输入应用链接地址,如:https://192.168.10.120或 http://192.168.10.120";$("#modal-alert-message").modal("show");return false}if(n.application.url.toLocaleLowerCase().indexOf("https://")<0&&n.application.url.toLocaleLowerCase().indexOf("http://")<0){n.message.text="请输入应用链接地址访问的协议:https://192.168.10.120或 http://192.168.10.120";$("#modal-alert-message").modal("show");return false}}else{if(!n.addedApplicationSoftwares||n.addedApplicationSoftwares.length==0){if(!n.applicationSoftwares||n.applicationSoftwares.length==0){n.message.text="系统还没有添加应用程序,请先添加应用程序";$("#modal-alert-message").modal("show");return false}else{n.message.text="请选择需要应用对应的应用程序";$("#modal-alert-message").modal("show");return false}}}var E={"clint-remote-app":false,"clint-desktop-app":false,"clint-browser-type":false,"clint-web-app":false};E[""+n.application.type]=true;n.application.permissions.push(a("application-visit-type",n.application.type));for(var D in E){n.application.permissions.push(a(D,E[D]))}n.application.permissions.push(a("connection-icon",n.application.icon));if(!!!!n.application.url){n.application.permissions.push(a("clint-browser-url",n.application.url))}n.application.permissions.push(a("pc-app-not-browser-model",n.connectionPermissions.browserModel));n.application.softwares=[];angular.forEach(n.addedApplicationSoftwares,function(F){n.application.softwares.push(n.systemSoftwaresMap[""+F.identifier])});var C={name:n.application.name};C.softwares=n.application.softwares;C.permissions=n.application.permissions;w=true;p.saveApplication(C).success(function(F){w=false;n.message.text="发布应用成功";$("#modal-alert-message").modal("show");x(function(){n.back()},3000)}).error(function(F){w=false;n.message.text="发布应用失败."+F.message;$("#modal-alert-message").modal("show")})}}]);angular.module("applicationProgram").controller("applicationProgramManageController",["$scope","$injector","$interval","$timeout",function applicationProgramManageController(n,r,q,x){var v=r.get("$q");var j=r.get("$route");var A=r.get("$http");var d=r.get("$routeParams");var y=r.get("$document");var k=r.get("$window");var g=r.get("$location");var z=r.get("$cookieStore");var h=r.get("$rootScope");var p=r.get("loggerService");var e=r.get("utilService");var C=r.get("userService");var c=r.get("systemService");var t=r.get("machineService");var o=r.get("applicationService");var b=d.id;n.message={title:"",text:""};n.back=function m(){g.url("/system-manage/application-program/view")};n.program={machine:{},machineIdentifier:"",name:"",parameters:{color_depth:"32",connection_type:"private",display_type:"auto",dpi:"96",width:"",height:"",initial_program:"",initial_program_parameter:"",initial_program_parameter2:"",initial_program_undefined:"",server_layout:"zh-us-qwerty",password:"",username:""}};n.openProgramAccountTypeUserModel=true;n.$watch("program.parameters.connection_type",function(D){if(D=="public"){n.openProgramAccountTypeUserModel=false}else{n.openProgramAccountTypeUserModel=true}});n.displayInitScrrentModel=true;n.$watch("program.parameters.display_type",function(D){if(D=="setting"){n.displayInitScrrentModel=false}else{n.displayInitScrrentModel=true}});var w=false;n.saveProgram=function s(){if(h.expectedCredentials||!h.canUseManageFeature){return false}if(w){return false}if(b!=n.program.identifier){return false}if(!!!n.program.name){n.message.text="请输入应用程序名称";$("#modal-alert-message").modal("show");return false}if(!!!n.program.machineIdentifier){n.message.text="请选择应用程序主机";$("#modal-alert-message").modal("show");return false}if(!!!n.openProgramAccountTypeUserModel){if(!!!n.program.parameters.username){n.message.text="请输入用户名";$("#modal-alert-message").modal("show");return false}if(!!!n.program.parameters.password){n.message.text="请输入密码";$("#modal-alert-message").modal("show");return false}}if(!!!n.displayInitScrrentModel){if(!!!n.program.parameters.width){n.message.text="请输入宽度";$("#modal-alert-message").modal("show");return false}if(!!!n.program.parameters.height){n.message.text="请输入高度";$("#modal-alert-message").modal("show");return false}}var D={identifier:n.program.identifier,machine:{},machineIdentifier:n.program.machineIdentifier,name:n.program.name,parameters:{"color-depth":n.program.parameters.color_depth,"connection-type":n.program.parameters.connection_type,"display-type":n.program.parameters.display_type,dpi:n.program.parameters.dpi,"initial-program":n.program.parameters.initial_program,"initial-program-parameter":n.program.parameters.initial_program_parameter,"initial-program-parameter2":n.program.parameters.initial_program_parameter2,"initial-program-undefined":n.program.parameters.initial_program_undefined,"server-layout":n.program.parameters.server_layout,username:n.program.parameters.username,password:n.program.parameters.password,width:n.program.parameters.width,height:n.program.parameters.height}};w=true;o.saveApplicationProgram(D).success(function(E){w=false;n.message.text="保存成功";$("#modal-alert-message").modal("show");x(function(){n.back()},3000)}).error(function(E){w=false})};var a=false;n.deleteProgram=function u(){if(h.expectedCredentials||!h.canUseManageFeature){return false}if(a){return false}a=true;o.deleteApplicationProgram(n.program).success(function(D){a=false;n.message.text="删除成功";$("#modal-alert-message").modal("show");x(function(){n.back()},3000)}).error(function(D){a=false;n.message.text="删除失败";$("#modal-alert-message").modal("show")})};n.systemMachines=[];var i=false;var f=function f(){if(i){return false}i=true;t.getMachines().success(function E(F){i=false;n.systemMachines=F;B()}).error(function D(F){i=false})};var l=false;var B=function B(){if(l){return false}l=true;o.getApplicationProgram(b).success(function(D){l=false;n.program={identifier:b,machine:{},machineIdentifier:D.machineIdentifier,name:D.name,parameters:{color_depth:D.parameters["color-depth"],connection_type:D.parameters["connection-type"],display_type:D.parameters["display-type"],dpi:D.parameters.dpi,width:D.parameters.width,height:D.parameters.height,initial_program:D.parameters["initial-program"],initial_program_parameter:D.parameters["initial-program-parameter"],initial_program_parameter2:D.parameters["initial-program-parameter2"],initial_program_undefined:D.parameters["initial-program-undefined"],server_layout:D.parameters["server-layout"],password:D.parameters.password,username:D.parameters.username}}}).error(function(D){l=false})};if(!!!!b){if(!h.expectedCredentials&&h.canUseManageFeature){f()}}else{n.back()}}]);angular.module("applicationProgram",[]);angular.module("applicationProgram").controller("applicationProgramNewController",["$scope","$injector","$interval","$timeout",function applicationProgramNewController(k,o,n,t){var r=o.get("$q");var h=o.get("$route");var w=o.get("$http");var b=o.get("$routeParams");var u=o.get("$document");var i=o.get("$window");var e=o.get("$location");var v=o.get("$cookieStore");var f=o.get("$rootScope");var m=o.get("loggerService");var c=o.get("utilService");var x=o.get("userService");var a=o.get("systemService");var q=o.get("machineService");var l=o.get("applicationService");k.back=function j(){e.url("/system-manage/application-program/view")};k.program={machine:{},machineIdentifier:"",name:"",parameters:{color_depth:"32",connection_type:"private",display_type:"auto",dpi:"96",width:"",height:"",initial_program:"",initial_program_parameter:"",initial_program_parameter2:"",initial_program_undefined:"",server_layout:"zh-us-qwerty",password:"",username:""}};k.systemMachines=[];var g=false;var d=function d(){if(g){return false}g=true;q.getMachines().success(function z(A){g=false;k.systemMachines=A}).error(function y(A){g=false})};d();k.openProgramAccountTypeUserModel=true;k.$watch("program.parameters.connection_type",function(y){if(y=="public"){k.openProgramAccountTypeUserModel=false}else{k.openProgramAccountTypeUserModel=true}});k.displayInitScrrentModel=true;k.$watch("program.parameters.display_type",function(y){if(y=="setting"){k.displayInitScrrentModel=false}else{k.displayInitScrrentModel=true}});k.message={title:"提示",text:""};var s=false;k.saveProgram=function p(){if(s){return false}if(!!!k.program.name){k.message.text="请输入应用程序名称";$("#modal-alert-message").modal("show");return false}if(!!!k.program.machineIdentifier){k.message.text="请选择应用程序主机";$("#modal-alert-message").modal("show");return false}if(!!!k.openProgramAccountTypeUserModel){if(!!!k.program.parameters.username){k.message.text="请输入用户名";$("#modal-alert-message").modal("show");return false}if(!!!k.program.parameters.password){k.message.text="请输入密码";$("#modal-alert-message").modal("show");return false}}if(!!!k.displayInitScrrentModel){if(!!!k.program.parameters.width){k.message.text="请输入宽度";$("#modal-alert-message").modal("show");return false}if(!!!k.program.parameters.height){k.message.text="请输入高度";$("#modal-alert-message").modal("show");return false}}var y={machine:{},machineIdentifier:k.program.machineIdentifier,name:k.program.name,parameters:{"color-depth":k.program.parameters.color_depth,"connection-type":k.program.parameters.connection_type,"display-type":k.program.parameters.display_type,dpi:k.program.parameters.dpi,"initial-program":k.program.parameters.initial_program,"initial-program-parameter":k.program.parameters.initial_program_parameter,"initial-program-parameter2":k.program.parameters.initial_program_parameter2,"initial-program-undefined":k.program.parameters.initial_program_undefined,"server-layout":k.program.parameters.server_layout,username:k.program.parameters.username,password:k.program.parameters.password,width:k.program.parameters.width,height:k.program.parameters.height}};s=true;l.saveApplicationProgram(y).success(function(z){s=false;k.message.text="保存成功";$("#modal-alert-message").modal("show");t(function(){k.back()},3000)}).error(function(z){s=false})}}]);angular.module("applicationProgram").controller("applicationProgramViewController",["$scope","$injector","$interval","$timeout",function applicationProgramViewController(o,s,q,u){var t=s.get("$q");var l=s.get("$route");var x=s.get("$http");var e=s.get("$routeParams");var v=s.get("$document");var m=s.get("$window");var h=s.get("$location");var w=s.get("$cookieStore");var p=s.get("loggerService");var f=s.get("utilService");var z=s.get("userService");var c=s.get("systemService");var r=s.get("applicationService");var y=s.get("virworkBoxService");var i=s.get("$rootScope");o.data_loading=false;o.sysPrograms=[];o.programs=[];o.search_conditions=null;var d=["name","machine_name","machine_hostname"];o.$watch("search_conditions",function(A){if(!!!A&&A!=""){}else{o.programs=f.seach_condition_objs(o.sysPrograms,o.search_conditions,d)}});var k=function b(){o.sysPrograms=[];o.programs=[];o.data_loading=true;r.getSystemPrograms().success(function(A){angular.forEach(A,function(B){var D="images/app-icons/MetroUI_Mac_App_Store.png";var C=B.permissions;if(!!!!C){angular.forEach(C,function(E){if(E.name=="connection-icon"){D=E.value}})}B.icon=D;B.machine_name=B.machine.name;B.machine_hostname=B.machine.hostname;o.sysPrograms.push(B)});o.programs=f.seach_condition_objs(o.sysPrograms,o.search_conditions,d);o.data_loading=false}).error(function(A){o.data_loading=false})};o.currentProgram=null;o.setDeleteApplicationProgram=function j(A){o.currentProgram=A;o.message.title="确认要删除应用程序“"+o.currentProgram.name+"”吗?";o.message.text="删除数据将不可恢复!"};o.message={title:"",text:""};var a=false;o.deleteApplicationProgram=function n(){if(!!!o.currentProgram){return false}if(!!!o.currentProgram.identifier){return false}if(a){return false}a=true;r.deleteApplicationProgram(o.currentProgram).success(function A(){a=false;k();o.message.title="提示:";o.message.text="删除成功!";$("#modal-alert-message").modal("show")}).error(function B(C){a=false})};o.showAddNewProgram=function g(){h.url("/system-manage/application-program/new")};if(!i.expectedCredentials&&i.canUseManageFeature){k()}}]);angular.module("rest").factory("applicationService",["$injector",function applicationService(H){var v=H.get("$http");var d=H.get("$q");var u=H.get("$rootScope");var A=H.get("$cookieStore");var T=H.get("userService");var x=H.get("utilService");var M=H.get("loggerService");var h={};var J="VVWORK_APPLICATION_AUTO_OPENED";h.isAutoOpenedApplications=function f(){var Y=A.get(J);if(Y){return Y.identifiers}return null};h.saveAutoOpenApplicationStatus=function b(Y){A.put(J,{identifiers:Y})};h.clearAutoOpenApplicationStatus=function j(Y){A.remove(J)};h.getApplications=function i(){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+T.getDataSource()+"/mconnections/commonversion",params:Y})};h.getConnection=function z(Z){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+T.getDataSource()+"/connections/"+encodeURIComponent(Z),params:Y})};h.checkApplicationState=function G(){};h.createCloudStorage=function D(aa,Z){var Y={token:T.getCurrentToken(),time:new Date().getTime()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/cloudstorage/"+encodeURIComponent(T.getCurrentUsername())+"/"+encodeURIComponent(aa),params:Y,data:Z})};h.openWebApplicationExtensions=function L(aa,Z){var Y={token:T.getCurrentToken(),time:new Date().getTime()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/web-application-extensions/"+encodeURIComponent(T.getCurrentUsername())+"/"+encodeURIComponent(aa),params:Y,data:Z})};h.closeWebApplication=function U(ab,Z){var Y={token:T.getCurrentToken(),time:new Date().getTime()};var aa={id:ab,hostname:Z};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+ +encodeURIComponent(ab)+"/close-application-web",params:Y,data:aa})};h.getAutoOpenApplications=function g(){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/auto-open-connections/users/"+encodeURIComponent(T.getCurrentUsername()),params:Y})};h.saveAutoOpenApplications=function F(Z){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/auto-open-connections/users/"+encodeURIComponent(T.getCurrentUsername()),params:Y,data:Z})};h.removeAutoOpenApplications=function Q(){var Y={token:T.getCurrentToken()};return v({method:"DELETE",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/auto-open-connections/users/"+encodeURIComponent(T.getCurrentUsername()),params:Y})};h.checkApplication=function m(Z){var Y={token:T.getCurrentToken(),model:(!!!!x.isPCApp()||!!!!u.virworkBoxConnected)?"PC_APP":"crd-platform",vpnstate:u.virworkBoxVPNConnected,mutilconnection:x.mulitApplicationModel,time:x.time.getTime_long()};M.i("doConnectionBefore:"+Z);return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(Z)+"/connection-create-check",params:Y})};h.checkApplicationInformations=function s(ac){var Y={token:T.getCurrentToken(),time:x.time.getTime_long()};M.i("application informations check{}:",ac);var aa=(!!!!x.isPCApp()||!!!!u.virworkBoxConnected);var ab=!!!!u.virworkBoxVPNConnected;var Z={"virworkbox-connected":aa,"virworkbox-vpn-connected":ab,"client-web":!aa||!ab,"application-identifier":ac};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(ac)+"/application-inforamtions-check",params:Y,data:Z})};h.openRemoteDesktopModelApp=function I(Z){var Y={token:T.getCurrentToken(),hostname:Z.hostname};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(Z.identifier)+"/notification-desktop-connection",params:Y,data:{csp:u.currentUserPermissions.cloudstorageInformation.cs_passwd,cs_ip:u.currentUserPermissions.cloudstorageInformation.cs_ip,cs_port:u.currentUserPermissions.cloudstorageInformation.cs_port}})};h.closeRemoteDesktopModelApp=function C(Z){var Y={token:T.getCurrentToken(),model:"PC_APP",viewmodel:"FRDP",hostname:Z.hostname};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/mutil-client-model-closed",params:Y})};h.closeRemoteDesktopModelApp=function C(Z){var Y={token:T.getCurrentToken(),model:"PC_APP",viewmodel:"FRDP",hostname:Z.hostname};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/mutil-client-model-closed",params:Y})};h.remoteAppConnectionModelOpened=function P(Z){var Y={token:T.getCurrentToken(),hostname:Z.hostname};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(Z.identifier)+"/remote-app-model-opened",params:Y})};h.closeRemoteApplication=function N(Z){var Y={token:T.getCurrentToken(),hostname:Z.hostname};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/client-remote-model-apps-closed",params:Y,data:Z})};h.getConnectionParameters=function B(Z){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(Z)+"/parameters",params:Y})};h.getConnectionMachineInformation=function E(aa,Z){var Y={token:T.getCurrentToken(),time:x.time.getTime_long()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(aa)+"/"+encodeURIComponent(Z)+"/connection-machine-information",params:Y})};h.notificationOpenApplication=function y(ab,Z,aa){if(!!!ab){return}var Y={token:T.getCurrentToken(),time:x.time.getTime_long(),hostname:aa};if(!!!!Z){Y.VVW_ID=Z}M.i("notificationOpenApplication:{}@{}",ab,aa);return v({async:false,method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(ab)+"/connection-notification",params:Y})};h.disConnection=function e(Z,aa){var Y={token:T.getCurrentToken(),hostname:aa};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/connections/"+encodeURIComponent(Z)+"/disconnection",params:Y})};h.getAllSSOConnectionFields=function O(){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/get-sso-connection-fields",params:Y})};h.getAllSSOFields=function l(){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/get-sso-fields",params:Y})};h.getUserSSOAppAccounts=function X(){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/user/fields/"+encodeURIComponent(T.getCurrentUsername()),params:Y})};h.saveSSOField=function r(Z){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/save-sso-fields",params:Y,data:Z})};h.saveSSOConnectionField=function t(Z){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/save-sso-connection",params:Y,data:Z})};h.removeSSOConnectionField=function R(Z){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/remove-sso-connection/"+encodeURIComponent(Z),params:Y})};h.saveUserSSOUserConfig=function q(Z,aa){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/save-user-sso-fields/"+encodeURIComponent(T.getCurrentUsername())+"/"+encodeURIComponent(Z),params:Y,data:aa})};h.removeUserSSOUserConfig=function p(Z){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/sso-connection-fields/remove-user-sso-fields/"+encodeURIComponent(T.getCurrentUsername())+"/"+encodeURIComponent(Z),params:Y})};h.getMachineInformations=function W(Z){var Y={token:T.getCurrentToken()};var aa={identifier:"",hostname:Z,name:"",port:"",connections:"",state:"1",actives:0};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/machines/machine-informations",params:Y,data:aa})};h.getApplication=function k(Z){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/mconnections/"+encodeURIComponent(Z),params:Y})};h.saveApplication=function S(Z){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/mconnections",params:Y,data:Z})};h.updateApplication=function o(Z){var Y={token:T.getCurrentToken()};return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/mconnections/"+encodeURIComponent(Z.identifier),params:Y,data:Z})};h.deleteApplication=function c(Z){var Y={token:T.getCurrentToken()};return v({method:"DELETE",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/mconnections/"+encodeURIComponent(Z.identifier),params:Y})};h.getSystemPrograms=function a(){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/softwares",params:Y})};h.saveApplicationProgram=function V(Z){var Y={token:T.getCurrentToken()};if(!!!Z.identifier){return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/softwares",params:Y,data:Z})}else{return v({method:"POST",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/softwares/"+encodeURIComponent(Z.identifier),params:Y,data:Z})}};h.getApplicationProgram=function w(Z){var Y={token:T.getCurrentToken()};return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/softwares/"+encodeURIComponent(Z),params:Y})};h.deleteApplicationProgram=function K(Z){var Y={token:T.getCurrentToken()};return v({method:"DELETE",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/softwares/"+encodeURIComponent(Z.identifier),params:Y})};h.getActiveConnections=function n(Z){var Y={token:T.getCurrentToken()};if(Z){Y.machineId=Z}return v({method:"GET",url:x.tomcat_request_host+"/api/data/"+encodeURIComponent(T.getDataSource())+"/activeConnections",params:Y})};return h}]);angular.module("application").controller("applicationSessionViewController",["$scope","$injector","$interval","$timeout",function applicationSessionViewController(l,p,n,r){var q=p.get("$q");var j=p.get("$route");var u=p.get("$http");var d=p.get("$routeParams");var s=p.get("$document");var k=p.get("$window");var f=p.get("$location");var t=p.get("$cookieStore");var m=p.get("loggerService");var e=p.get("utilService");var v=p.get("userService");var o=p.get("applicationService");var g=p.get("$rootScope");var a=d.id;l.sysApplicationSessions=[];l.objspage=e.init_object_paging();l.search_conditions=null;var b=["username","clientHostname","connectionName","machineHostname","startDate","viewModel"];l.vpages=[];l.pages=0;l.page=0;l.page_size=0;l.start=0;l.end=0;l.$watch("page_size",function(w){if(w!=0){l.page=1;l.objspage=e.object_paging(l.sysApplicationSessions,l.page,l.page_size,l.search_condition,b)}});l.$watch("search_condition",function(w){if(!!!w&&w!=""){}else{l.page=1;l.objspage=e.object_paging(l.sysApplicationSessions,l.page,l.page_size,l.search_condition,b)}});l.pagefornumber=function h(w){l.page=w;l.objspage=e.object_paging(l.sysApplicationSessions,l.page,l.page_size,l.search_condition,b)};var c=false;var i=function i(){if(c){return false}l.sysApplicationSessions=[];c=true;o.getActiveConnections(a).success(function(x){c=false;angular.forEach(x,function w(y){var z={clientHostname:y.clientHostname,connectionIdentifier:y.connectionIdentifier,connectionName:y.connectionName,identifier:y.identifier,machineHostname:y.machineHostname,startDate:e.time.getTime_YMDHMS4Time(y.startDate),username:y.username,viewModel:""};if(y.viewModel=="REMOTEAPP"){z.viewModel="虚拟集成模式"}else{if(y.viewModel=="FRDP"){z.viewModel="虚拟加速模式"}else{if(y.viewModel=="REMOTEAPP"){z.viewModel="虚拟兼容模式"}}}l.sysApplicationSessions.push(z)});l.page=1;l.page_size=10}).error(function(w){c=false})};if(!g.expectedCredentials&&g.canUseManageFeature){i()}}]);angular.module("applicationSso").controller("applicationSsoManageController",["$scope","$injector","$interval","$timeout",function applicationSsoManageController(o,s,q,z){var w=s.get("$q");var k=s.get("$route");var C=s.get("$http");var e=s.get("$routeParams");var A=s.get("$document");var l=s.get("$window");var g=s.get("$location");var B=s.get("$cookieStore");var p=s.get("loggerService");var f=s.get("utilService");var F=s.get("userService");var c=s.get("systemService");var r=s.get("applicationService");var E=s.get("virworkBoxService");var j=s.get("$rootScope");o.message={title:"提示",title:""};var y=64,b=f.encode_type_utf8,D=3;o.fields=[];o.ssoConnectionfields=[];o.ssoConnections=[];var v=false;o.initDatas=function n(){if(v){return false}v=true;r.getApplications().success(function(I){var H={};angular.forEach(I,function G(J){var K={};K.connection=J;K.fieldType="";K.fields={identifier:"",connectionIdentifier:"",ssoFields:""};K.userFieldValues=[];K.isConfig=false;K.fieldValueMap={};H[J.identifier]=K;o.ssoConnections.push(K)});r.getUserSSOAppAccounts().success(function(N){if(!!!!N&&!!!!N.parameters){var Q=N.parameters.ssoConnectionFields;var M=N.parameters.fields;var S=N.parameters.userSSOFields;if(!!!M){return false}if(!!!Q){return false}o.fields=M;o.ssoConnectionfields=Q;var J={};var L={};angular.forEach(M,function(T){if(T.type=="KEY"){J[T.field]=T}if(T.type=="STRING"){L[T.field]=T}});angular.forEach(Q,function(Z){var V=Z.connectionIdentifier;var W=H[V];if(!!!!W){W.fieldType="sandbox_pass";W.fields=Z.ssoFields;var U=Z.ssoFields;var Y=U.split("}");for(var X=0;X<Y.length;X++){var aa=Y[X];if(!!!aa||aa==""||aa.length==0){continue}aa=aa.trim();aa=aa.replace("{","");if(aa in L){var T={identifier:"",connectionIdentifier:V,field:aa,value:""};W.fieldValueMap[aa]=T}H[V]=W}H[V]=W}});angular.forEach(S,function(U){var T=H[U.connectionIdentifier];if(!!!!T){T.fieldValueMap[U.field]=U;T.isConfig=true;H[U.connectionIdentifier]=T}});o.ssoConnections=[];for(var O in H){var P=H[O];if(!!!!P){for(var K in P.fieldValueMap){var R=P.fieldValueMap[K];if(!!!!R.value&&R.value!=""){R.value=f.Base64Decode(R.value,b,D)}P.userFieldValues.push(R)}H[O]=P;o.ssoConnections.push(P)}}if(!!!!f.pc()){if(!!!!j.virworkBoxConnected){E.sendSSOAppAccountInformation()}}}}).error(function(J){});v=false}).error(function(G){v=false})};o.currentUserSSOApplication=null;o.editSsoConnectionFieldValues=function m(G){o.currentUserSSOApplication=G;o.showSSOConnections=false;o.showEditSSOConnectionFieldValue=true;$("#modal-application-sso-setting").modal("show")};o.cancelUserSsoConnectionFieldValuesConfig=function u(){o.showSSOConnections=true;o.showEditSSOConnectionFieldValue=false;o.currentUserSSOApplication=null};var a=function(){$("#modal-application-sso-setting").modal("hide");o.message.title="提示";o.message.text="清除配置失败";$("#modal-alert-message").modal("show")};var d=false;o.removeUserSsoConnectionFieldValuesConfig=function t(){var G=o.currentUserSSOApplication.connection.identifier;if(d){return false}d=true;r.removeUserSSOUserConfig(G).success(function(H){d=false;if(!!!!H&&!!!!H.success){$("#modal-application-sso-setting").modal("hide");o.message.title="提示";o.message.text="清除配置成功";$("#modal-alert-message").modal("show");o.initDatas()}else{a()}}).error(function(H){d=false;a()});o.showSSOConnections=true;o.showEditSSOConnectionFieldValue=false;o.currentUserSSOApplication=null};var i=function(){$("#modal-application-sso-setting").modal("hide");o.message.title="提示";o.message.text="清除配置失败";$("#modal-alert-message").modal("show")};var x=false;o.saveUserSsoConnectionFieldValuesConfig=function h(){var H=o.currentUserSSOApplication.connection.identifier;var I=o.currentUserSSOApplication.userFieldValues;if(x){return false}if(!!!!I.value){fieldvalue.value}var G=[];angular.forEach(I,function(J){if(!!!!J.value&&J.value!=""){J.value=f.Base64Encode(J.value,b,D)}G.push(J)});x=true;r.saveUserSSOUserConfig(H,G).success(function(J){x=false;if(!!!!J&&!!!!J.success){$("#modal-application-sso-setting").modal("hide");o.message.title="提示";o.message.text="保存成功";$("#modal-alert-message").modal("show");o.initDatas()}else{i()}}).error(function(J){x=false;i()});o.showSSOConnections=true;o.showEditSSOConnectionFieldValue=false;o.currentUserSSOApplication=null};o.showSSOConnections=true;o.showEditSSOConnectionFieldValue=false;o.initDatas()}]);angular.module("applicationSso",[]);angular.module("applicationSso").controller("applicationSsoViewController",["$scope","$injector","$interval","$timeout",function applicationSsoViewController(h,A,l,z){var b=A.get("$q");var q=A.get("$route");var k=A.get("$http");var I=A.get("$routeParams");var o=A.get("$document");var G=A.get("$window");var B=A.get("$location");var r=A.get("$cookieStore");var F=A.get("loggerService");var n=A.get("utilService");var J=A.get("userService");var C=A.get("systemService");var e=A.get("applicationService");var E=A.get("virworkBoxService");var j=A.get("$rootScope");h.applications=[];h.sysApplications=[];h.search_conditions=null;var x=["name","sso_fields_status"];h.$watch("search_conditions",function(L){if(!!!L&&L!=""){}else{h.applications=n.seach_condition_objs(h.sysApplications,h.search_conditions,x)}});var K=false;var D=function D(){if(K){return false}h.sysApplications=[];h.applications=[];K=true;e.getApplications().success(function(N){var L={};angular.forEach(N,function(R){var S="images/app-icons/MetroUI_Mac_App_Store.png";var Q=R.permissions;if(!!!!Q){angular.forEach(Q,function(T){if(T.name=="connection-icon"){S=T.value}})}var P={identifier:R.identifier,name:R.name,icon:S,sso_fields_type:"",sso_fields_status:"未开启 未启用",sso_fields_identifier:null,is_sso_application:false,fields:""};L[""+P.identifier]=P});var M={};e.getAllSSOConnectionFields().success(function(Q){if(!!!!Q&&!!!!Q.parameters&&Q.parameters.fields.length>0){var P=Q.parameters.fields;angular.forEach(P,function(R){if(!!!!L[""+R.connectionIdentifier]){L[""+R.connectionIdentifier].is_sso_application=true;L[""+R.connectionIdentifier].sso_fields_type="sandbox_pass";L[""+R.connectionIdentifier].sso_fields_status="已启用 开启 通用模式 通用 模式";L[""+R.connectionIdentifier].sso_fields_identifier=R.identifier;L[""+R.connectionIdentifier].fields=R.ssoFields}})}}).error(function(P){});for(var O in L){h.sysApplications.push(L[""+O])}h.applications=n.seach_condition_objs(h.sysApplications,h.search_conditions,x);K=false}).error(function(L){K=false})};h.currentApplication=null;h.message={title:"",text:""};var m=false;h.openApplicationSSOModel=function c(M){if(m){return false}var L={connectionIdentifier:M.identifier,identifier:"",ssoFields:" {用户名} {TAB} {密码} {ENTER} "};m=true;e.saveSSOConnectionField(L).success(function(N){h.message.title="提示:";h.message.text="启用通用模式成功";$("#modal-alert-message").modal("show");z(function(){D()},1000);m=false}).error(function(N){h.message.title="提示:";h.message.text="启用通用模式失败";$("#modal-alert-message").modal("show");m=false})};var v=false;h.closeApplicationSSOModel=function u(L){if(!!!L.sso_fields_identifier){return false}if(v){return false}v=true;e.removeSSOConnectionField(L.sso_fields_identifier).success(function(M){h.message.title="提示:";h.message.text="取消通用模式成功";$("#modal-alert-message").modal("show");z(function(){D()},1000);v=false}).error(function(M){h.message.title="提示:";h.message.text="取消模式失败";$("#modal-alert-message").modal("show");v=false})};h.currentSsoApplication=null;h.showAddNewSSOFieldView=false;h.editApplicationSSOFields=function i(L){h.showAddNewSSOFieldView=false;if(!!!L){return false}if(!!!L.sso_fields_identifier){return false}h.getSystemFields();h.currentSsoApplication=L;$("#modal-application-sso-setting").modal("show")};if(!j.expectedCredentials&&j.canUseManageFeature){D()}h.sysFields=[];var p=false;h.getSystemFields=function s(){if(p){return false}p=true;h.sysFields=[];e.getAllSSOFields().success(function(L){if(!!!!L&&!!!!L.parameters&&!!!!L.parameters.fields){if(L.parameters.fields.length>0){h.sysFields=L.parameters.fields}}p=false}).error(function(L){p=false})};h.lastFocused;angular.element("input[name='sso_application_field']").focus(function(){h.lastFocused=document.activeElement});h.addField2Config=function a(R){var T=" {"+R.field+"} ";var S=h.lastFocused;if(S==undefined){h.currentSsoApplication.fields+=T;return}var L=S.scrollTop;var Q=0;var O=((S.selectionStart||S.selectionStart=="0")?"ff":(document.selection?"ie":false));if(O=="ie"){S.focus();var P=document.selection.createRange();P.moveStart("character",-S.value.length);Q=P.text.length}else{if(O=="ff"){Q=S.selectionStart}}var M=(S.value).substring(0,Q);var N=(S.value).substring(Q,S.value.length);S.value=M+T+N;Q=Q+T.length;if(O=="ie"){S.focus();var P=document.selection.createRange();P.moveStart("character",-S.value.length);P.moveStart("character",Q);P.moveEnd("character",0);P.select()}else{if(O=="ff"){S.selectionStart=Q;S.selectionEnd=Q;S.focus()}}S.scrollTop=L;angular.element(S).trigger("input")};h.cancelSaveSSOConnectionConfig=function w(){h.currentSsoApplication=null};var d=false;h.saveSSOConnectionConfig=function y(){if(!!!h.currentSsoApplication){return false}if(d){return false}if(!!!h.currentSsoApplication.fields||h.currentSsoApplication.fields==""){h.errorMessage="字段不能为空";return false}var L={connectionIdentifier:h.currentSsoApplication.identifier,identifier:h.currentSsoApplication.sso_fields_identifier,ssoFields:h.currentSsoApplication.fields};d=true;e.saveSSOConnectionField(L).success(function(M){d=false;if(!!!!M&&M.success){h.message.title="提示:";h.message.text="保存成功";$("#modal-alert-message").modal("show");z(function(){D()},1000)}}).error(function(M){d=false;h.errorMessage="保存失败";return false})};h.newField={description:"",field:"",identifier:null,isDefault:false,keyCode:0,type:"STRING",};h.addSystemSSOField=function t(){h.newField={description:"",field:"",identifier:null,isDefault:false,keyCode:0,type:"STRING",};h.errorMessage="";h.showAddNewSSOFieldView=true};h.errorMessage="";h.cancelAddSSOField=function H(){h.showAddNewSSOFieldView=false};var g=false;h.saveSSOField=function f(){if(g){return false}if(!!!h.newField.field||h.newField.field==""){h.errorMessage="请输入字段名称";return false}if(h.newField.field.indexOf("{")>-1||h.newField.field.indexOf("}")>-1){h.errorMessage="字段不能包含字符'{'或'}'";return false}for(var L=0;L<h.sysFields.length;L++){var M=h.sysFields[L];if(M.field==h.newField.field){h.errorMessage="该字段已存在";return false}}h.errorMessage="";g=true;e.saveSSOField(h.newField).success(function(N){g=false;if(!!!!N&&N.success){h.errorMessage="";h.getSystemFields();h.showAddNewSSOFieldView=false}else{h.errorMessage="保存失败"}}).error(function(N){g=false;h.errorMessage="保存失败"})}}]);angular.module("application").controller("applicationStoreAppNewController",["$scope","$injector","$interval","$timeout",function applicationStoreAppNewController(k,p,o,t){var r=p.get("$q");var g=p.get("$route");var w=p.get("$http");var b=p.get("$routeParams");var u=p.get("$document");var h=p.get("$window");var d=p.get("$location");var v=p.get("$cookieStore");var e=p.get("$rootScope");var n=p.get("loggerService");var c=p.get("utilService");var x=p.get("userService");var a=p.get("systemService");var m=p.get("applicationService");k.back=function j(){d.url("/system-manage/application-store/view")};k.application={name:"",group_identifier:"",source_type:"upload_apk",install_apk:"",download_url:"",icon:"images/app-icons/browser.png",app_current_token:"",app_tokens:[],path:"",identifier:""};k.icons=c.icons;k.setAppIcon=function q(y){n.i("set application icon '{}'...",y);k.application.icon="images/app-icons/"+y};k.uploadApplicationIcon=function l(y,A){k.f=y;k.errFile=A&&A[0];if(y){a.uploadAppIconFile(y).success(function z(B){k.application.icon=B.src}).error(function(B){})}};k.uploadApplicationAPK=function f(y,A){k.f=y;k.errFile=A&&A[0];if(y){a.uploadAppFile(y).success(function z(B){k.application.install_apk=B.src}).error(function(B){})}};k.message={title:"提示",text:""};var s=false;k.saveApplication=function i(){n.i("save application...");if(e.expectedCredentials||!e.canUseManageFeature){return false}if(s){return false}if(!!!k.application.name){k.message.text="请输入应用名称";$("#modal-alert-message").modal("show");return false}if(!!!k.application.source_type){k.message.text="请选择应用程序类型";$("#modal-alert-message").modal("show");return false}if(k.application.source_type=="upload_apk"){if(!!!k.application.install_apk){k.message.text="请选择要上传的应用程序";$("#modal-alert-message").modal("show");return false}}if(k.application.source_type=="download_url"){if(!!!k.application.download_url){k.message.text="请输入应用链接地址";$("#modal-alert-message").modal("show");return false}}if(!!!k.application.path){k.message.text="请输入应用的启动程序";$("#modal-alert-message").modal("show");return false}k.application.permissions=[];if(k.application.type=="clint-browser-type"){if(!!!k.application.url){k.message.text="请输入应用链接地址,如:https://192.168.10.120或 http://192.168.10.120";$("#modal-alert-message").modal("show");return false}if(k.application.url.toLocaleLowerCase().indexOf("https://")<0&&k.application.url.toLocaleLowerCase().indexOf("http://")<0){k.message.text="请输入应用链接地址访问的协议:https://192.168.10.120或 http://192.168.10.120";$("#modal-alert-message").modal("show");return false}}else{if(!k.addedApplicationSoftwares||k.addedApplicationSoftwares.length==0){if(!k.applicationSoftwares||k.applicationSoftwares.length==0){k.message.text="系统还没有添加应用程序,请先添加应用程序";$("#modal-alert-message").modal("show");return false}else{k.message.text="请选择需要应用对应的应用程序";$("#modal-alert-message").modal("show");return false}}}s=true;m.saveApplicationStoreApk(application).success(function(y){s=false;k.message.text="发布应用成功";$("#modal-alert-message").modal("show");t(function(){k.back()},3000)}).error(function(y){s=false;k.message.text="发布应用失败."+y.message;$("#modal-alert-message").modal("show")})}}]);angular.module("application").controller("applicationStoreViewController",["$scope","$injector","$interval","$timeout",function applicationStoreViewController(n,r,p,w){var t=r.get("$q");var k=r.get("$route");var z=r.get("$http");var e=r.get("$routeParams");var x=r.get("$document");var l=r.get("$window");var h=r.get("$location");var y=r.get("$cookieStore");var o=r.get("loggerService");var g=r.get("utilService");var B=r.get("userService");var c=r.get("systemService");var q=r.get("applicationService");var A=r.get("virworkBoxService");var i=r.get("$rootScope");n.data_loading=false;n.applications=[];n.sysApplications=[];n.search_conditions=null;var d=["name"];n.$watch("search_conditions",function(C){if(!!!C&&C!=""){}else{n.applications=g.seach_condition_objs(n.sysApplications,n.search_conditions,d)}});var b=function b(){n.applications=[];n.sysApplications=[];n.data_loading=true;q.getApplications().success(function(C){angular.forEach(C,function(F){var G="images/app-icons/MetroUI_Mac_App_Store.png";var E=F.permissions;if(!!!!E){angular.forEach(E,function(H){if(H.name=="connection-icon"){G=H.value}})}var D={identifier:F.identifier,name:F.name,icon:G};n.sysApplications.push(D)});n.applications=g.seach_condition_objs(n.sysApplications,n.search_conditions,d);n.data_loading=false}).error(function(C){n.data_loading=false})};n.currentApplication=null;n.setDeleteApplication=function f(C){n.currentApplication=C;n.message.title="确认要删除应用“"+n.currentApplication.name+"”吗?";n.message.text="删除数据将不可恢复!"};n.message={title:"",text:""};var u=false;var a=false;n.deleteApplication=function v(){if(i.expectedCredentials||!i.canUseManageFeature){return false}if(!!!n.currentApplication){return false}if(!!!n.currentApplication.identifier){return false}if(a){return false}a=true;q.deleteApplication(n.currentApplication).success(function D(){a=false;b();n.message.title="提示:";n.message.text="删除成功!";$("#modal-alert-message").modal("show")}).error(function C(E){a=false})};n.showAddNewApplication=function s(){h.url("/system-manage/application-store/new")};n.openApplicationSandboxModel=function j(C){if(!!!i.virworkBoxConnected){n.message.title="提示:";n.message.text="沙盒还没有启动, 无法打开应用“"+C.name+"”!";g.notify("沙盒还没有启动, 无法打开应用“"+C.name+"”!");$("#modal-alert-message").modal("show");return false}if(!!!i.virworkBoxVPNConnected){n.message.title="提示:";n.message.text="沙盒安全通道未建立, 无法打开应用“"+C.name+"”!";g.notify("沙盒安全通道未建立, 无法打开应用“"+C.name+"”!");$("#modal-alert-message").modal("show");return false}};n.openApplicationWebModel=function m(C){};if(!i.expectedCredentials&&i.canUseManageFeature){b()}}]);angular.module("application").controller("applicationViewController",["$scope","$injector","$interval","$timeout",function applicationViewController(n,r,p,v){var t=r.get("$q");var k=r.get("$route");var y=r.get("$http");var e=r.get("$routeParams");var w=r.get("$document");var l=r.get("$window");var h=r.get("$location");var x=r.get("$cookieStore");var o=r.get("loggerService");var g=r.get("utilService");var A=r.get("userService");var c=r.get("systemService");var q=r.get("applicationService");var z=r.get("virworkBoxService");var i=r.get("$rootScope");n.data_loading=false;n.applications=[];n.sysApplications=[];n.search_conditions=null;var d=["name"];n.$watch("search_conditions",function(B){if(!!!B&&B!=""){}else{n.applications=g.seach_condition_objs(n.sysApplications,n.search_conditions,d)}});var b=function b(){n.applications=[];n.sysApplications=[];n.data_loading=true;q.getApplications().success(function(B){angular.forEach(B,function(E){var F="images/app-icons/MetroUI_Mac_App_Store.png";var D=E.permissions;if(!!!!D){angular.forEach(D,function(G){if(G.name=="connection-icon"){F=G.value}})}var C={identifier:E.identifier,name:E.name,icon:F};n.sysApplications.push(C)});n.applications=g.seach_condition_objs(n.sysApplications,n.search_conditions,d);n.data_loading=false}).error(function(B){n.data_loading=false})};n.currentApplication=null;n.setDeleteApplication=function f(B){n.currentApplication=B;n.message.title="确认要删除应用“"+n.currentApplication.name+"”吗?";n.message.text="删除数据将不可恢复!"};n.message={title:"",text:""};var a=false;n.deleteApplication=function u(){if(i.expectedCredentials||!i.canUseManageFeature){return false}if(!!!n.currentApplication){return false}if(!!!n.currentApplication.identifier){return false}if(a){return false}a=true;q.deleteApplication(n.currentApplication).success(function C(){a=false;b();n.message.title="提示:";n.message.text="删除成功!";$("#modal-alert-message").modal("show")}).error(function B(D){a=false})};n.showAddNewApplication=function s(){h.url("/system-manage/application/new")};n.openApplicationSandboxModel=function j(B){if(!!!i.virworkBoxConnected){n.message.title="提示:";n.message.text="沙盒还没有启动, 无法打开应用“"+B.name+"”!";g.notify("沙盒还没有启动, 无法打开应用“"+B.name+"”!");$("#modal-alert-message").modal("show");return false}if(!!!i.virworkBoxVPNConnected){n.message.title="提示:";n.message.text="沙盒安全通道未建立, 无法打开应用“"+B.name+"”!";g.notify("沙盒安全通道未建立, 无法打开应用“"+B.name+"”!");$("#modal-alert-message").modal("show");return false}};n.openApplicationWebModel=function m(B){};if(!i.expectedCredentials&&i.canUseManageFeature){b()}}]);angular.module("rest").factory("ClientIdentifier",["$injector",function defineClientIdentifier(b){var d=b.get("$window");var a=function a(f){f=f||{};this.id=f.id;this.hostname=f.hostname;this.desktopApplication=f.desktopApplication;this.ssoApplication=f.ssoApplication};a.Types={CONNECTION:"c",CONNECTION_GROUP:"g"};a.toString=function c(f){return window.btoa([f.id,f.hostname,f.desktopApplication,f.ssoApplication].join("\0"))};a.fromString=function e(h){try{var f=d.atob(h).split("\0");return new a({id:f[0],hostname:f[1],desktopApplication:f[2],ssoApplication:f[3]})}catch(g){return new a({id:h,hostname:null,desktopApplication:false,ssoApplication:false})}};return a}]);angular.module("department").controller("departmentManageController",["$scope","$injector","$interval","$timeout",function departmentManageController(o,s,q,x){var v=s.get("$q");var j=s.get("$route");var A=s.get("$http");var d=s.get("$routeParams");var y=s.get("$document");var k=s.get("$window");var h=s.get("$location");var z=s.get("$cookieStore");var i=s.get("$rootScope");var p=s.get("loggerService");var f=s.get("utilService");var B=s.get("userService");var c=s.get("systemService");var w=s.get("departmentService");var b=d.id;o.department={identifier:b,name:"",parentIdentifier:"",description:""};o.message="";o.sysDepartments=[];var e=false;var m=function m(){if(e){return false}e=true;w.getDepartments().success(function C(E){o.sysDepartments=E;e=false}).error(function D(E){e=false})};m();var l=false;o.saveDepartment=function u(){if(i.expectedCredentials||!i.canUseManageFeature){return false}if(l){return false}p.i("save department...");if(!!!o.department.name){o.message="请输入部门名称";$("#modal-default").modal("show");return false}l=true;w.saveDepartment(o.department).success(function(C){o.message="保存成功";$("#modal-default").modal("show");w.syncUserCloudUserGroup();x(function(){l=false;o.back()},3000)}).error(function(C){o.message="保存失败."+C.message;$("#modal-default").modal("show");l=false})};var t=false;o.deleteDepartment=function a(){if(i.expectedCredentials||!i.canUseManageFeature){return false}if(!!!o.department){return false}if(!!!o.department.identifier){return false}if(t){return false}t=true;w.deleteDepartment(o.department).success(function D(){o.message="删除成功!";$("#modal-default").modal("show");w.syncUserCloudUserGroup();x(function(){o.back()},3000);t=false}).error(function C(E){o.message="删除失败!";$("#modal-default").modal("show");t=false})};var r=false;var g=function g(){if(r){return false}r=true;p.i("get department information:{}",b);w.getDepartment(b).success(function(C){o.department=C;r=false}).error(function(C){r=false})};o.back=function n(){h.url("/system-manage/department/view")};if(!!!!b){g()}else{h.url("/system-manage/department/new")}}]);angular.module("department",[]);angular.module("department").controller("departmentNewController",["$scope","$injector","$interval","$timeout",function departmentNewController(k,o,m,s){var q=o.get("$q");var f=o.get("$route");var v=o.get("$http");var a=o.get("$routeParams");var t=o.get("$document");var g=o.get("$window");var d=o.get("$location");var u=o.get("$cookieStore");var e=o.get("$rootScope");var l=o.get("loggerService");var c=o.get("utilService");var w=o.get("userService");var n=o.get("applicationService");var r=o.get("departmentService");k.back=function j(){d.url("/system-manage/department/view")};k.department={name:"",parentIdentifier:"",description:""};k.sysDepartments=[];var b=false;var i=function i(){if(b){return false}b=true;r.getDepartments().success(function x(z){k.sysDepartments=z;b=false}).error(function y(z){b=false})};i();k.message="";var h=false;k.save=function p(){l.i("save department...");if(e.expectedCredentials||!e.canUseManageFeature){return false}if(!!!k.department.name){k.message="请输入部门名称";$("#modal-default").modal("show");return false}if(h){return false}h=true;r.createDepartment(k.department).success(function(x){k.message="创建成功";$("#modal-default").modal("show");r.syncUserCloudUserGroup();s(function(){k.back()},3000);h=false}).error(function(x){k.message="创建失败."+x.message;$("#modal-default").modal("show");h=false})}}]);angular.module("rest").factory("departmentService",["$injector",function departmentService(j){var g=j.get("$http");var e=j.get("$q");var a=j.get("userService");var c=j.get("utilService");var h=j.get("$rootScope");var f={};f.getDepartments=function d(){var m={token:a.getCurrentToken()};return g({method:"GET",url:c.tomcat_request_host+"/api/data/"+encodeURIComponent(a.getDataSource())+"/department/all",params:m})};f.getDepartment=function l(n){var m={token:a.getCurrentToken()};return g({method:"GET",url:c.tomcat_request_host+"/api/data/"+encodeURIComponent(a.getDataSource())+"/department/"+encodeURIComponent(n),params:m})};f.deleteDepartment=function k(n){var m={token:a.getCurrentToken()};return g({method:"DELETE",url:c.tomcat_request_host+"/api/data/"+encodeURIComponent(a.getDataSource())+"/department/"+encodeURIComponent(n.identifier),params:m})};f.createDepartment=function i(n){var m={token:a.getCurrentToken()};return g({method:"POST",url:c.tomcat_request_host+"/api/data/"+encodeURIComponent(a.getDataSource())+"/department",params:m,data:n})};f.syncUserCloudUserGroup=function(){var m={};return g({method:"POST",headers:a.getHeaders4Token(),url:c.tomcat_request_host+"/api/data/"+encodeURIComponent(a.getDataSource())+"/department/sync-cloud-user-group",params:m,data:{}})};f.saveDepartment=function b(n){var m={token:a.getCurrentToken()};return g({method:"POST",url:c.tomcat_request_host+"/api/data/"+encodeURIComponent(a.getDataSource())+"/department/"+encodeURIComponent(n.identifier),params:m,data:n})};return f}]);angular.module("department").controller("departmentViewController",["$scope","$injector","$interval","$timeout",function departmentViewController(m,q,p,u){var s=q.get("$q");var j=q.get("$route");var x=q.get("$http");var d=q.get("$routeParams");var v=q.get("$document");var k=q.get("$window");var g=q.get("$location");var w=q.get("$cookieStore");var i=q.get("$rootScope");var o=q.get("loggerService");var f=q.get("utilService");var y=q.get("userService");var t=q.get("departmentService");m.message={title:"提示:",text:""};m.sysDepartments=[];m.departments=[];m.search_conditions=null;var c=["name"];m.$watch("search_conditions",function(z){if(!!!z&&z!=""){}else{m.departments=f.seach_condition_objs(m.sysDepartments,m.search_conditions,c)}});var e=false;var l=function l(){m.sysDepartments=[];m.departments=[];if(e){return false}e=true;t.getDepartments().success(function z(B){angular.forEach(B,function(C){C.iconText=C.name.substring(0,1).toUpperCase();m.sysDepartments.push(C)});m.departments=f.seach_condition_objs(m.sysDepartments,m.search_conditions,c);e=false}).error(function A(B){e=false})};var h=function h(){o.i("loading department informations...");l()};m.currentDepartment=null;m.setDeleteDepartment=function r(z){m.currentDepartment=z;m.message.title="确认要删除部门“"+m.currentDepartment.name+"”吗?";m.message.text="删除数据将不可恢复!"};var b=false;m.deleteDepartment=function a(){if(i.expectedCredentials||!i.canUseManageFeature){return false}if(b){return false}if(!!!!m.currentDepartment){b=true;t.deleteDepartment(m.currentDepartment).success(function z(B){l();t.syncUserCloudUserGroup();b=false}).error(function A(B){l();b=false})}};m.showAddNewDepartment=function n(){g.url("/system-manage/department/new")};h()}]);angular.module("download").controller("downloadController",["$scope","$injector","$interval","$timeout",function homeController(m,l,f,b){var g=l.get("$q");var j=l.get("$route");var h=l.get("$http");var k=l.get("$routeParams");var c=l.get("$document");var a=l.get("$window");var e=l.get("$location");var n=l.get("$cookieStore");var i=l.get("$rootScope");var d=l.get("utilService");m.downloadAppUrl=d.app_download_url}]);angular.module("download",[]);angular.module("rest").factory("FeaturePermissionEntry",[function defineFeaturePermissionEntry(){var a={};a.template=function b(c){c=c||{};this.identifier=c.identifier;this.name=c.name;this.value=c.value};a.permission={account_manage:false,department_manage:false,department_views_manage:false,department_new_manage:false,department_update_manage:false,department_delete_manage:false,role_manage:false,role_views_manage:false,role_new_manage:false,role_update_manage:false,role_delete_manage:false,user_manage:false,user_views_manage:false,user_views_ogz_manage:false,user_new_manage:false,user_new_basic_input_manage:false,user_new_wg_input_manage:false,user_disabled_manage:false,user_disabled_ip_manage:false,machine_manage:false,machine_views_manage:false,machine_new_manage:false,machine_update_manage:false,machine_delete_manage:false,application_manage:false,application_views_manage:false,application_new_manage:false,application_update_manage:false,application_delete_manage:false,application_software_manage:false,application_software_views_manage:false,application_software_new_manage:false,application_software_update_manage:false,application_software_delete_manage:false};return a}]);angular.module("home").controller("homeController",["$scope","$injector","$interval","$timeout",function homeController(j,m,l,o){var n=m.get("$q");var h=m.get("$route");var r=m.get("$http");var c=m.get("$routeParams");var p=m.get("$document");var i=m.get("$window");var e=m.get("$location");var q=m.get("$cookieStore");var g=m.get("$rootScope");var k=m.get("loggerService");var d=m.get("utilService");var a=m.get("systemService");var s=m.get("userService");var b=s.getCurrentUsername();var f=function f(){k.i("loading datas...");g.getSystemInformations()};if(!g.expectedCredentials){f()}}]);angular.module("home",[]);angular.module("rest").factory("ImageDataURLEntry",[function defineImageDataURLEntry(){var a={};a.defaultLogoImageData="/userdata/tricolor.png";a.defaultLogoIconData="/userdata/logo.png";a.defaultImagesData={setting:"imgs/setting.jpg",cloudstorage:"imgs/cloudstorage.jpg"};return a}]);angular.module("index").controller("indexController",["$scope","$injector","$interval","$timeout",function indexController(g,A,o,z){var b=A.get("$q");var s=A.get("$route");var m=A.get("$http");var M=A.get("$routeParams");var r=A.get("$document");var K=A.get("$window");var B=A.get("$location");var t=A.get("$cookieStore");var j=A.get("$rootScope");g.APP={NAME:"VirWork跨屏办公后台管理系统",VERSION:"5.0.0.1",className:""};var J=A.get("loggerService");var q=A.get("utilService");var a=A.get("mobileAppService");var H=A.get("virworkBoxService");var C=A.get("systemService");var N=A.get("userService");var I=A.get("usersService");var c=A.get("applicationService");var k=A.get("ApplicationEntry");var e=A.get("UserAppPermissionsEntry");var h=A.get("UserPermissionsEntry");var p=A.get("ImageDataURLEntry");var f=64,G=q.encode_type_utf8,E=1;g.APP={NAME:"跨屏云办公",VERSION:"5.0.0.1",className:""};j.virworkCopy={name:"广州青云直上信息科技有限公司",tel:"400-626-1011"};j.loginCount=0;var F=function F(){var W=window.location.search;var V=window.location.search.split("?token=");if(!!!V||V.length!=2){return false}var O=V[1];if(!!!O||O==""){return false}var T=2;var S=q.Base64Decode(O,q.encode_type_utf8,T);var Q=S.split("#-#")[0];var U=S.split("#-#")[1];var R=128;var P={authToken:U,worknumber:"",username:Q,dataSource:"qyzs-db",availableDataSources:["qyzs-db"]};N.injectorToken(P);z(function(){var X=window.location.protocol+"//"+window.location.hostname+((window.location.port!="")?(":"+window.location.port):"")+((window.location.pathname=="/")?"":window.location.pathname);window.location.href=X},2000)};F();j.isIEBrowser=q.isIEBrowser();j.virworkWebModel=q.virworkWebModel;j.virworkAdminManageModel=q.virworkAdminManageModel;j.virworkDebugModel=q.debugModel;j.debugModel=q.debugModel;j.isWindowDesktopBrowserApp=!!!!q.isWindowDesktopApp();j.defaultLogoImageData=p.defaultLogoImageData;j.defaultLogoIconData=p.defaultLogoIconData;j.defaultImagesData={setting:p.defaultImagesData.setting,cloudstorage:p.defaultImagesData.cloudstorage};j.expectedCredentials=true;j.canUseManageFeature=false;j.systemFeatures={open_ssl_vpn:!!!q.virworkSuperVPNFeature,open_next_ssl_vpn:!!!!q.virworkSuperVPNFeature};g.$watch("expectedCredentials",function(O){if(O){j.canUseManageFeature=false}});j.userLoginedByThisBrowser=false;j.currentUsername=N.getCurrentUsername();g.userAvatar="/avatar/"+j.currentUsername+".png";j.loginLayoutState={showAuthcode:false,showWorknumber:false,showRemeberpasswd:false,showAutologin:false,showDownloadApp:true,showCustomerInfo:true};j.systemLicenseInformation={clientName:"测试版",cloudStorageUsers:"2",endTime:"2016年08月08日",license:"2",sandboxUsers:"2",sandboxVersion:"4.0.0.0",serialVersionUID:"VSC5A86",sslVpnUsers:"2",version:"4.0.0.0",webVersion:"4.0.0.1"};j.systemOtherInformations={android_version:"4.0.0.0",ios_version:"4.0.0.0",sandbox_version:"4.0.0.0",systemLicenseInformation:{},voice_token_android:"... ...",voice_token_ios:"... ...",online_machines:"0",offline_machines:"0",online_users:"0",use_licenses:"0",license:"0"};j.customerInfo={};j.systemInformations={};j.loginLayoutState={};j.currentUserAppPermissions={};g.loginClass="";j.loginFooterClass="";j.userinfo={username:"",nickname:"",worknumber:""};var D=function D(){J.i("get user basic information.");N.getUserBasicInformation().success(function O(Q){j.userinfo={username:"",nickname:"",worknumber:""};j.userinfo.username=Q.username;j.currentUsername=Q.username;if(!!!!Q.basicInformation&&Q.basicInformation.nickname){j.userinfo.nickname=Q.basicInformation.nickname}if(!!!!Q.basicInformation&&Q.basicInformation.identifier){j.userinfo.identifier=Q.basicInformation.identifier}if(!!!!Q.worknumber){j.userinfo.worknumber=Q.worknumber}}).error(function P(Q){})};var v=function v(){J.i("get user permissions process.");N.getUserPermissions().success(function(P){J.i("user permissions:{}.",P);j.currentUserPermissions=new h(P);j.createCloudStoragePermission=j.currentUserPermissions.clientCloudStorage;if(!j.currentUserPermissions.is_sysadm&&!j.currentUserPermissions.is_feature_sysadm_user){j.canUseManageFeature=false;g.logout();var O="当前用户为非管理员, 无法使用后台管理.";q.notify(O);alert(O)}else{g.loginClass="";j.loginFooterClass="";j.currentUsername=g.credential.username;j.expectedCredentials=false;j.getSystemInformations();D();$(".sidebar-menu").tree({});j.canUseManageFeature=true;s.reload()}}).error(function(O){})};j.getSystemInformations=function d(){C.getSystemLicenseInformations().success(function(P){J.i("system license informations:{}",JSON.stringify(P));j.systemLicenseInformation=P.systemLicenseInformation;j.systemOtherInformations=P;j.systemOtherInformations.online_applications=0;if(!!!!j.systemLicenseInformation){for(var O in g.systemLicenseInformation){j.systemOtherInformations[O]=j.systemLicenseInformation[O]}I.getOnlineUsers().success(function(Q){if(!!!!Q.success){var R=Q.parameters.online_users;j.systemOtherInformations.online_users=R.size()}}).error(function(Q){});c.getActiveConnections(null).success(function(Q){j.systemOtherInformations.online_applications=Q.length}).error(function(Q){})}}).error(function(O){});C.getSystemParameters().success(function(S){j.systemInformations=S;j.currentUserAppPermissions=new e(j.systemInformations);J.i("system informations.");for(var P in j.systemInformations){var R=j.systemInformations[P];if(P=="client-name"){j.customerInfo.name=R}if(P=="supportTel"){j.customerInfo.tel=R}if(P=="remember_account_login_feature_show"){j.loginLayoutState.showRemeberpasswd=q.valueIsTrue(R)}if(P=="auto_login_feature_show"){j.loginLayoutState.showAutologin=q.valueIsTrue(R)}if(P=="user_login_auth_code_feature_show"){j.loginLayoutState.showWorknumber=q.valueIsTrue(R)}if(P=="close_app_download_url_ui"){var Q=!!!!q.isPCApp();var O=!!!!q.mobile()&&(!!!!a.isIOSApp()||!!!!a.isAndroidApp());j.loginLayoutState.showDownloadApp=!q.valueIsTrue(R)&&!O&&!Q}if(P=="virwork_super_vpn_feature_switch"){j.systemFeatures.open_ssl_vpn=!q.valueIsTrue(R);j.systemFeatures.open_next_ssl_vpn=!!!!q.valueIsTrue(R)}}}).error(function(O){})};var l=function l(){N.checkUserLoginStatus().success(function(O){if(O.success){j.userLoginedByThisBrowser=true;if(j.expectedCredentials){j.expectedCredentials=false;v();q.notify()}}else{j.expectedCredentials=true;q.notify("还未登录, 请登录");w()}}).error(function(O){J.i("[ERROR]:login check user is login error");if(!!!!O&&(O.type=="PERMISSION_DENIED"||O.type=="OTHER-ADDRESS-LOGIN")){j.expectedCredentials=true;q.notify("还未登录, 请登录");w()}})};var u=30000;g.init=function L(){j.getSystemInformations();J.i("index init...");l();o(function(){if(!j.expectedCredentials){l()}},u)};g.loginErrorMessage="请登录，开始后台管理";g.credential={username:"",password:"",worknumber:"",securityCode:"",token:""};g.loginCookieState={remeberpasswd:false,autologin:false};g.login=function y(){J.i("login..."+g.credential.username);g.APP.NAME="VirWork跨屏办公后台管理系统";if(!!!g.credential.username||!!!g.credential.password){g.loginErrorMessage="请输入正确的用户名和密码.";J.i(g.loginErrorMessage);return false}else{var P=128;g.loginErrorMessage="";var Q=g.credential;var O={username:g.credential.username,password:q.getTokenByNumbers(P)+q.Base64Encode(g.credential.password,G,E)+q.getTokenByNumbers(P),worknumber:g.credential.worknumber,remeberpasswd:g.loginCookieState.remeberpasswd,autologin:g.loginCookieState.autologin};N.getTokens(Q).then(function S(T){J.i("login rsp:SUCCESS.");O.authToken=N.getCurrentToken();if(!!!j.loginLayoutState.showRemeberpasswd||!!!O.remeberpasswd){N.clearAccountSetting()}else{N.loginAccountSetting(O)}v()},function R(U){g.credential.passwd="";J.i("login rsp:登录失败:{}.",U);if(!!!U){g.loginErrorMessage="登录失败."}else{if(U.type=="service-connection-error"){g.loginErrorMessage="无法连接到服务器."}else{if(U.error_code=="INVALID_CREDENTIALS"||U.error_code=="INVALID_CREDENTIALS_WORKNUMBER"){g.loginErrorMessage=U.message;var T=U.parameters;if(!!!!T){for(var W in T){var Y=T[W];if(W=="remember_account_login_feature_show"){j.loginLayoutState.showRemeberpasswd=q.valueIsTrue(Y)}if(W=="auto_login_feature_show"){j.loginLayoutState.showAutologin=q.valueIsTrue(Y)}if(W=="user_login_auth_code_feature_show"){j.loginLayoutState.showWorknumber=q.valueIsTrue(Y)}if(W=="close_app_download_url_ui"){var X=!!!!q.isPCApp();var V=!!!!q.mobile()&&(!!!!a.isIOSApp()||!!!!a.isAndroidApp());j.loginLayoutState.showDownloadApp=!q.valueIsTrue(Y)&&!X&&!V}}}}else{g.loginErrorMessage="登录失败."}}}J.i(g.loginErrorMessage)})}};var w=function(){g.credential.username="";g.credential.password="";g.loginClass="login-page";j.loginFooterClass="position: fixed;bottom: 0px;width: 100%;margin-left: 0;";j.currentUsername="";g.APP.NAME="登 录"};g.logout=function n(){H.loginout();N.logout();w();j.expectedCredentials=true;j.canUseManageFeature=false};g.back2UserAppsPage=function i(){if(q.virworkWebModel){window.location.href="/online.html"}else{window.location.href="/"}};g.$on("$routeChangeSuccess",function(O,P,Q){q.htmlElement.removeClass(r[0].body,"modal-open");r[0].body.style.paddingRight="0px";$(".sidebar-menu").tree({})});var x=function x(){z(function(){var P=window.innerWidth-50;var O=window.innerHeight-50;if(P<780){P=780}if(O<460){O=460}try{$("#mainCloudIframe").css({height:O+"px",width:P+"px"})}catch(Q){}},1000)};window.addEventListener("orientationchange",function(O){x()},false);window.addEventListener("resize",function(O){x()});j.virworkBoxConnected=false;j.virworkBoxVPNConnected=false;g.init()}]);angular.module("index").config(["$httpProvider",function indexHttpPatchConfig(a){a.defaults.headers.patch={"Content-Type":"application/json"}}]);angular.module("index",["ngRoute","ui.router","ngCookies","ngFileUpload","ui.tree","home","machine","application","applicationSso","applicationProgram","department","role","users","rest","networkVpn","nextVpn","virWorkBox","download","personal","system","templates-main"]);angular.module("index").config(["$routeProvider","$locationProvider",function indexRouteConfig(b,a){a.html5Mode(false);b.when("/",{templateUrl:"admin-app/home/templates/home.html",controller:"homeController"}).when("/system-manage/manage-home",{templateUrl:"admin-app/home/templates/home.html",controller:"homeController"}).when("/system-manage/machine/view",{templateUrl:"admin-app/machine/templates/machine-view.html",controller:"machineViewController"}).when("/system-manage/machine/new",{templateUrl:"admin-app/machine/templates/machine-new.html",controller:"machineNewController"}).when("/system-manage/machine/manage/:id?",{templateUrl:"admin-app/machine/templates/machine-manage.html",controller:"machineManageController"}).when("/system-manage/router/servers/view",{templateUrl:"admin-app/network-vpn/templates/network-vpn-server-machine-view.html",controller:"networkVPNServerMachineViewController"}).when("/system-manage/router/view",{templateUrl:"admin-app/network-vpn/templates/network-vpn-router-view.html",controller:"networkVPNRoutersViewController"}).when("/system-manage/strategy/view",{templateUrl:"admin-app/network-vpn/templates/network-vpn-strategy-view.html",controller:"networkVPNStrategyViewController"}).when("/system-manage/router/roles/view",{templateUrl:"admin-app/network-vpn/templates/network-vpn-role-view.html",controller:"networkVPNRoleViewController"}).when("/system-manage/router/roles/users",{templateUrl:"admin-app/network-vpn/templates/network-user-vpn-role-view.html",controller:"networkUserVPNRoleViewController"}).when("/system-manage/network/subnet",{templateUrl:"admin-app/network-vpn/templates/network-vpn-subnet-view.html",controller:"networkVPNSubnetViewController"}).when("/system-manage/next-vpn/servers/view",{templateUrl:"admin-app/next-vpn/templates/next-vpn-view.html",controller:"nextVPNViewController"}).when("/system-manage/next-vpn/server/:id?",{templateUrl:"admin-app/next-vpn/templates/vpn-server-peer.html",controller:"vpnServerPeerController"}).when("/system-manage/application/view",{templateUrl:"admin-app/application/templates/application-view.html",controller:"applicationViewController"}).when("/system-manage/application-store/view",{templateUrl:"admin-app/application/templates/application-store-view.html",controller:"applicationStoreViewController"}).when("/system-manage/application-store/new",{templateUrl:"admin-app/application/templates/application-store-app-new.html",controller:"applicationStoreAppNewController"}).when("/system-manage/application/new",{templateUrl:"admin-app/application/templates/application-new.html",controller:"applicationNewController"}).when("/system-manage/application/manage/:id?",{templateUrl:"admin-app/application/templates/application-manage.html",controller:"applicationManageController"}).when("/system-manage/application/status/:id?",{templateUrl:"admin-app/application/templates/application-session-view.html",controller:"applicationSessionViewController"}).when("/system-manage/application-program/view",{templateUrl:"admin-app/application-program/templates/application-program-view.html",controller:"applicationProgramViewController"}).when("/system-manage/application-program/new",{templateUrl:"admin-app/application-program/templates/application-program-new.html",controller:"applicationProgramNewController"}).when("/system-manage/application-program/manage/:id?",{templateUrl:"admin-app/application-program/templates/application-program-manage.html",controller:"applicationProgramManageController"}).when("/system-manage/application-sso/view",{templateUrl:"admin-app/application-sso/templates/application-sso-view.html",controller:"applicationSsoViewController"}).when("/system-manage/application-sso/manage",{templateUrl:"admin-app/application-sso/templates/application-sso-manage.html",controller:"applicationSsoManageController"}).when("/system-manage/department/view",{templateUrl:"admin-app/department/templates/department-view.html",controller:"departmentViewController"}).when("/system-manage/department/new",{templateUrl:"admin-app/department/templates/department-new.html",controller:"departmentNewController"}).when("/system-manage/department/manage/:id?",{templateUrl:"admin-app/department/templates/department-manage.html",controller:"departmentManageController"}).when("/system-manage/role/view",{templateUrl:"admin-app/role/templates/role-view.html",controller:"roleViewController"}).when("/system-manage/role/new",{templateUrl:"admin-app/role/templates/role-new.html",controller:"roleNewController"}).when("/system-manage/role/manage/:id?",{templateUrl:"admin-app/role/templates/role-manage.html",controller:"roleManageController"}).when("/system-manage/users/view",{templateUrl:"admin-app/users/templates/users-view.html",controller:"usersViewController"}).when("/system-manage/users/view/ogz",{templateUrl:"admin-app/users/templates/users-ogz-view.html",controller:"usersOrgViewController"}).when("/system-manage/users/online",{templateUrl:"admin-app/users/templates/users-online-view.html",controller:"usersOnlineViewController"}).when("/system-manage/users/new",{templateUrl:"admin-app/users/templates/users-new.html",controller:"usersNewController"}).when("/system-manage/users/new/basic-input",{templateUrl:"admin-app/users/templates/users-new-basic-input.html",controller:"usersNewBasicInputController"}).when("/system-manage/users/new/worknumber-input",{templateUrl:"admin-app/users/templates/users-new-worknumber-input.html",controller:"usersNewWorknumberInputController"}).when("/system-manage/users/manage/:id?",{templateUrl:"admin-app/users/templates/users-manage.html",controller:"usersManageController"}).when("/system-manage/users/disable",{templateUrl:"admin-app/users/templates/users-undisabled.html",controller:"usersUndisabledController"}).when("/system-manage/users/ips/disable",{templateUrl:"admin-app/users/templates/users-undisabled-ips.html",controller:"usersUndisabledIPsController"}).when("/system-manage/servers/logger/view",{templateUrl:"admin-app/system/templates/system-terminal-command.html",controller:"systemTerminalCommandController"}).when("/system-manage/platform/logger/view",{templateUrl:"admin-app/system/templates/system-logger.html",controller:"systemLoggerController"}).when("/support",{templateUrl:"admin-app/system/templates/system-support.html",controller:"systemSupportController"}).when("/system-manage/tools/ssh",{templateUrl:"admin-app/system/templates/system-tools-ssh.html",controller:"systemToolsSshController"}).when("/system-manage/system/sandbox",{templateUrl:"admin-app/system/templates/system-sandbox.html",controller:"systemSandboxController"}).when("/system-manage/system/license",{templateUrl:"admin-app/system/templates/system-license.html",controller:"systemLicenseController"}).when("/system-manage/system/os-info",{templateUrl:"admin-app/system/templates/system-os-information.html",controller:"systemOSInformationController"}).when("/system-manage/system/sandbox/pc",{templateUrl:"admin-app/system/templates/system-sandbox-pc.html",controller:"systemSandboxPcController"}).when("/system-manage/system/application/watermark",{templateUrl:"admin-app/system/templates/system-auth-watermark.html",controller:"systemAuthWatermarkController"}).when("/system-manage/system/account/login",{templateUrl:"admin-app/system/templates/system-auth-login.html",controller:"systemAuthLoginController"}).when("/system-manage/system/ac_auth",{templateUrl:"admin-app/system/templates/system-auth-client-security.html",controller:"systemAuthClientSecurityController"}).when("/system-manage/system/sslvpn",{templateUrl:"admin-app/system/templates/system-auth-vpn.html",controller:"systemAuthVpnController"}).when("/system-manage/system/servers",{templateUrl:"admin-app/system/templates/system-servers.html",controller:"systemServerController"}).when("/system-manage/system/servers-network",{templateUrl:"admin-app/system/templates/system-servers-network.html",controller:"systemServerNetworkController"}).when("/system-manage/system/cloudstorage",{templateUrl:"admin-app/system/templates/system-cloudstorage.html",controller:"systemCloudstorageController"}).when("/system-manage/system/cloudstorage-view",{templateUrl:"admin-app/system/templates/virworkCloudstorageView.html",controller:"virworkCloudstorageViewController"}).when("/system-manage/system/website",{templateUrl:"admin-app/system/templates/system-website.html",controller:"systemWebsiteController"}).when("/system-manage/personal/info",{templateUrl:"admin-app/personal/templates/personal-info.html",controller:"personalInfoController"}).when("/virwork-box",{templateUrl:"admin-app/virworkbox/templates/index.html",controller:"virWorkBoxController"}).when("/virwork-box-browser",{templateUrl:"admin-app/virworkbox/templates/pc-app.html",controller:"virWorkBoxPCAppController"}).when("/virwork-box-pc-browser",{templateUrl:"admin-app/virworkbox/templates/pc-browser.html",controller:"virWorkBoxPCBrowserController"}).when("/virwork-box-update",{templateUrl:"admin-app/virworkbox/templates/update.html",controller:"virWorkBoxUpdateController"}).when("/download",{templateUrl:"admin-app/download/templates/download.html",controller:"downloadController"}).otherwise({templateUrl:"admin-app/home/templates/home.html",controller:"homeController"})}]);angular.module("index").directive("lenientDate",["$injector",function lenientDate(c){var d=c.get("$filter");var b={restrict:"A",require:"ngModel"};b.link=function a(g,f,e,j){j.$parsers=[function i(o){if(!o){return null}var l=/([0-9]*)(?:-([0-9]*)(?:-([0-9]*))?)?/.exec(o);if(!l){return null}var n=parseInt(l[1]||"0")||new Date().getFullYear();var p=parseInt(l[2]||"0")||1;var k=parseInt(l[3]||"0")||1;var m=new Date(Date.UTC(n,p-1,k));if(isNaN(m.getTime())){return null}return m}];j.$formatters=[function h(k){return k?d("date")(k,"yyyy-MM-dd","UTC"):""}]};return b}]);angular.module("index").directive("lenientTime",["$injector",function lenientTime(c){var d=c.get("$filter");var b={restrict:"A",require:"ngModel"};b.link=function a(g,f,e,j){j.$parsers=[function i(o){if(!o){return null}var m=/([0-9]*)(?::([0-9]*)(?::([0-9]*))?)?(?:\s*(a|p))?/.exec(o.toLowerCase());if(!m){return null}var k=parseInt(m[1]||"0");var p=parseInt(m[2]||"0");var l=parseInt(m[3]||"0");if(m[4]){if(k===12){k=0}if(m[4]==="p"){k+=12}}p+=l/60;l%=60;k+=p/60;p%=60;k%=24;var n=new Date(Date.UTC(1970,0,1,k,p,l));if(isNaN(n.getTime())){return null}return n}];j.$formatters=[function h(k){return k?d("date")(k,"HH:mm:ss","UTC"):""}]};return b}]);angular.module("rest").factory("LoggerLevel",["$injector",function defineLoggerEntryWrapper(b){var a={};a.debbug=false;a.log=false;a.info=false;a.warn=false;a.error=false;return a}]);angular.module("rest").factory("loggerService",["$injector",function loggerService(i){var g=i.get("$http");var c=i.get("$q");var a=i.get("LoggerLevel");var d={};var b=" ";var k=function k(){try{if(!!!!window.virwork_debug_model){a.debbug=true;a.log=true;a.info=true;a.warn=true;a.error=true}}catch(l){}};var f=function f(p){var r="";if(p.length>0){var q=p[0];var l=[];for(var n=1;n<p.length;n++){l.push(p[n])}if(q.indexOf("{}")>0){var o=q.split("{}");for(var n=0;n<o.length;n++){r+=o[n];if(n<l.length){r+=l[n]}if(n==o.length-1&&n<l.length){for(var m=n;m<l.length;m++){r+=l[m]}}}}else{for(var n=0;n<p.length;n++){r+=p[n];if(n<p.length-1){r+=b}}}}return r};function j(l){return(l>=10)?l:"0"+l}function e(){var v=new Date();var p=v.getTime();var u=v.getDate();var r=v.getMonth()+1;var t=v.getFullYear();var q=j(v.getHours());var n=j(v.getMinutes());var x=j(v.getSeconds());var l=q+":"+n+":"+x+".";var w=new Date();w.setFullYear(v.getFullYear());w.setMonth(v.getMonth());w.setDate(v.getDate());w.setHours(v.getHours());w.setMinutes(v.getMinutes());w.setSeconds(v.getSeconds());w.setMilliseconds(0);var o=p-w.getTime();l+=o;return l}var h=function h(){var l="["+new Date().getTime()+"]:";l="["+e()+"]:";return l};d.d=function(l){k();if(a.debug||a.log||a.info||a.warn||a.error){var m="";if(arguments.length>0){m=f(arguments)}console.debug(h()+m)}};d.l=function(l){k();if(a.log||a.info||a.warn||a.error){var m="";if(arguments.length>0){m=f(arguments)}console.log(h()+m)}};d.i=function(l){k();if(a.info||a.warn||a.error){var m="";if(arguments.length>0){m=f(arguments)}console.info(h()+m)}};d.w=function(l){k();if(a.warn||a.error){var m="";if(arguments.length>0){m=f(arguments)}console.warn(h()+m)}};d.e=function(l){k();if(a.error){var m="";if(arguments.length>0){m=f(arguments)}console.error(h()+m)}};return d}]);angular.module("home").controller("machineManageController",["$scope","$injector","$interval","$timeout",function machineManageController(s,w,v,z){var y=w.get("$q");var o=w.get("$route");var C=w.get("$http");var h=w.get("$routeParams");var A=w.get("$document");var p=w.get("$window");var j=w.get("$location");var B=w.get("$cookieStore");var m=w.get("$rootScope");var u=w.get("loggerService");var i=w.get("utilService");var D=w.get("userService");var x=w.get("machineService");var d=w.get("systemService");s.back=function r(){j.url("/system-manage/machine/view")};var c=h.id;s.machine={};s.message="";var g=false;var n=function n(){u.i("get machine information:"+c);if(g){return false}g=true;x.getMachine(c).success(function E(H){s.machine=H;angular.forEach(s.machine.parameters,function G(I){e(I.name,I.value)});g=false}).error(function F(G){g=false})};var b=false;s.saveMachine=function f(){if(!!!c){return false}if(!!!s.machine){return false}if(b){return false}s.machine.parameters=[];for(var F in s.connectionParameters){var H=s.connectionParameters[F];s.machine.parameters.push({identifier:s.machine.identifier,name:F,value:H.value})}b=true;x.saveMachine(s.machine).success(function E(I){s.message="保存成功.";$("#modal-default").modal("show");z(function(){s.back()},3000);b=false}).error(function G(I){s.message="保存失败.";$("#modal-default").modal("show");b=false})};var l=false;s.deleteMachine=function t(){$("#modal-default").modal("hide");$("#modal-delete-machine").modal("hide");if(!!!c){return false}if(!!!s.machine){return false}if(l){return false}l=true;x.deleteMachine(s.machine).success(function E(G){s.message="删除成功.";$("#modal-default").modal("show");z(function(){s.back()},3000);l=false}).error(function F(G){s.message="删除失败.";$("#modal-default").modal("show");l=false})};s.hiddenModelWindow=function k(){$("#modal-default").modal("hide");s.back()};s.connectionParameters={};var e=function e(E,F){s.connectionParameters[E]={identifier:c,name:E,value:F}};e("record_path","");s.system_client_screen_record_setting=false;var a=false;var q=function q(){if(a){return false}d.getParameters().success(function E(F){if(!!!!F){var G=F.client_screen_record_setting;if(!!!!G&&G=="true"){s.system_client_screen_record_setting=true}else{s.system_client_screen_record_setting=false}}a=false}).error(function(F){a=false})};q();if(!!!!c){n()}else{s.back()}}]);angular.module("machine",[]);angular.module("home").controller("machineNewController",["$scope","$injector","$interval","$timeout",function machineNewController(o,r,q,u){var t=r.get("$q");var k=r.get("$route");var x=r.get("$http");var g=r.get("$routeParams");var v=r.get("$document");var l=r.get("$window");var i=r.get("$location");var w=r.get("$cookieStore");var j=r.get("$rootScope");var p=r.get("loggerService");var h=r.get("utilService");var y=r.get("userService");var s=r.get("machineService");var d=r.get("systemService");o.back=function n(){i.url("/machine/view")};var c=g.id;o.machine={identifier:"",name:"",hostname:"",port:"",connections:"",};o.message="";o.system_client_screen_record_setting=false;o.connectionParameters={};o.back=function n(){i.url("/system-manage/machine/view")};var f=function f(z,A){o.connectionParameters[z]={identifier:c,name:z,value:A}};f("record_path","");var b=false;o.saveMachine=function e(){if(b){b=false}if(!!!o.machine.name){o.message="请输入应用主机名称";$("#modal-default").modal("show")}else{if(!!!o.machine.hostname){o.message="请输入应用主机地址";$("#modal-default").modal("show")}else{if(!!!o.machine.port){o.message="请输入应用主机端口";$("#modal-default").modal("show")}else{if(!!!o.machine.connections){o.message="请输入应用主机连接数";$("#modal-default").modal("show")}else{o.machine.parameters=[];for(var A in o.connectionParameters){var C=o.connectionParameters[A];o.machine.parameters.push({identifier:o.machine.identifier,name:A,value:C.value})}b=true;s.createMachine(o.machine).success(function B(){o.message="保存成功!";$("#modal-default").modal("show");u(function(){o.back()},3000);b=false}).error(function z(D){o.message="保存失败!";$("#modal-default").modal("show");b=false})}}}}};var a=false;var m=function m(){if(a){return false}a=true;d.getParameters().success(function z(A){if(!!!!A){var B=A.client_screen_record_setting;if(!!!!B&&B=="true"){o.system_client_screen_record_setting=true}else{o.system_client_screen_record_setting=false}}a=false}).error(function(A){a=false})};m()}]);angular.module("rest").factory("machineService",["$injector",function machineService(l){var j=l.get("$http");var i=l.get("$q");var k=l.get("$rootScope");var n=l.get("$cookieStore");var b=l.get("userService");var e=l.get("utilService");var o=l.get("loggerService");var h={};h.getMachines=function c(){var p={token:b.getCurrentToken()};return j({method:"GET",url:e.tomcat_request_host+"/api/data/"+encodeURIComponent(b.getDataSource())+"/machines",params:p})};h.getRealtimeMachineStatus=function g(){var p={token:b.getCurrentToken()};return j({method:"GET",url:e.tomcat_request_host+"/api/data/"+encodeURIComponent(b.getDataSource())+"/machines/realtime-status",params:p})};h.getMachine=function a(q){var p={token:b.getCurrentToken()};return j({method:"GET",url:e.tomcat_request_host+"/api/data/"+encodeURIComponent(b.getDataSource())+"/machines/"+q,params:p})};h.saveMachine=function f(q){var p={token:b.getCurrentToken()};return j({method:"POST",url:e.tomcat_request_host+"/api/data/"+encodeURIComponent(b.getDataSource())+"/machines/"+encodeURIComponent(q.identifier),params:p,data:q})};h.deleteMachine=function m(q){var p={token:b.getCurrentToken()};return j({method:"DELETE",url:e.tomcat_request_host+"/api/data/"+encodeURIComponent(b.getDataSource())+"/machines/"+encodeURIComponent(q.identifier),params:p})};h.createMachine=function d(q){var p={token:b.getCurrentToken()};return j({method:"POST",url:e.tomcat_request_host+"/api/data/"+encodeURIComponent(b.getDataSource())+"/machines",params:p,data:q})};return h}]);angular.module("home").controller("machineViewController",["$scope","$injector","$interval","$timeout",function machineViewController(o,s,r,v){var u=s.get("$q");var m=s.get("$route");var y=s.get("$http");var d=s.get("$routeParams");var w=s.get("$document");var n=s.get("$window");var g=s.get("$location");var x=s.get("$cookieStore");var j=s.get("$rootScope");var q=s.get("loggerService");var e=s.get("utilService");var z=s.get("userService");var t=s.get("machineService");o.sysMachines=[];o.machines=[];o.search_conditions=null;var c=["name","hostname","port","actives","status","description"];o.$watch("search_conditions",function(A){if(!!!A&&A!=""){}else{o.machines=e.seach_condition_objs(o.sysMachines,o.search_conditions,c)}});var k=false;var f=function f(){if(k){return false}k=true;o.sysMachines=[];t.getMachines().success(function B(C){angular.forEach(C,function(D){if(D.alive){D.status="在线"}else{D.status="离线 脱机"}o.sysMachines.push(D)});o.machines=e.seach_condition_objs(o.sysMachines,o.search_conditions,c);j.getSystemInformations();k=false}).error(function A(C){k=false})};var h=function h(){q.i("loading machine informations...");f();j.getSystemInformations()};o.currentMachine=null;o.setDeleteMachine=function i(A){o.currentMachine=A};var b=false;o.getRealtimeMachineStatus=function l(){if(b){return false}b=true;t.getRealtimeMachineStatus().success(function B(C){o.machines=C;b=false}).error(function A(C){b=false})};o.message={title:"提示",text:""};var a=false;o.deleteMachine=function p(){if(!!!!o.currentMachine){if(a){return false}a=true;t.deleteMachine(o.currentMachine).success(function A(C){o.message.text="删除成功";$("#modal-alert-message").modal("show");f();j.getSystemInformations();a=false}).error(function B(C){o.message.text="删除失败";$("#modal-alert-message").modal("show");a=false})}};h()}]);angular.module("index").directive("manageHomeLoginPage",[function(){return{restrict:"E",replace:true,templateUrl:"admin-app/index/templates/manage-home-login-page.html",controller:["$scope","$injector","$timeout","$interval",function a(b,d,c,e){$rootScope=d.get("$rootScope");$("input").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"})}]}}]);angular.module("index").directive("manageHomePage",[function(){return{restrict:"E",replace:true,templateUrl:"admin-app/index/templates/manage-home-page.html",controller:["$scope","$injector","$timeout","$interval",function a(b,d,c,e){$rootScope=d.get("$rootScope");$(".sidebar-menu").tree({})}]}}]);angular.module("rest").factory("mobileAppService",["$injector",function mobileAppService(n){var s=n.get("$http");var p=n.get("$q");var l=n.get("loggerService");var e=n.get("utilService");var f=n.get("$rootScope");var t={};t.initApp=function u(){if(!e.mobile()){return false}l.i("init mobile app, will app response mobile platform type(android or ios).")};t.updateMobileApp=function(x){if(e.isAndroid()){t.updateAndroidAPP(x)}else{if(e.isIOS()){t.updateIOSAPP(x)}}};t.updateAndroidAPP=function h(x){if(!!!x){return false}var y=x.android_version;var A=x.android_app_download_url;if(!!!y){y="4.0.1.0"}y="4.0.1.0";try{if(!!!!AndroidVvWork.checkUpdateApp){l.i("check client update.downloadURL={}，lastVersion={}",A,y);AndroidVvWork.checkUpdateApp(y,A)}else{l.i("show client update message.")}}catch(z){l.i("update android app is error. beacause AndroidVvWork.checkUpdateApp is nil.")}};t.updateIOSAPP=function q(x){if(!!!x){return false}var z=x.ios_version;var B=x.ios_app_download_url;if(!!!z){z="4.0.1.0"}z="4.0.1.0";if(!!!B){B=e.app_download_url.ios}try{var y="";if(!!!!B){B=B.toLowerCase();if(B.indexOf("https://")==0){B=B.split("https:")[1]}else{if(B.indexOf("http://")==0){B=B.split("http:")[1]}}}y+="#-#"+z;y+="#-#"+B;y+="#-#"+new Date().getTime();l.i("update last ios app.");window.webkit.messageHandlers.NativeApp.postMessage("Update2LastApp"+y)}catch(A){l.i("update ios app error")}};t.startVoice=function r(){l.i("start voice action....");if(!!!!t.isAndroidApp()){AndroidVvWork.startVoice()}else{if(!!!!t.isIOSApp()){try{l.i("web req start voice");window.webkit.messageHandlers.NativeApp.postMessage("StartVoice#-#"+new Date().getTime())}catch(x){l.i("start voice error.")}}}};t.stopVoice=function a(){l.i("stop voice action....");if(!!!!t.isAndroidApp()){AndroidVvWork.stopVoice();AndroidVvWork.clearVoice2TextMessage()}else{if(!!!!t.isIOSApp()){try{window.webkit.messageHandlers.NativeApp.postMessage("StopVoice#-#"+new Date().getTime())}catch(x){l.i("stop voice error.")}}}};t.cancelVoice=function b(){l.i("stop voice action....");if(!!!!t.isAndroidApp()){AndroidVvWork.cancelVoice();AndroidVvWork.clearVoice2TextMessage()}else{if(!!!!t.isIOSApp()){try{window.webkit.messageHandlers.NativeApp.postMessage("StopVoice#-#"+new Date().getTime())}catch(x){l.i("stop voice error.")}}}};t.getVoice2TextMonitor=null;t.androidCommonTools={startRecord:function(){l.i("android->client:startRecord. do show voice recording view.")},toggleKeyboard:function(){l.i("android->client:toggleKeyboard.")},sendVoiceMsg:function(x){l.i("android->client:sendVoiceMsg.")},notResultRecord:function(){l.i("android->client:notResultRecord.")},editVoice2Text:function(){l.i("android->client:editVoice2Text.")},errorVoice2Text:function(){l.i("android->client:errorVoice2Text.")},finishedVoice2Text:function(){l.i("android->client:finishedVoice2Text.");window.clearTimeout(t.getVoice2TextMonitor);t.getVoice2TextMonitor=null;t.getVoice2TextMonitor=window.setTimeout(function(){AndroidVvWork.getVoice2TextMessage()},3000)}};t.setMobileAppVoicePermission=function j(z){if(!!!z){return false}var x=z["voice-id-android"];var C=z["voice-id-ios"];var B=z["serial-uid"];if(!!!!x&&!!!!B){try{l.i("set android voice permission.");AndroidVvWork.setVoicePermissionId(x,B)}catch(A){l.i("set android voice permission error, will not method.")}}if(!!!!C&&!!!!B){try{var y="";y+=C;y+="#-#";y+=B;l.i("set ios voice permission.");window.webkit.messageHandlers.NativeApp.postMessage("SetVoicePermission#-#"+y)}catch(A){l.i("set ios voice permission error.")}}};t.commonTools={};t.callInitIOSApp=function v(){if(!!!e.mobile()){return false}try{l.i("ios platform call init ios platform.");window.webkit.messageHandlers.NativeApp.postMessage("InitIOSApp#-#"+new Date().getTime())}catch(x){}};t.client2androidShowKeyboard=function o(){var x=document.getElementById("android-platform");if(!!!!x){AndroidVvWork.showKeyboard()}};t.client2androidHideKeyboard=function w(){var x=document.getElementById("android-platform");if(!!!!x){AndroidVvWork.hideKeyboard()}};t.isAndroidApp=function d(){var x=document.getElementById("android-platform");return !!!!x};t.isIOSApp=function c(){var y=document.getElementById("ios-platform");var x=false;try{x=!!!!window.webkit.messageHandlers.NativeApp.postMessage}catch(z){}return !!!!y||x};t.getIOSIMEHeight=function i(){try{var x=window.webkit.messageHandlers.NativeApp.postMessage("IMEHeight#-#"+new Date().getTime());return x}catch(y){}return false};t.isWechatBrowser=function g(){var x=window.navigator.userAgent.toLowerCase();if(x.match(/MicroMessenger/i)=="micromessenger"){return true}else{return false}};t.android2html=function m(){var x=document.getElementById("android-platform");if(!!!x||undefined==x){x=document.createElement("span");x.id="android-platform";x.style.display="none";x.style.visibility="hidden";document.body.appendChild(x)}};t.ios2html=function k(){var z=document.getElementById("ios-platform");if(!!!z||undefined==z){z=document.createElement("span");z.id="ios-platform";z.style.display="none";z.style.visibility="hidden";document.body.appendChild(z);l.i("ios platform.............")}var y=arguments;if(y.length>0){var x=y[0];l.i("ios platform voice init.............");if(x=="ios_voice"){f.open_iosvoice_feature=true;l.i("ios platform voice opened.............")}else{if(x=="ios_ime_keyboard_change"){f.open_ioskeyboard_change_feature=true;l.i("ios platform keyboard change.............")}}}};t.initApp();return t}]);angular.module("index").directive("modalAlertMessage",[function(){return{restrict:"E",replace:true,templateUrl:"admin-app/index/templates/modal-alert-message.html",controller:["$scope","$injector","$timeout","$interval",function a(b,d,c,e){$rootScope=d.get("$rootScope")}]}}]);angular.module("networkVpn").controller("networkUserVPNRoleViewController",["$scope","$injector","$interval","$timeout",function networkUserVPNRoleViewController(o,s,q,u){var t=s.get("$q");var j=s.get("$route");var x=s.get("$http");var c=s.get("$routeParams");var v=s.get("$document");var k=s.get("$window");var h=s.get("$location");var w=s.get("$cookieStore");var i=s.get("$rootScope");var p=s.get("loggerService");var g=s.get("utilService");var z=s.get("userService");var b=s.get("usersService");var n=s.get("roleService");var a=s.get("networkVPNService");o.message="";o.userVPNRouterRolePermission={userRoleIdentifier:"",routerRoleIdentifier:""};o.roles=[];var y=function y(){n.getRoles().success(function B(C){angular.forEach(C,function(D){o.roles.push(D)})}).error(function A(C){})};o.router_roles=[];var e=function f(){a.getVPNGatewayRoles().success(function A(C){o.router_roles=C.roles;d()}).error(function B(C){})};o.saveUserRouterRole=function r(){if(!!!o.userVPNRouterRolePermission.userRoleIdentifier){o.message="请选择用户账户角色";$("#modal-default").modal("show");return false}if(!!!o.userVPNRouterRolePermission.routerRoleIdentifier){o.message="请选择VPN路由角色";$("#modal-default").modal("show");return false}b.updateUserVPNRouterRole(o.userVPNRouterRolePermission.userRoleIdentifier,o.userVPNRouterRolePermission.routerRoleIdentifier).success(function(A){if(A.success){o.message="保存成功"}else{o.message="保存失败"}$("#modal-default").modal("show")}).error(function(A){o.message="保存失败:"+A.message})};o.user_router_role="";var l="";var d=function d(){a.getUserVPNGatewayRoles(i.currentUsername).success(function(B){var A=B.roles;if(!!!!A&&A.length>0){var C=A[0];o.user_router_role=C.identifier;l=C.identifier}}).error(function(A){})};o.updateVPNRole=function m(){if(!i.expectedCredentials&&!!!!i.currentUsername){b.updateUserVPNGateway(i.currentUsername,o.user_router_role).success(function(A){o.user_old_router_role=o.user_router_role;o.message="保存成功";$("#modal-default").modal("show")}).error(function(A){o.message="保存失败";$("#modal-default").modal("show")})}};if(!i.expectedCredentials&&i.canUseManageFeature){y();e()}}]);angular.module("networkVpn").controller("networkUserVPNRoleViewController",["$scope","$injector","$interval","$timeout",function networkUserVPNRoleViewController(q,u,s,y){var v=u.get("$q");var j=u.get("$route");var C=u.get("$http");var c=u.get("$routeParams");var z=u.get("$document");var l=u.get("$window");var h=u.get("$location");var B=u.get("$cookieStore");var i=u.get("$rootScope");var r=u.get("loggerService");var g=u.get("utilService");var E=u.get("userService");var b=u.get("usersService");var p=u.get("roleService");var a=u.get("networkVPNService");q.message="";q.userVPNRouterRolePermission={userRoleIdentifier:"",routerRoleIdentifier:""};q.roles=[];var n=false;var D=function D(){if(n){return false}n=true;p.getRoles().success(function G(H){angular.forEach(H,function(I){q.roles.push(I)});n=false}).error(function F(H){n=false})};q.router_roles=[];var k=false;var e=function f(){if(k){return false}k=true;a.getVPNGatewayRoles().success(function F(H){q.router_roles=H.roles;d();k=false}).error(function G(H){k=false})};var x=false;q.saveUserRouterRole=function t(){if(!!!q.userVPNRouterRolePermission.userRoleIdentifier){q.message="请选择用户账户角色";$("#modal-default").modal("show");return false}if(!!!q.userVPNRouterRolePermission.routerRoleIdentifier){q.message="请选择VPN路由角色";$("#modal-default").modal("show");return false}if(x){return false}x=true;b.updateUserVPNRouterRole(q.userVPNRouterRolePermission.userRoleIdentifier,q.userVPNRouterRolePermission.routerRoleIdentifier).success(function(F){if(F.success){q.message="保存成功"}else{q.message="保存失败"}$("#modal-default").modal("show");x=false}).error(function(F){q.message="保存失败:"+F.message;x=false})};q.user_router_role="";var m="";var A=false;var d=function d(){if(A){return false}A=true;a.getUserVPNGatewayRoles(i.currentUsername).success(function(G){var F=G.roles;if(!!!!F&&F.length>0){var H=F[0];q.user_router_role=H.identifier;m=H.identifier}A=false}).error(function(F){A=false})};var w=false;q.updateVPNRole=function o(){if(!i.expectedCredentials&&!!!!i.currentUsername){if(w){return false}w=true;b.updateUserVPNGateway(i.currentUsername,q.user_router_role).success(function(F){q.user_old_router_role=q.user_router_role;q.message="保存成功";$("#modal-default").modal("show");w=false}).error(function(F){q.message="保存失败";$("#modal-default").modal("show");w=false})}};if(!i.expectedCredentials&&i.canUseManageFeature){D();e()}}]);angular.module("networkVpn",[]);angular.module("networkVpn").controller("networkVPNRoleViewController",["$scope","$injector","$interval","$timeout",function networkVPNRoleViewController(q,u,t,y){var x=u.get("$q");var m=u.get("$route");var B=u.get("$http");var d=u.get("$routeParams");var z=u.get("$document");var n=u.get("$window");var f=u.get("$location");var A=u.get("$cookieStore");var i=u.get("$rootScope");var s=u.get("loggerService");var e=u.get("utilService");var C=u.get("userService");var c=u.get("networkVPNService");q.sysVPNRouterRoles=[];q.showEditVPNRouterRole=false;q.message="";var v=function v(){q.selectedAllRoleRouterGateways=null;q.selectedAllRoleRouterStrategys=null;q.sysVPNRouterRoles=[];q.cancelSaveVPNRouterRole();c.getVPNGatewayRoles().success(function E(G){if(!!!!G.result){var F=G.roles;angular.forEach(F,function(H){q.sysVPNRouterRoles.push(H)})}}).error(function D(F){})};q.routerGateways=[];q.roleRouterGateways=[];var b=function b(){q.routerGateways=[];c.getVPNGateways().success(function E(F){if(!!!!F.result){var G=F.gateways;angular.forEach(G,function(H){H.edit=false;q.routerGateways.push(H)})}}).error(function D(F){})};q.routerStrategys=[];q.roleRouterStrategys=[];var p=function p(){q.routerStrategys=[];c.getVPNRouteStrategys().success(function D(G){if(!!!!G.success){var F=G.parameters.strategys;angular.forEach(F,function(H){q.routerStrategys.push(H)})}}).error(function E(F){})};var g=function g(){s.i("loading vpn router role informations...");v();p();b()};q.vpnRouterRole=null;q.editVPNRouterRole=function w(F){q.showEditVPNRouterRole=true;q.vpnRouterRole={edit:F.edit,gateways:F.gateways,identifier:F.identifier,name:F.name,strategys:F.strategys,vpn_connected_type:F.vpn_connected_type};q.vpnRouterRole.strategys=[];c.getVPNRouteStrategysByRouteRoleIdentifier(q.vpnRouterRole.identifier).success(function E(H){if(!!!!H.success){var G=H.parameters.strategys;angular.forEach(G,function(I){q.vpnRouterRole.strategys.push(I)})}r();o()}).error(function D(G){r();o()})};var r=function r(){q.roleRouterGateways=[];var D={};if(!!!!q.vpnRouterRole.gateways){angular.forEach(q.vpnRouterRole.gateways,function(E){D[""+E.identifier]=true})}angular.forEach(q.routerGateways,function(F){var E={edit:F.edit,identifier:F.identifier,ip_address:F.ip_address,maskcode:F.maskcode,gateway:F.gateway,metric:F.metric,vpn_connected_type:F.vpn_connected_type,selected:false};if(!!!!D[""+F.identifier]){E.selected=true}q.roleRouterGateways.push(E)})};var o=function o(){q.roleRouterStrategys=[];var D={};if(!!!!q.vpnRouterRole.strategys){angular.forEach(q.vpnRouterRole.strategys,function(E){D[""+E.identifier]=true})}angular.forEach(q.routerStrategys,function(E){var F={identifier:E.identifier,command_name:E.command_name,command_value:E.command_value,selected:false};if(!!!!D[""+E.identifier]){F.selected=true}q.roleRouterStrategys.push(F)})};q.selectedAllRoleRouterGateways=null;q.selectedAllRoleRouterStrategys=null;q.$watch("selectedAllRoleRouterGateways",function(D){if(D!=null){var E=q.roleRouterGateways;q.roleRouterGateways=[];angular.forEach(E,function(G){var F={edit:G.edit,identifier:G.identifier,ip_address:G.ip_address,maskcode:G.maskcode,gateway:G.gateway,metric:G.metric,vpn_connected_type:G.vpn_connected_type,selected:false};if(D){F.selected=true}q.roleRouterGateways.push(F)})}});q.$watch("selectedAllRoleRouterStrategys",function(E){if(E!=null){var D=q.roleRouterStrategys;q.roleRouterStrategys=[];angular.forEach(D,function(F){var G={identifier:F.identifier,command_name:F.command_name,command_value:F.command_value,selected:false};if(E){G.selected=true}q.roleRouterStrategys.push(G)})}});q.setDeleteVPNRouterRole=function l(D){q.vpnRouterRole=D};q.addNewVPNRole=function a(){q.showEditVPNRouterRole=true;q.vpnRouterRole={edit:false,gateways:[],identifier:"",name:"",strategys:[],vpn_connected_type:"1"};r();o()};q.saveRouterRole=function h(){if(!!!q.vpnRouterRole.name){q.message="请输入VPN路由角色名称";$("#modal-default").modal("show");return false}q.vpnRouterRole.gateways=[];q.vpnRouterRole.strategys=[];angular.forEach(q.roleRouterGateways,function(F){if(F.vpn_connected_type==q.vpnRouterRole.vpn_connected_type){if(F.selected){var G={edit:F.edit,identifier:F.identifier,ip_address:F.ip_address,maskcode:F.maskcode,gateway:F.gateway,metric:F.metric,vpn_connected_type:F.vpn_connected_type};q.vpnRouterRole.gateways.push(G)}}});angular.forEach(q.roleRouterStrategys,function(G){if(G.selected){var F={identifier:G.identifier,command_name:G.command_name,command_value:G.command_value};q.vpnRouterRole.strategys.push(F)}});if(!!!q.vpnRouterRole.identifier||q.vpnRouterRole.identifier==""){c.saveVPNGatewayRole(q.vpnRouterRole).success(function E(){v();q.message="保存VPN路由角色成功!";$("#modal-default").modal("show")}).error(function D(F){q.message="保存VPN路由角色失败!"+F.message;$("#modal-default").modal("show")})}else{c.updateVPNGatewayRole(q.vpnRouterRole).success(function E(){v();q.message="保存VPN路由角色成功!";$("#modal-default").modal("show")}).error(function D(F){q.message="保存VPN路由角色失败!"+F.message;$("#modal-default").modal("show")})}};q.cancelSaveVPNRouterRole=function j(){q.showEditVPNRouterRole=false;q.vpnRouterRole=null};q.deleteVPNRouterRoles=function k(D){c.deleteVPNGatewayRole(D).success(function F(){v();q.message="删除VPN路由角色成功!";$("#modal-default").modal("show")}).error(function E(G){q.message="删除VPN路由角色失败!"+G.message;$("#modal-default").modal("show")})};g()}]);angular.module("networkVpn").controller("networkVPNRoleViewController",["$scope","$injector","$interval","$timeout",function networkVPNRoleViewController(w,A,z,E){var D=A.get("$q");var p=A.get("$route");var H=A.get("$http");var d=A.get("$routeParams");var F=A.get("$document");var q=A.get("$window");var h=A.get("$location");var G=A.get("$cookieStore");var k=A.get("$rootScope");var y=A.get("loggerService");var g=A.get("utilService");var I=A.get("userService");var c=A.get("networkVPNService");w.sysVPNRouterRoles=[];w.showEditVPNRouterRole=false;w.message="";var t=false;var B=function B(){w.selectedAllRoleRouterGateways=null;w.selectedAllRoleRouterStrategys=null;w.sysVPNRouterRoles=[];w.cancelSaveVPNRouterRole();if(t){return false}t=true;c.getVPNGatewayRoles().success(function K(M){if(!!!!M.result){var L=M.roles;angular.forEach(L,function(N){w.sysVPNRouterRoles.push(N)})}t=false}).error(function J(L){t=false})};w.routerGateways=[];w.roleRouterGateways=[];var v=false;var b=function b(){w.routerGateways=[];if(v){return false}v=true;c.getVPNGateways().success(function K(L){if(!!!!L.result){var M=L.gateways;angular.forEach(M,function(N){N.edit=false;w.routerGateways.push(N)})}v=false}).error(function J(L){v=false})};w.routerStrategys=[];w.roleRouterStrategys=[];var f=false;var s=function s(){w.routerStrategys=[];if(f){return false}f=true;c.getVPNRouteStrategys().success(function J(M){if(!!!!M.success){var L=M.parameters.strategys;angular.forEach(L,function(N){w.routerStrategys.push(N)})}f=false}).error(function K(L){f=false})};var i=function i(){y.i("loading vpn router role informations...");B();s();b()};w.vpnRouterRole=null;var e=false;w.editVPNRouterRole=function C(L){w.showEditVPNRouterRole=true;w.vpnRouterRole={edit:L.edit,gateways:L.gateways,identifier:L.identifier,name:L.name,strategys:L.strategys,vpn_connected_type:L.vpn_connected_type};w.vpnRouterRole.strategys=[];if(e){return false}e=true;c.getVPNRouteStrategysByRouteRoleIdentifier(w.vpnRouterRole.identifier).success(function K(N){if(!!!!N.success){var M=N.parameters.strategys;angular.forEach(M,function(O){w.vpnRouterRole.strategys.push(O)})}x();r();e=false}).error(function J(M){x();r();e=false})};var x=function x(){w.roleRouterGateways=[];var J={};if(!!!!w.vpnRouterRole.gateways){angular.forEach(w.vpnRouterRole.gateways,function(K){J[""+K.identifier]=true})}angular.forEach(w.routerGateways,function(L){var K={edit:L.edit,identifier:L.identifier,ip_address:L.ip_address,maskcode:L.maskcode,gateway:L.gateway,metric:L.metric,vpn_connected_type:L.vpn_connected_type,selected:false};if(!!!!J[""+L.identifier]){K.selected=true}w.roleRouterGateways.push(K)})};var r=function r(){w.roleRouterStrategys=[];var J={};if(!!!!w.vpnRouterRole.strategys){angular.forEach(w.vpnRouterRole.strategys,function(K){J[""+K.identifier]=true})}angular.forEach(w.routerStrategys,function(K){var L={identifier:K.identifier,command_name:K.command_name,command_value:K.command_value,selected:false};if(!!!!J[""+K.identifier]){L.selected=true}w.roleRouterStrategys.push(L)})};w.selectedAllRoleRouterGateways=null;w.selectedAllRoleRouterStrategys=null;w.$watch("selectedAllRoleRouterGateways",function(J){if(J!=null){var K=w.roleRouterGateways;w.roleRouterGateways=[];angular.forEach(K,function(M){var L={edit:M.edit,identifier:M.identifier,ip_address:M.ip_address,maskcode:M.maskcode,gateway:M.gateway,metric:M.metric,vpn_connected_type:M.vpn_connected_type,selected:false};if(J){L.selected=true}w.roleRouterGateways.push(L)})}});w.$watch("selectedAllRoleRouterStrategys",function(K){if(K!=null){var J=w.roleRouterStrategys;w.roleRouterStrategys=[];angular.forEach(J,function(L){var M={identifier:L.identifier,command_name:L.command_name,command_value:L.command_value,selected:false};if(K){M.selected=true}w.roleRouterStrategys.push(M)})}});w.setDeleteVPNRouterRole=function o(J){w.vpnRouterRole=J};w.addNewVPNRole=function a(){w.showEditVPNRouterRole=true;w.vpnRouterRole={edit:false,gateways:[],identifier:"",name:"",strategys:[],vpn_connected_type:"1"};x();r()};var u=false;w.saveRouterRole=function j(){if(!!!w.vpnRouterRole.name){w.message="请输入VPN路由角色名称";$("#modal-default").modal("show");return false}w.vpnRouterRole.gateways=[];w.vpnRouterRole.strategys=[];angular.forEach(w.roleRouterGateways,function(L){if(L.vpn_connected_type==w.vpnRouterRole.vpn_connected_type){if(L.selected){var M={edit:L.edit,identifier:L.identifier,ip_address:L.ip_address,maskcode:L.maskcode,gateway:L.gateway,metric:L.metric,vpn_connected_type:L.vpn_connected_type};w.vpnRouterRole.gateways.push(M)}}});angular.forEach(w.roleRouterStrategys,function(M){if(M.selected){var L={identifier:M.identifier,command_name:M.command_name,command_value:M.command_value};w.vpnRouterRole.strategys.push(L)}});if(u){return false}u=true;if(!!!w.vpnRouterRole.identifier||w.vpnRouterRole.identifier==""){c.saveVPNGatewayRole(w.vpnRouterRole).success(function K(){B();w.message="保存VPN路由角色成功!";$("#modal-default").modal("show");u=false}).error(function J(L){w.message="保存VPN路由角色失败!"+L.message;$("#modal-default").modal("show");u=false})}else{c.updateVPNGatewayRole(w.vpnRouterRole).success(function K(){B();w.message="保存VPN路由角色成功!";$("#modal-default").modal("show");u=false}).error(function J(L){w.message="保存VPN路由角色失败!"+L.message;$("#modal-default").modal("show");u=false})}};w.cancelSaveVPNRouterRole=function m(){w.showEditVPNRouterRole=false;w.vpnRouterRole=null};var l=false;w.deleteVPNRouterRoles=function n(J){if(l){return false}l=true;c.deleteVPNGatewayRole(J).success(function L(){B();w.message="删除VPN路由角色成功!";$("#modal-default").modal("show");l=false}).error(function K(M){w.message="删除VPN路由角色失败!"+M.message;$("#modal-default").modal("show");l=false})};i()}]);angular.module("networkVpn").controller("networkVPNRoutersViewController",["$scope","$injector","$interval","$timeout",function networkVPNRoutersViewController(n,q,p,t){var s=q.get("$q");var k=q.get("$route");var x=q.get("$http");var c=q.get("$routeParams");var u=q.get("$document");var l=q.get("$window");var g=q.get("$location");var v=q.get("$cookieStore");var i=q.get("$rootScope");var o=q.get("loggerService");var f=q.get("utilService");var y=q.get("userService");var b=q.get("networkVPNService");n.routerGateways=[];n.showEditVPNRouterGateway=false;n.message="";var a=function a(){n.routerGateways=[];n.cancelSaveVPNRouterGateway();b.getVPNGateways().success(function A(B){if(!!!!B.result){var C=B.gateways;angular.forEach(C,function(D){D.edit=false;n.routerGateways.push(D)})}}).error(function z(B){})};var h=function h(){o.i("loading router's informations...");a()};n.vpnRouteGateway=null;n.editvpnRouteGateway=function e(z){n.showEditVPNRouterGateway=true;n.vpnRouteGateway={edit:z.edit,identifier:z.identifier,ip_address:z.ip_address,maskcode:z.maskcode,gateway:z.gateway,metric:z.metric,vpn_connected_type:z.vpn_connected_type}};n.setDeletevpnRouteGateway=function w(z){n.vpnRouteGateway=z};n.addNewVPNRouterRole=function d(){n.showEditVPNRouterGateway=true;n.vpnRouteGateway={edit:false,identifier:"",ip_address:"",maskcode:"",gateway:"",metric:"",vpn_connected_type:"1"}};n.saveVPNRouterGateway=function m(){if(!!!n.vpnRouteGateway.ip_address){n.message="请输入路由ip地址";$("#modal-default").modal("show");return false}if(!!!n.vpnRouteGateway.maskcode){n.message="请输入掩码地址";$("#modal-default").modal("show");return false}if(!!!n.vpnRouteGateway.identifier||n.vpnRouteGateway.identifier==""){b.saveVPNGateways(n.vpnRouteGateway).success(function C(){a();n.message="保存路由成功!";$("#modal-default").modal("show")}).error(function A(D){n.message="保存路由失败!"+D.message;$("#modal-default").modal("show")})}else{b.updateVPNGateways(n.vpnRouteGateway).success(function B(){a();n.message="保存路由成功!";$("#modal-default").modal("show")}).error(function z(D){n.message="保存路由失败!"+D.message;$("#modal-default").modal("show")})}};n.cancelSaveVPNRouterGateway=function r(){n.showEditVPNRouterGateway=false;n.vpnRouteGateway=null};n.deleteVPNRouterGateway=function j(z){b.deleteVPNGateways(z).success(function B(){a();n.message="删除路由成功!";$("#modal-default").modal("show")}).error(function A(C){n.message="删除路由失败!"+C.message;$("#modal-default").modal("show")})};h()}]);angular.module("networkVpn").controller("networkVPNRoutersViewController",["$scope","$injector","$interval","$timeout",function networkVPNRoutersViewController(p,t,s,w){var v=t.get("$q");var m=t.get("$route");var A=t.get("$http");var d=t.get("$routeParams");var x=t.get("$document");var n=t.get("$window");var h=t.get("$location");var y=t.get("$cookieStore");var k=t.get("$rootScope");var r=t.get("loggerService");var g=t.get("utilService");var B=t.get("userService");var c=t.get("networkVPNService");p.routerGateways=[];p.showEditVPNRouterGateway=false;p.message="";var b=false;var a=function a(){p.routerGateways=[];p.cancelSaveVPNRouterGateway();if(b){return false}b=true;c.getVPNGateways().success(function D(E){if(!!!!E.result){var F=E.gateways;angular.forEach(F,function(G){G.edit=false;p.routerGateways.push(G)})}b=false}).error(function C(E){b=false})};var j=function j(){r.i("loading router's informations...");a()};p.vpnRouteGateway=null;p.editvpnRouteGateway=function f(C){p.showEditVPNRouterGateway=true;p.vpnRouteGateway={edit:C.edit,identifier:C.identifier,ip_address:C.ip_address,maskcode:C.maskcode,gateway:C.gateway,metric:C.metric,vpn_connected_type:C.vpn_connected_type}};p.setDeletevpnRouteGateway=function z(C){p.vpnRouteGateway=C};p.addNewVPNRouterRole=function e(){p.showEditVPNRouterGateway=true;p.vpnRouteGateway={edit:false,identifier:"",ip_address:"",maskcode:"",gateway:"",metric:"",vpn_connected_type:"1"}};var i=false;p.saveVPNRouterGateway=function o(){if(!!!p.vpnRouteGateway.ip_address){p.message="请输入路由ip地址";$("#modal-default").modal("show");return false}if(!!!p.vpnRouteGateway.maskcode){p.message="请输入掩码地址";$("#modal-default").modal("show");return false}if(i){return false}i=true;if(!!!p.vpnRouteGateway.identifier||p.vpnRouteGateway.identifier==""){c.saveVPNGateways(p.vpnRouteGateway).success(function F(){a();p.message="保存路由成功!";$("#modal-default").modal("show");i=false}).error(function D(G){p.message="保存路由失败!"+G.message;$("#modal-default").modal("show");i=false})}else{c.updateVPNGateways(p.vpnRouteGateway).success(function E(){a();p.message="保存路由成功!";$("#modal-default").modal("show");i=false}).error(function C(G){p.message="保存路由失败!"+G.message;$("#modal-default").modal("show");i=false})}};p.cancelSaveVPNRouterGateway=function u(){p.showEditVPNRouterGateway=false;p.vpnRouteGateway=null};var q=false;p.deleteVPNRouterGateway=function l(C){if(q){return false}q=true;c.deleteVPNGateways(C).success(function E(){a();p.message="删除路由成功!";$("#modal-default").modal("show");q=false}).error(function D(F){p.message="删除路由失败!"+F.message;$("#modal-default").modal("show");q=false})};j()}]);angular.module("networkVpn").controller("networkVPNServerMachineViewController",["$scope","$injector","$interval","$timeout",function networkVPNServerMachineViewController(o,r,q,t){var s=r.get("$q");var m=r.get("$route");var x=r.get("$http");var g=r.get("$routeParams");var v=r.get("$document");var n=r.get("$window");var i=r.get("$location");var w=r.get("$cookieStore");var l=r.get("$rootScope");var p=r.get("loggerService");var h=r.get("utilService");var y=r.get("userService");var e=r.get("networkVPNService");o.sysVPNServers=[];o.showEditVPNServers=false;o.message="";var b=function b(){o.sysVPNServers=[];o.cancelSaveVPNMachine();e.getSystemVPNServerRouters().success(function A(C){if(!!!!C.result){var B=C.routers;angular.forEach(B,function(D){D.edit=false;o.sysVPNServers.push(D)})}}).error(function z(B){})};var j=function j(){p.i("loading machine informations...");b()};o.vpnMachine=null;o.editVPNServers=function u(z){o.showEditVPNServers=true;o.vpnMachine={activitys:z.activitys,connections:z.connections,edit:z.edit,identifier:z.identifier,machine:z.machine,machine_hostname:z.machine_hostname,machine_port:z.machine_port,name:z.name,port:z.port,vpn_connected_type:z.vpn_connected_type}};o.setDeleteVPNServers=function k(z){o.vpnMachine=z};o.addNewVPNService=function f(){o.showEditVPNServers=true;o.vpnMachine={activitys:0,connections:200,edit:false,identifier:"",machine:"",machine_hostname:"",machine_port:"",name:"vpn服务器",port:"",vpn_connected_type:"1"}};o.saveVPNMachine=function a(){if(!!!o.vpnMachine.name){o.message="请输入VPN服务器名称";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.machine){o.message="请输入内网IP地址";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.port){o.message="请输入内网访问端口";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.connections){o.message="请输入VPN用户连接数";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.identifier||o.vpnMachine.identifier==""){e.saveVPNServers(o.vpnMachine).success(function A(){b();o.message="保存VPN服务器成功!";$("#modal-default").modal("show")}).error(function z(B){o.message="保存VPN服务器失败!"+B.message;$("#modal-default").modal("show")})}else{e.updateVPNServers(o.vpnMachine).success(function A(){b();o.message="保存VPN服务器成功!";$("#modal-default").modal("show")}).error(function z(B){o.message="保存VPN服务器失败!"+B.message;$("#modal-default").modal("show")})}}}}}};o.cancelSaveVPNMachine=function d(){o.showEditVPNServers=false;o.vpnMachine=null};o.deleteVPNServers=function c(z){e.deleteVPNServers(z).success(function B(){b();o.message="删除VPN服务器成功!";$("#modal-default").modal("show")}).error(function A(C){o.message="删除VPN服务器失败!"+C.message;$("#modal-default").modal("show")})};if(!l.expectedCredentials&&l.canUseManageFeature){j()}}]);angular.module("networkVpn").controller("networkVPNServerMachineViewController",["$scope","$injector","$interval","$timeout",function networkVPNServerMachineViewController(q,t,s,w){var v=t.get("$q");var n=t.get("$route");var A=t.get("$http");var h=t.get("$routeParams");var y=t.get("$document");var o=t.get("$window");var j=t.get("$location");var z=t.get("$cookieStore");var m=t.get("$rootScope");var r=t.get("loggerService");var i=t.get("utilService");var B=t.get("userService");var f=t.get("networkVPNService");q.sysVPNServers=[];q.showEditVPNServers=false;q.message="";var b=false;var c=function c(){q.sysVPNServers=[];q.cancelSaveVPNMachine();if(b){return false}b=true;f.getSystemVPNServerRouters().success(function D(F){if(!!!!F.result){var E=F.routers;angular.forEach(E,function(G){G.edit=false;q.sysVPNServers.push(G)})}b=false}).error(function C(E){b=false})};var k=function k(){r.i("loading machine informations...");c()};q.vpnMachine=null;q.editVPNServers=function x(C){q.showEditVPNServers=true;q.vpnMachine={activitys:C.activitys,connections:C.connections,edit:C.edit,identifier:C.identifier,machine:C.machine,machine_hostname:C.machine_hostname,machine_port:C.machine_port,name:C.name,port:C.port,vpn_connected_type:C.vpn_connected_type}};q.setDeleteVPNServers=function l(C){q.vpnMachine=C};q.addNewVPNService=function g(){q.showEditVPNServers=true;q.vpnMachine={activitys:0,connections:200,edit:false,identifier:"",machine:"",machine_hostname:"",machine_port:"",name:"vpn服务器",port:"",vpn_connected_type:"1"}};var p=false;q.saveVPNMachine=function a(){if(!!!q.vpnMachine.name){q.message="请输入VPN服务器名称";$("#modal-default").modal("show")}else{if(!!!q.vpnMachine.machine){q.message="请输入内网IP地址";$("#modal-default").modal("show")}else{if(!!!q.vpnMachine.port){q.message="请输入内网访问端口";$("#modal-default").modal("show")}else{if(!!!q.vpnMachine.connections){q.message="请输入VPN用户连接数";$("#modal-default").modal("show")}else{if(p){return false}p=true;if(!!!q.vpnMachine.identifier||q.vpnMachine.identifier==""){f.saveVPNServers(q.vpnMachine).success(function D(){c();q.message="保存VPN服务器成功!";$("#modal-default").modal("show");p=false}).error(function C(E){q.message="保存VPN服务器失败!"+E.message;$("#modal-default").modal("show");p=false})}else{f.updateVPNServers(q.vpnMachine).success(function D(){c();q.message="保存VPN服务器成功!";$("#modal-default").modal("show");p=false}).error(function C(E){q.message="保存VPN服务器失败!"+E.message;$("#modal-default").modal("show");p=false})}}}}}};q.cancelSaveVPNMachine=function e(){q.showEditVPNServers=false;q.vpnMachine=null};var u=false;q.deleteVPNServers=function d(C){if(u){return false}u=true;f.deleteVPNServers(C).success(function E(){c();q.message="删除VPN服务器成功!";$("#modal-default").modal("show");u=false}).error(function D(F){q.message="删除VPN服务器失败!"+F.message;$("#modal-default").modal("show");u=false})};if(!m.expectedCredentials&&m.canUseManageFeature){k()}}]);angular.module("rest").factory("networkVPNService",["$injector",function networkVPNService(q){var A=q.get("$http");var w=q.get("$q");var D=q.get("userService");var f=q.get("utilService");var i=q.get("$rootScope");var C={};C.saveSystemVPNServerParameters=function k(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/update/vpn-server-config",params:E,data:F})};C.getSystemVPNServerRouters=function b(){var E={token:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/routers",params:E})};C.saveVPNServers=function u(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/router/save",params:E,data:F})};C.updateVPNServers=function v(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/router/update/"+F.identifier,params:E,data:F})};C.deleteVPNServers=function d(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/router/delete/"+F.identifier,params:E,data:F})};C.getVPNGateways=function g(){var E={token:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateways",params:E})};C.saveVPNGateways=function o(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/save",params:E,data:F})};C.updateVPNGateways=function h(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/update/"+F.identifier,params:E,data:F})};C.deleteVPNGateways=function s(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/delete/"+F.identifier,params:E,data:F})};C.getVPNGatewayRoles=function r(){var E={token:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/roles",params:E})};C.getUserVPNGatewayRoles=function e(F){var E={token:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(F)+"/user/gateway/roles",params:E})};C.saveVPNGatewayRole=function j(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/role/save",params:E,data:F})};C.updateVPNGatewayRole=function m(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/role/update/"+F.identifier,params:E,data:F})};C.deleteVPNGatewayRole=function n(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/vpn-setting/gateway/role/delete/"+F.identifier,params:E,data:F})};C.saveVPNRouteStrategy=function z(F){var E={vvwork_sign_no:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system-configs/vpn-route-strategy",params:E,data:F})};C.deleteVPNRouteStrategy=function t(F){var E={vvwork_sign_no:D.getCurrentToken()};return A({method:"DELETE",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system-configs/vpn-route-strategy/"+encodeURIComponent(F),params:E})};C.getVPNRouteStrategy=function l(F){var E={vvwork_sign_no:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system-configs/vpn-route-strategy/"+encodeURIComponent(F),params:E})};C.getVPNRouteStrategys=function B(){var E={vvwork_sign_no:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system-configs/vpn-route-strategy",params:E})};C.getVPNRouteStrategysByRouteRoleIdentifier=function a(F){var E={vvwork_sign_no:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system-configs/vpn-route-strategys/"+encodeURIComponent(F),params:E})};C.getSubnets=function x(){var E={token:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/subnet/all",params:E})};C.saveSubnet=function p(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/subnet",params:E,data:F})};C.updateSubnet=function c(F){var E={token:D.getCurrentToken()};return A({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/subnet/"+encodeURIComponent(F.identifier),params:E,data:F})};C.deleteSubnet=function y(F){var E={token:D.getCurrentToken()};return A({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/subnet/remove/"+encodeURIComponent(F.identifier),params:E})};return C}]);angular.module("networkVpn").controller("networkVPNStrategyViewController",["$scope","$injector","$interval","$timeout",function networkVPNStrategyViewController(k,o,n,r){var p=o.get("$q");var g=o.get("$route");var w=o.get("$http");var b=o.get("$routeParams");var s=o.get("$document");var h=o.get("$window");var d=o.get("$location");var t=o.get("$cookieStore");var f=o.get("$rootScope");var m=o.get("loggerService");var c=o.get("utilService");var y=o.get("userService");var a=o.get("networkVPNService");k.routerStrategys=[];k.showEditVPNRouterStrategy=false;k.message="";var i=function i(){k.routerStrategys=[];k.cancelSaveVPNRouterStrategy();a.getVPNRouteStrategys().success(function z(C){if(!!!!C.success){var B=C.parameters.strategys;angular.forEach(B,function(D){k.routerStrategys.push(D)})}}).error(function A(B){})};var e=function e(){m.i("loading router's informations...");i()};k.vpnRouteStrategy=null;k.editvpnRouteStrategys=function v(z){k.showEditVPNRouterStrategy=true;k.vpnRouteStrategy={identifier:z.identifier,command_name:z.command_name,command_value:z.command_value}};k.setDeletevpnRouteStrategys=function x(z){k.vpnRouteStrategy=z};k.addNewVPNStrategy=function u(){k.showEditVPNRouterStrategy=true;k.vpnRouteStrategy={identifier:"",command_name:"",command_value:""}};k.saveVPNRouterStrategy=function q(){if(!!!k.vpnRouteStrategy.command_name){k.message="请输入路由策略指令";$("#modal-default").modal("show");return false}a.saveVPNRouteStrategy(k.vpnRouteStrategy).success(function z(){i();k.message="保存路由策略成功!";$("#modal-default").modal("show")}).error(function A(B){k.message="保存路由策略失败!"+B.message;$("#modal-default").modal("show")})};k.cancelSaveVPNRouterStrategy=function j(){k.showEditVPNRouterStrategy=false;k.vpnRouteStrategy=null};k.deleteVPNRouterStrategy=function l(A){a.deleteVPNRouteStrategy(A.identifier).success(function z(){i();k.message="删除路由策略成功!";$("#modal-default").modal("show")}).error(function B(C){k.message="删除路由策略失败!"+C.message;$("#modal-default").modal("show")})};e()}]);angular.module("networkVpn").controller("networkVPNStrategyViewController",["$scope","$injector","$interval","$timeout",function networkVPNStrategyViewController(m,q,p,u){var s=q.get("$q");var h=q.get("$route");var z=q.get("$http");var c=q.get("$routeParams");var v=q.get("$document");var i=q.get("$window");var e=q.get("$location");var w=q.get("$cookieStore");var g=q.get("$rootScope");var o=q.get("loggerService");var d=q.get("utilService");var B=q.get("userService");var b=q.get("networkVPNService");m.routerStrategys=[];m.showEditVPNRouterStrategy=false;m.message="";var k=false;var j=function j(){m.routerStrategys=[];m.cancelSaveVPNRouterStrategy();if(k){return false}k=true;b.getVPNRouteStrategys().success(function C(F){if(!!!!F.success){var E=F.parameters.strategys;angular.forEach(E,function(G){m.routerStrategys.push(G)})}k=false}).error(function D(E){k=false})};var f=function f(){o.i("loading router's informations...");j()};m.vpnRouteStrategy=null;m.editvpnRouteStrategys=function y(C){m.showEditVPNRouterStrategy=true;m.vpnRouteStrategy={identifier:C.identifier,command_name:C.command_name,command_value:C.command_value}};m.setDeletevpnRouteStrategys=function A(C){m.vpnRouteStrategy=C};m.addNewVPNStrategy=function x(){m.showEditVPNRouterStrategy=true;m.vpnRouteStrategy={identifier:"",command_name:"",command_value:""}};var r=false;m.saveVPNRouterStrategy=function t(){if(!!!m.vpnRouteStrategy.command_name){m.message="请输入路由策略指令";$("#modal-default").modal("show");return false}if(r){return false}r=true;b.saveVPNRouteStrategy(m.vpnRouteStrategy).success(function C(){j();m.message="保存路由策略成功!";$("#modal-default").modal("show");r=false}).error(function D(E){m.message="保存路由策略失败!"+E.message;$("#modal-default").modal("show");r=false})};m.cancelSaveVPNRouterStrategy=function l(){m.showEditVPNRouterStrategy=false;m.vpnRouteStrategy=null};var a=false;m.deleteVPNRouterStrategy=function n(D){if(a){return false}a=true;b.deleteVPNRouteStrategy(D.identifier).success(function C(){j();m.message="删除路由策略成功!";$("#modal-default").modal("show");a=false}).error(function E(F){m.message="删除路由策略失败!"+F.message;$("#modal-default").modal("show");a=false})};f()}]);angular.module("networkVpn").controller("networkVPNSubnetViewController",["$scope","$injector","$interval","$timeout",function networkVPNSubnetViewController(j,n,m,r){var p=n.get("$q");var g=n.get("$route");var w=n.get("$http");var b=n.get("$routeParams");var t=n.get("$document");var h=n.get("$window");var d=n.get("$location");var u=n.get("$cookieStore");var f=n.get("$rootScope");var l=n.get("loggerService");var c=n.get("utilService");var y=n.get("userService");var a=n.get("networkVPNService");j.subnets=[];j.showEditSubnet=false;j.message="";var s=function s(){j.subnets=[];j.cancelSaveSubnet();a.getSubnets().success(function A(B){if(!!!!B){angular.forEach(B,function(C){C.isSystem=c.valueIsTrue(C.isSystem);j.subnets.push(C)})}}).error(function z(B){})};var e=function e(){l.i("loading router's informations...");s()};j.subnet=null;j.editSubnet=function x(z){j.showEditSubnet=true;j.subnet={identifier:z.identifier,ip:z.ip,mask:z.mask,isSystem:z.isSystem}};j.setDeleteSubnet=function i(z){j.subnet=z};j.addNewSubnet=function o(){j.showEditSubnet=true;j.subnet={identifier:"",ip:"",mask:""}};j.saveSubnet=function k(){if(!!!j.subnet.ip){j.message="请输入IP地址";$("#modal-default").modal("show");return false}if(!!!j.subnet.mask){j.message="请输入掩码地址";$("#modal-default").modal("show");return false}if(!!!j.subnet.identifier){a.saveSubnet(j.subnet).success(function A(){s();j.message="保存成功!";$("#modal-default").modal("show")}).error(function z(D){j.message="保存失败!"+D.message;$("#modal-default").modal("show")})}else{a.updateSubnet(j.subnet).success(function C(){s();j.message="更新成功!";$("#modal-default").modal("show")}).error(function B(D){j.message="更新失败!"+D.message;$("#modal-default").modal("show")})}};j.cancelSaveSubnet=function q(){j.showEditSubnet=false;j.subnet=null};j.deleteVPNSubnet=function v(A){a.deleteSubnet(A).success(function z(){s();j.message="删除成功!";$("#modal-default").modal("show")}).error(function B(C){j.message="删除失败!"+C.message;$("#modal-default").modal("show")})};e()}]);angular.module("networkVpn").controller("networkVPNSubnetViewController",["$scope","$injector","$interval","$timeout",function networkVPNSubnetViewController(l,p,o,u){var r=p.get("$q");var i=p.get("$route");var z=p.get("$http");var b=p.get("$routeParams");var w=p.get("$document");var j=p.get("$window");var e=p.get("$location");var x=p.get("$cookieStore");var h=p.get("$rootScope");var n=p.get("loggerService");var c=p.get("utilService");var B=p.get("userService");var a=p.get("networkVPNService");l.subnets=[];l.showEditSubnet=false;l.message="";var d=false;var v=function v(){l.subnets=[];l.cancelSaveSubnet();if(d){return false}d=true;a.getSubnets().success(function D(E){if(!!!!E){angular.forEach(E,function(F){F.isSystem=c.valueIsTrue(F.isSystem);l.subnets.push(F)})}d=false}).error(function C(E){d=false})};var g=function g(){n.i("loading router's informations...");v()};l.subnet=null;l.editSubnet=function A(C){l.showEditSubnet=true;l.subnet={identifier:C.identifier,ip:C.ip,mask:C.mask,isSystem:C.isSystem}};l.setDeleteSubnet=function k(C){l.subnet=C};l.addNewSubnet=function q(){l.showEditSubnet=true;l.subnet={identifier:"",ip:"",mask:""}};var f=false;l.saveSubnet=function m(){if(!!!l.subnet.ip){l.message="请输入IP地址";$("#modal-default").modal("show");return false}if(!!!l.subnet.mask){l.message="请输入掩码地址";$("#modal-default").modal("show");return false}if(f){return false}f=true;if(!!!l.subnet.identifier){a.saveSubnet(l.subnet).success(function D(){v();l.message="保存成功!";$("#modal-default").modal("show");f=false}).error(function C(G){l.message="保存失败!"+G.message;$("#modal-default").modal("show");f=false})}else{a.updateSubnet(l.subnet).success(function F(){v();l.message="更新成功!";$("#modal-default").modal("show");f=false}).error(function E(G){l.message="更新失败!"+G.message;$("#modal-default").modal("show");f=false})}};l.cancelSaveSubnet=function t(){l.showEditSubnet=false;l.subnet=null};var s=false;l.deleteVPNSubnet=function y(D){if(s){return false}s=true;a.deleteSubnet(D).success(function C(){v();l.message="删除成功!";$("#modal-default").modal("show");s=false}).error(function E(F){l.message="删除失败!"+F.message;$("#modal-default").modal("show");s=false})};g()}]);angular.module("nextVpn",[]);angular.module("nextVpn").controller("nextVPNViewController",["$scope","$injector","$interval","$timeout",function nextVPNViewController(n,s,r,v){var u=s.get("$q");var j=s.get("$route");var y=s.get("$http");var d=s.get("$routeParams");var w=s.get("$document");var k=s.get("$window");var f=s.get("$location");var x=s.get("$cookieStore");var i=s.get("$rootScope");var q=s.get("loggerService");var e=s.get("utilService");var z=s.get("userService");var t=s.get("virworkVPNService");n.sysVPNServers=[];n.message="";var p=false;var o=function o(){n.sysVPNServers=[];n.cancelSaveVPNMachine();if(p){return false}p=true;t.getSystemVPNServerInformations().success(function B(C){if(!!!!C){var D=C;angular.forEach(D,function(E){E.edit=false;n.sysVPNServers.push(E)})}p=false}).error(function A(C){p=false})};var g=function g(){q.i("loading machine informations...");o()};n.vpnMachine=null;n.editVPNServer=function m(A){f.url("/system-manage/next-vpn/server/"+A.identifier)};n.setDeleteVPNServers=function h(A){n.vpnMachine=A};n.addNewVPNService=function c(){f.url("/system-manage/next-vpn/server")};n.cancelSaveVPNMachine=function b(){n.showEditVPNServers=false;n.vpnMachine=null};var l=false;n.deleteVPNServers=function a(C){var B={};for(var A in C){if(A!="edit"){B[A]=C[A]}}if(l){return false}l=true;t.removeSystemVPNServerInformation(B).success(function E(F){if(F.success){o();n.message="删除VPN服务器成功!";$("#modal-default").modal("show")}else{n.message="删除VPN服务器失败!"+F.message;$("#modal-default").modal("show")}l=false}).error(function D(F){n.message="删除VPN服务器失败!"+F.message;$("#modal-default").modal("show");l=false})};if(!i.expectedCredentials&&i.canUseManageFeature){g()}}]);angular.module("rest").factory("osService",["$injector",function osService(l){var i=l.get("$http");var f=l.get("$q");var b=l.get("userService");var d=l.get("utilService");var j=l.get("$rootScope");var g={};g.getOSInformations=function n(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/informations",params:p})};g.getOS=function k(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/os",params:p})};g.getCPU=function h(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/cpu",params:p})};g.getMemory=function o(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/memory",params:p})};g.getNetwork=function c(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/network",params:p})};g.getDisk=function a(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/disk",params:p})};g.getFileSystem=function e(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/filesystem",params:p})};g.getSoundCards=function m(){var p={token:b.getCurrentToken()};return i({method:"GET",url:d.tomcat_request_host+"/api/system-os/soundcard",params:p})};return g}]);angular.module("rest").factory("pcAppService",["$injector",function mobileAppService(g){var f=g.get("$http");var d=g.get("$q");var i=g.get("loggerService");var b=g.get("utilService");var e={};e.clipboard={};e.clipboard.getLocalClipboard=function h(){try{if(!!!!JsGetClipboard){return JsGetClipboard()}}catch(j){i.i("get clipboard data error, not pc platform.")}return""};e.clipboard.setLocalClipboard=function a(j){try{if(!!!!JsSetClipboard){JsSetClipboard(j)}}catch(k){i.i("set clipboard data error, not pc platform.")}};e.initApp=function c(){if(!b.pc()){return false}i.i("init pc app, will app response pc platform type.")};e.initApp();return e}]);angular.module("rest").factory("PermissionPatch",[function definePermissionPatch(){var a=function a(b){b=b||{};this.op=b.op;this.path=b.path;this.value=b.value};a.Operation={ADD:"add",REMOVE:"remove"};return a}]);angular.module("personal").controller("personalInfoController",["$scope","$injector","$interval","$timeout",function personalInfoController(p,s,r,u){var t=s.get("$q");var l=s.get("$route");var y=s.get("$http");var g=s.get("$routeParams");var v=s.get("$document");var m=s.get("$window");var j=s.get("$location");var w=s.get("$cookieStore");var k=s.get("$rootScope");var q=s.get("loggerService");var i=s.get("utilService");var z=s.get("userService");var f=s.get("usersService");var e=s.get("networkVPNService");p.userInformation={username:"",nickname:"",worknumber:""};var n="";var h="";var o=false;var c=function c(){q.i("get user basic information.");if(o){return false}o=true;z.getUserBasicInformation().success(function A(C){k.userinfo={username:"",nickname:"",worknumber:""};k.userinfo.username=C.username;k.currentUsername=C.username;if(!!!!C.basicInformation&&C.basicInformation.nickname){k.userinfo.nickname=C.basicInformation.nickname;n=C.basicInformation.nickname}if(!!!!C.basicInformation&&C.basicInformation.identifier){k.userinfo.identifier=C.basicInformation.identifier}if(!!!!C.worknumber){k.userinfo.worknumber=C.worknumber;h=C.worknumber}p.userInformation=k.userinfo;o=false}).error(function B(C){o=false})};if(!k.expectedCredentials){c()}p.message1="";p.message2="";var b=false;p.saveSetting=function a(){var B={identifier:k.userinfo.identifier,nickname:k.userinfo.nickname,username:k.userinfo.username};var E={identifier:"",parameter_name:"user_login_auth_code",parameter_value:k.userinfo.worknumber,user_identifier:k.userinfo.username};if(!k.expectedCredentials&&!!!!k.userinfo.username){if(b){return false}b=true;if(n!=k.userinfo.nickname){f.updateUserBasicInformation(B).success(function A(F){n=k.userinfo.nickname;p.message1="保存昵称信息成功";$("#modal-default_1").modal("show")}).error(function D(F){p.message1="保存昵称信息失败";$("#modal-default_1").modal("show")})}if(h!=k.userinfo.worknumber){f.updateUserWorknumber(k.userinfo.username,E).success(function C(F){h==k.userinfo.worknumber;p.message2="保存工号成功";$("#modal-default_2").modal("show")}).error(function D(F){p.message2="保存工号失败";$("#modal-default_2").modal("show")})}b=false}};p.userPasswdInformation={oldPassword:"",newPassword:""};var x=false;p.updatePassword=function d(){if(!k.expectedCredentials&&!!!!k.userinfo.username){if(!!!p.userPasswdInformation.oldPassword||!!!p.userPasswdInformation.newPassword){p.message1="请输入您的旧密码以及新密码";$("#modal-default_1").modal("show");return false}if(p.userPasswdInformation.oldPassword==""||p.userPasswdInformation.newPassword==""){p.message1="请输入您的旧密码以及新密码";$("#modal-default_1").modal("show");return false}if(p.userPasswdInformation.oldPassword==""&&p.userPasswdInformation.oldPassword==p.userPasswdInformation.newPassword){p.message1="请输入您的旧密码以及新密码";$("#modal-default_1").modal("show");return false}if(p.userPasswdInformation.oldPassword==p.userPasswdInformation.newPassword){p.message1="旧密码与新密码不能相同";$("#modal-default_1").modal("show");return false}var A={oldPassword:p.userPasswdInformation.oldPassword,newPassword:p.userPasswdInformation.newPassword};if(x){return false}x=true;f.updateUserPassword(k.userinfo.username,A).success(function(B){p.message1="更新密码成功";$("#modal-default_1").modal("show");x=false}).error(function(B){p.message1="更新密码失败"+(B.message?"("+B.message+")":"");$("#modal-default_1").modal("show");x=false})}}}]);angular.module("machine",[]);angular.module("index").directive("platformFooter",[function(){return{restrict:"E",replace:true,templateUrl:"admin-app/index/templates/platform-footer.html",controller:["$scope","$injector","$timeout","$interval",function a(b,d,c,e){$rootScope=d.get("$rootScope")}]}}]);angular.module("rest",[]);angular.module("role").controller("roleManageController",["$scope","$injector","$interval","$timeout",function roleManageController(g,y,o,x){var b=y.get("$q");var r=y.get("$route");var n=y.get("$http");var I=y.get("$routeParams");var q=y.get("$document");var H=y.get("$window");var z=y.get("$location");var u=y.get("$cookieStore");var k=y.get("$rootScope");var G=y.get("loggerService");var p=y.get("utilService");var J=y.get("userService");var A=y.get("systemService");var c=y.get("applicationService");var d=y.get("departmentService");var F=y.get("roleService");var h=I.id;g.back=function v(){z.url("/system-manage/role/view")};g.role={name:"",description:"",autoOpenConnections:[],connections:[],department:{},departmentIdentifier:"",parentRole:null,parentRoleIdentifier:null,permissions:{}};g.rolePermissions=F.getSystemRolePermissions();g.sysDepartments=[];g.sysApplications=[];var D={};var j={};var s=false;var m=function m(){if(s){return false}s=true;d.getDepartments().success(function K(M){angular.forEach(M,function(N){j[N.identifier]=N});g.sysDepartments=M;s=false}).error(function L(M){s=false})};m();var C=false;var E=function E(){g.sysApplications=[];if(C){return false}C=true;c.getApplications().success(function(M){var K={};angular.forEach(g.role.connections,function(N){K[""+N.identifier]=N});var L={};angular.forEach(g.role.autoOpenConnections,function(N){L[""+N.connectionIdentifier]=N});angular.forEach(M,function(P){var Q="images/app-icons/MetroUI_Mac_App_Store.png";var O=P.permissions;if(!!!!O){angular.forEach(O,function(R){if(R.name=="connection-icon"){Q=R.value}})}var N={identifier:P.identifier,name:P.name,icon:Q};D[P.identifier]=P;if(K[""+P.identifier]){N.selected=true}if(L[""+P.identifier]){N.isAutoApplication=true}g.sysApplications.push(N);C=false})}).error(function(K){C=false})};g.$watch("selectedAllRolePermission",function(K){var L=g.rolePermissions;g.rolePermissions=[];angular.forEach(L,function(M){if(K){M.selected=true}else{M.selected=false}g.rolePermissions.push(M)})});g.$watch("selectedAllSysApplication",function(L){var K=g.sysApplications;g.sysApplications=[];angular.forEach(K,function(M){if(L){M.selected=true;M.isAutoApplication=false}else{M.selected=false}g.sysApplications.push(M)})});g.selectedAllAutoApplication=false;g.$watch("selectedAllAutoApplication",function(L){var K=g.sysApplications;g.sysApplications=[];angular.forEach(K,function(M){if(L&&M.selected){M.isAutoApplication=true}else{M.isAutoApplication=false}g.sysApplications.push(M)})});var e=false;g.saveRole=function a(){G.i("save role...");if(!!!g.role.name){g.message="请输入角色名称";$("#modal-default").modal("show");return false}if(!!!g.role.departmentIdentifier){g.message="请选择所属部门";$("#modal-default").modal("show");return false}g.role.connections=[];g.role.autoOpenConnections=[];angular.forEach(g.sysApplications,function(K){if(K.selected){g.role.connections.push(D[K.identifier]);if(K.isAutoApplication){g.role.autoOpenConnections.push({identifier:g.role.identifier,connectionIdentifier:K.identifier,rolename:g.role.name})}}});g.role.department=j[g.role.departmentIdentifier];g.role.department.roles=[];g.role.permissions={};angular.forEach(g.rolePermissions,function(K){g.role.permissions[""+F.formatPermissionKey(K.key)]=K.selected});if(e){return false}e=true;F.saveRole(g.role).success(function(K){g.message="保存成功";$("#modal-default").modal("show");F.syncUserCloudUserGroup();x(function(){g.back()},3000);e=false}).error(function(K){g.message="保存失败."+K.message;$("#modal-default").modal("show");e=false})};var B=false;g.deleteRole=function f(){if(!!!g.role){return false}if(!!!g.role.identifier){return false}if(B){return false}B=true;F.deleteRole(g.role).success(function L(){g.message="删除成功!";$("#modal-default").modal("show");F.syncUserCloudUserGroup();x(function(){g.back()},3000);B=false}).error(function K(M){g.message="删除失败!";$("#modal-default").modal("show");B=false})};g.system_client_screen_record_setting=false;var w=false;var t=function t(){if(w){return false}w=true;A.getParameters().success(function K(N){if(!!!!N){var O=N.client_screen_record_setting;if(!!!!O&&O=="true"){g.system_client_screen_record_setting=true;g.rolePermissions=F.getSystemRolePermissions("client_screen_record_setting","true")}else{g.system_client_screen_record_setting=false}if(!!!!g.role.permissions){var M=new F.rolePermissionEntry(g.role.permissions);var L=g.rolePermissions;g.rolePermissions=[];angular.forEach(L,function(P){if(P.key in M){P.selected=M[P.key]}g.rolePermissions.push(P)})}}w=false}).error(function(L){w=false})};var i=false;var l=function l(){G.i("get role information:{}",h);if(i){return false}i=true;F.getRole(h).success(function(K){g.role=K;t();E();i=false}).error(function(K){i=false})};if(!!!!h){l()}else{g.back()}}]);angular.module("role",[]);angular.module("role").controller("roleNewController",["$scope","$injector","$interval","$timeout",function roleNewController(p,t,s,x){var v=t.get("$q");var j=t.get("$route");var A=t.get("$http");var d=t.get("$routeParams");var y=t.get("$document");var k=t.get("$window");var f=t.get("$location");var z=t.get("$cookieStore");var g=t.get("$rootScope");var r=t.get("loggerService");var e=t.get("utilService");var B=t.get("userService");var b=t.get("systemService");var q=t.get("applicationService");var w=t.get("departmentService");var n=t.get("roleService");p.back=function o(){f.url("/system-manage/role/view")};p.role={name:"",description:"",autoOpenConnections:[],connections:[],department:{},departmentIdentifier:"",parentRole:null,parentRoleIdentifier:null,permissions:{}};p.rolePermissions=n.getSystemRolePermissions();p.sysDepartments=[];p.sysApplications=[];var c={};var i={};var m=function m(){w.getDepartments().success(function C(E){angular.forEach(E,function(F){i[F.identifier]=F});p.sysDepartments=E}).error(function D(E){})};m();var a=function a(){p.sysApplications=[];q.getApplications().success(function(C){angular.forEach(C,function(F){var G="images/app-icons/MetroUI_Mac_App_Store.png";var E=F.permissions;if(!!!!E){angular.forEach(E,function(H){if(H.name=="connection-icon"){G=H.value}})}var D={identifier:F.identifier,name:F.name,icon:G};c[F.identifier]=F;p.sysApplications.push(D)})}).error(function(C){})};a();p.$watch("selectedAllRolePermission",function(C){var D=p.rolePermissions;p.rolePermissions=[];angular.forEach(D,function(E){if(C){E.selected=true}else{E.selected=false}p.rolePermissions.push(E)})});p.$watch("selectedAllSysApplication",function(D){var C=p.sysApplications;p.sysApplications=[];angular.forEach(C,function(E){if(D){E.selected=true;E.isAutoApplication=false}else{E.selected=false}p.sysApplications.push(E)})});p.selectedAllAutoApplication=false;p.$watch("selectedAllAutoApplication",function(D){var C=p.sysApplications;p.sysApplications=[];angular.forEach(C,function(E){if(D&&E.selected){E.isAutoApplication=true}else{E.isAutoApplication=false}p.sysApplications.push(E)})});p.message="";var h=false;p.save=function u(){r.i("save role...");if(!!!p.role.name){p.message="请输入角色名称";$("#modal-default").modal("show");return false}if(!!!p.role.departmentIdentifier){p.message="请选择所属部门";$("#modal-default").modal("show");return false}angular.forEach(p.sysApplications,function(C){if(C.selected){p.role.connections.push(c[C.identifier]);if(C.isAutoApplication){p.role.autoOpenConnections.push({connectionIdentifier:C.identifier,rolename:p.role.name})}}});p.role.department=i[p.role.departmentIdentifier];p.role.permissions={};angular.forEach(p.rolePermissions,function(C){p.role.permissions[""+n.formatPermissionKey(C.key)]=C.selected});if(h){return false}h=true;n.createRole(p.role).success(function(C){p.message="创建成功";$("#modal-default").modal("show");n.syncUserCloudUserGroup();x(function(){p.back()},3000);h=false}).error(function(C){p.message="创建失败."+C.message;$("#modal-default").modal("show");h=false})};p.system_client_screen_record_setting=false;var l=function l(){b.getParameters().success(function C(D){if(!!!!D){var E=D.client_screen_record_setting;if(!!!!E&&E=="true"){p.system_client_screen_record_setting=true;p.rolePermissions=n.getSystemRolePermissions("client_screen_record_setting","true")}else{p.system_client_screen_record_setting=false}}})};l()}]);angular.module("rest").factory("roleService",["$injector",function roleService(p){var m=p.get("$http");var h=p.get("$q");var c=p.get("userService");var f=p.get("utilService");var n=p.get("$rootScope");var i={};i.getRoles=function a(){var q={token:c.getCurrentToken()};return m({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/all",params:q})};i.getRole=function g(r){var q={token:c.getCurrentToken()};return m({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/"+encodeURIComponent(r),params:q})};i.deleteRole=function b(r){var q={token:c.getCurrentToken()};return m({method:"DELETE",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/"+encodeURIComponent(r.identifier),params:q})};i.createRole=function e(r){var q={token:c.getCurrentToken()};return m({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role",params:q,data:r})};i.saveRole=function k(r){var q={token:c.getCurrentToken()};return m({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/"+encodeURIComponent(r.identifier),params:q,data:r})};i.getChildRoles=function a(r){var q={token:c.getCurrentToken()};return m({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/department/roles/"+encodeURIComponent(r.identifier),params:q})};i.getRoleConnectionPermissions=function d(r){var q={token:c.getCurrentToken()};return m({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/connections/"+encodeURIComponent(r.identifier),params:q})};i.getRolePermissions=function o(r){var q={token:c.getCurrentToken()};return m({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/permissions/"+encodeURIComponent(r.identifier),params:q})};i.syncUserCloudUserGroup=function(){var q={};return m({method:"POST",headers:c.getHeaders4Token(),url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(c.getDataSource())+"/role/sync-cloud-user-group",params:q,data:{}})};i.getSystemRolePermissions=function l(){var x=false;if(arguments.length>0){var v=arguments[0];if(v=="client_screen_record_setting"){var u=arguments[1];x=!!!!u&&(u=="true"||u==true)}}var t={canAudio:"启动音频(用户可以在本地播放应用程序中音频和视频声音)",canInputTxt:"拷入内容(虚拟沙盒下使用时, 用户可以将本地复制文本内容粘贴到当前使用的应用中)",canOutputTxt:"拷出内容(虚拟沙盒下使用时, 用户可以复制当前使用的应用内的文本内容，粘贴到本地应用中)",canUsb:"USB功能使用权限(虚拟沙盒下使用时, 用户可以将本地的USB接口驱动共享到远端应用主机上使用，如加密狗、键盘、鼠标、U盘等)",canPrint:"打印文档(虚拟沙盒下使用时, 用户可以在本地打印当前使用的应用程序中的文档)",canClientCloudStorage:"本地云盘同步(虚拟沙盒下使用时, 用户可以在本地计算机直接使用云盘)",canRemoteCloudStorage:"应用云盘同步(用户远程应用中使用云盘)",canClientDrive:"共享本地磁盘(虚拟沙盒下使用时, 用户可以将本地电脑的磁盘共享的虚拟应用中，进行文件操作)",client_screen_record_setting:"启动录屏监控(当需要对该角色下的用户使用/操作应用进行监控审计的时候,管理员可开启启动录屏监控这一功能)",block_internet:"隔离本地网络(VPN建立之后,隔离本地局域网内的所有网络访问)"};var w=[];var s=0;for(var r in t){var q={name:t[r],selected:false,show:true,key:r,identifier:++s};if(r=="client_screen_record_setting"){q.show=x}w.push(q)}return w};i.formatPermissionKey=function(q){var r={canAudio:"enable-audio",canInputTxt:"txt-input",canOutputTxt:"txt-output",canUsb:"app-usb",canPrint:"enable-printing",canClientCloudStorage:"client-cloudstorage",canRemoteCloudStorage:"remote-cloudstorage",canClientDrive:"client-drive",client_screen_record_setting:"client_screen_record_setting",block_internet:"block_internet"};if(q in r){return r[q]}else{return false}};i.rolePermissionEntry=function j(q){q=q||{};var r=this;this.canInputTxt=false;this.canOutputTxt=false;this.canUsb=false;this.canPrint=false;this.canAudio=false;this.canClientCloudStorage=false;this.canRemoteCloudStorage=false;this.canClientDrive=false;this.client_screen_record_setting=false;this.block_internet=false;var s=function(t){return(t==="true"||t=="true"||t==true)};if(!!!!q&&q["txt-input"]){this.canInputTxt=s(q["txt-input"])}if(!!!!q&&q["txt-output"]){this.canOutputTxt=s(q["txt-output"])}if(!!!!q&&q["app-usb"]){this.canUsb=s(q["app-usb"])}if(!!!!q&&q["enable-printing"]){this.canPrint=s(q["enable-printing"])}if(!!!!q&&q["enable-audio"]){this.canAudio=s(q["enable-audio"])}if(!!!!q&&q["client-cloudstorage"]){this.canClientCloudStorage=s(q["client-cloudstorage"])}if(!!!!q&&q["remote-cloudstorage"]){this.canRemoteCloudStorage=s(q["remote-cloudstorage"])}if(!!!!q&&q["client-drive"]){this.canClientDrive=s(q["client-drive"])}if(!!!!q&&q.client_screen_record_setting){this.client_screen_record_setting=s(q.client_screen_record_setting)}if(!!!!q&&q.block_internet){this.block_internet=s(q.block_internet)}return r};return i}]);angular.module("role").controller("roleViewController",["$scope","$injector","$interval","$timeout",function roleViewController(m,q,p,s){var r=q.get("$q");var i=q.get("$route");var v=q.get("$http");var c=q.get("$routeParams");var t=q.get("$document");var j=q.get("$window");var e=q.get("$location");var u=q.get("$cookieStore");var h=q.get("$rootScope");var o=q.get("loggerService");var d=q.get("utilService");var x=q.get("userService");var l=q.get("roleService");m.data_loading=false;m.message={title:"提示:",text:""};m.sysRoles=[];m.roles=[];m.search_conditions=null;var b=["name","department_name"];m.$watch("search_conditions",function(y){if(!!!y&&y!=""){}else{m.roles=d.seach_condition_objs(m.sysRoles,m.search_conditions,b)}});var w=function w(){m.data_loading=true;l.getRoles().success(function z(A){m.sysRoles=[];m.roles=[];angular.forEach(A,function(B){B.iconText=B.name.substring(0,1).toUpperCase();B.department_name=B.department.name;m.sysRoles.push(B)});m.roles=d.seach_condition_objs(m.sysRoles,m.search_conditions,b);m.data_loading=false}).error(function y(A){m.data_loading=false})};var g=function g(){o.i("loading role informations...");if(!h.expectedCredentials){w()}};m.currentRole=null;m.setDeleteRole=function k(y){m.currentRole=y;m.message.title="确认要删除角色“"+m.currentRole.name+"”吗?";m.message.text="删除数据将不可恢复!"};var f=false;m.deleteRole=function n(){if(!!!!m.currentRole){if(f){return false}f=true;l.deleteRole(m.currentRole).success(function z(A){w();l.syncUserCloudUserGroup();f=false}).error(function y(A){w();f=false})}};m.showAddNewRole=function a(){e.url("/system-manage/role/new")};g()}]);angular.module("system").controller("systemAuthClientSecurityController",["$scope","$injector","$interval","$timeout",function systemAuthClientSecurityController(k,m,l,o){var n=m.get("$q");var i=m.get("$route");var r=m.get("$http");var d=m.get("$routeParams");var p=m.get("$document");var j=m.get("$window");var f=m.get("$location");var q=m.get("$cookieStore");var g=m.get("$rootScope");var e=m.get("utilService");var s=m.get("userService");var b=m.get("systemService");k.message={title:"",text:""};k.ClientSecurity={client_screen_record_setting:false,open_client_screen_record_setting:false,client_ac_auth_setting:false,client_ac_auth_tc_onlineuser_url:""};var h=false;k.saveSystemParameters=function a(){if(k.ClientSecurity.client_ac_auth_setting&&!!!k.ClientSecurity.client_ac_auth_tc_onlineuser_url){k.message={title:"提示:",text:"请输入用户上网行为认证地址(跨屏服务器内网地址)"};$("#modal-alert-message").modal("show");return false}var u=[];for(var t in k.ClientSecurity){var v={name:t,value:k.ClientSecurity[""+t]};u.push(v)}if(h){return false}h=true;b.saveSystemParameters(u).success(function(w){k.message={title:"提示:",text:"保存成功"};$("#modal-alert-message").modal("show");h=false}).error(function(w){k.message={title:"提示:",text:"保存失败:"+w.message};$("#modal-alert-message").modal("show");h=false})};var c=function c(){b.getParameters().success(function(t){if(!!!!t){if(!!!!t.client_screen_record_setting){k.ClientSecurity.client_screen_record_setting=e.valueIsTrue(t.client_screen_record_setting)}if(!!!!t.open_client_screen_record_setting){k.ClientSecurity.open_client_screen_record_setting=e.valueIsTrue(t.open_client_screen_record_setting)}if(!!!!t.client_ac_auth_setting){k.ClientSecurity.client_ac_auth_setting=e.valueIsTrue(t.client_ac_auth_setting)}if(!!!!t.client_ac_auth_tc_onlineuser_url){k.ClientSecurity.client_ac_auth_tc_onlineuser_url=t.client_ac_auth_tc_onlineuser_url}}}).error(function(t){})};if(!g.expectedCredentials&&g.canUseManageFeature){c()}}]);angular.module("system").controller("systemAuthLoginController",["$scope","$injector","$interval","$timeout",function systemAuthLoginController(k,m,l,o){var n=m.get("$q");var i=m.get("$route");var r=m.get("$http");var d=m.get("$routeParams");var p=m.get("$document");var j=m.get("$window");var f=m.get("$location");var q=m.get("$cookieStore");var g=m.get("$rootScope");var e=m.get("utilService");var s=m.get("userService");var b=m.get("systemService");k.message={title:"",text:""};k.webClientAuth={close_app_download_url_ui:false,close_remember_account_login_feature_show:false,remember_account_login_feature_show:true,close_auto_login_feature_show:false,auto_login_feature_show:true,user_login_auth_code_feature_show:false,user_login_update_passwd:false};k.$watch("webClientAuth.close_remember_account_login_feature_show",function(t){if(t){k.webClientAuth.close_auto_login_feature_show=true}});k.$watch("webClientAuth.close_auto_login_feature_show",function(t){if(!t){if(k.webClientAuth.close_remember_account_login_feature_show){k.webClientAuth.close_auto_login_feature_show=true}}});var h=false;k.saveSystemParameters=function a(){var u=[];k.webClientAuth.remember_account_login_feature_show=!k.webClientAuth.close_remember_account_login_feature_show;k.webClientAuth.auto_login_feature_show=!k.webClientAuth.close_auto_login_feature_show;for(var t in k.webClientAuth){var v={name:t,value:k.webClientAuth[""+t]};u.push(v)}if(h){return false}h=true;b.saveSystemParameters(u).success(function(w){k.message={title:"提示:",text:"保存成功"};$("#modal-alert-message").modal("show");h=false}).error(function(w){k.message={title:"提示:",text:"保存失败:"+w.message};$("#modal-alert-message").modal("show");h=false})};var c=function c(){b.getParameters().success(function(t){if(!!!!t){if(!!!!t.close_app_download_url_ui){k.webClientAuth.close_app_download_url_ui=e.valueIsTrue(t.close_app_download_url_ui)}if(!!!!t.close_remember_account_login_feature_show){k.webClientAuth.close_remember_account_login_feature_show=e.valueIsTrue(t.close_remember_account_login_feature_show);k.webClientAuth.remember_account_login_feature_show=!k.webClientAuth.close_remember_account_login_feature_show}if(!!!!t.remember_account_login_feature_show){k.webClientAuth.remember_account_login_feature_show=e.valueIsTrue(t.remember_account_login_feature_show);k.webClientAuth.close_remember_account_login_feature_show=!k.webClientAuth.remember_account_login_feature_show}if(!!!!t.close_auto_login_feature_show){k.webClientAuth.close_auto_login_feature_show=e.valueIsTrue(t.close_auto_login_feature_show);k.webClientAuth.auto_login_feature_show=!k.webClientAuth.close_auto_login_feature_show}if(!!!!t.auto_login_feature_show){k.webClientAuth.auto_login_feature_show=e.valueIsTrue(t.auto_login_feature_show);k.webClientAuth.close_auto_login_feature_show=!k.webClientAuth.auto_login_feature_show}if(!!!!t.user_login_auth_code_feature_show){k.webClientAuth.user_login_auth_code_feature_show=e.valueIsTrue(t.user_login_auth_code_feature_show)}if(!!!!t.user_login_update_passwd){k.webClientAuth.user_login_update_passwd=e.valueIsTrue(t.user_login_update_passwd)}}}).error(function(t){})};if(!g.expectedCredentials&&g.canUseManageFeature){c()}}]);angular.module("system").controller("systemAuthVpnController",["$scope","$injector","$interval","$timeout",function systemAuthVpnController(l,n,m,p){var o=n.get("$q");var j=n.get("$route");var s=n.get("$http");var e=n.get("$routeParams");var q=n.get("$document");var k=n.get("$window");var g=n.get("$location");var r=n.get("$cookieStore");var h=n.get("$rootScope");var f=n.get("utilService");var t=n.get("userService");var c=n.get("systemService");l.message={title:"",text:""};l.sslvpn={vpn_auth_feature_close_switch:false,virwork_super_vpn_feature_switch:false,vpn_auth_passwd_switch:false,vpn_auth_passwd_timeout_switch:false,vpn_auth_passwd_defined_switch:false,vpn_auth_passwd:""};l.$watch("sslvpn.virwork_super_vpn_feature_switch",function(u){if(u){l.sslvpn.vpn_auth_passwd_switch=false;l.sslvpn.vpn_auth_passwd_timeout_switch=false;l.sslvpn.vpn_auth_passwd_defined_switch=false}});l.$watch("sslvpn.vpn_auth_passwd_switch",function(u){if(u){l.sslvpn.virwork_super_vpn_feature_switch=false}});var i=false;l.saveSystemParameters=function a(){if(i){return false}var v=[];if(l.sslvpn.virwork_super_vpn_feature_switch){l.sslvpn.vpn_auth_passwd_switch=false;l.sslvpn.vpn_auth_passwd_timeout_switch=false;l.sslvpn.vpn_auth_passwd_defined_switch=false}if(l.sslvpn.vpn_auth_passwd_defined_switch){if(!!!l.sslvpn.vpn_auth_passwd){l.message={title:"提示:",text:"请输入SSLVPN认证码(字母数字的组合)"};$("#modal-alert-message").modal("show");return false}else{var x=/^[0-9a-zA-Z]+$/;if(!l.sslvpn.vpn_auth_passwd.match(x)){l.message={title:"提示:",text:"请输入SSLVPN认证码(字母数字的组合)"};$("#modal-alert-message").modal("show");return false}}}for(var u in l.sslvpn){var w={name:u,value:l.sslvpn[""+u]};v.push(w)}i=true;c.saveSystemParameters(v).success(function(y){l.message={title:"提示:",text:"保存成功"};$("#modal-alert-message").modal("show");h.systemFeatures.open_ssl_vpn=!l.sslvpn.virwork_super_vpn_feature_switch;h.systemFeatures.open_next_ssl_vpn=!!!!l.sslvpn.virwork_super_vpn_feature_switch;i=false}).error(function(y){l.message={title:"提示:",text:"保存失败:"+y.message};$("#modal-alert-message").modal("show");i=false})};var b=false;var d=function d(){if(b){return false}b=true;c.getParameters().success(function(u){if(!!!!u){if(!!!!u.vpn_auth_feature_close_switch){l.sslvpn.vpn_auth_feature_close_switch=f.valueIsTrue(u.vpn_auth_feature_close_switch)}if(!!!!u.virwork_super_vpn_feature_switch){l.sslvpn.virwork_super_vpn_feature_switch=f.valueIsTrue(u.virwork_super_vpn_feature_switch)}if(!!!!u.vpn_auth_passwd_switch){l.sslvpn.vpn_auth_passwd_switch=f.valueIsTrue(u.vpn_auth_passwd_switch)}if(!!!!u.vpn_auth_passwd_timeout_switch){l.sslvpn.vpn_auth_passwd_timeout_switch=f.valueIsTrue(u.vpn_auth_passwd_timeout_switch)}if(!!!!u.vpn_auth_passwd_defined_switch){l.sslvpn.vpn_auth_passwd_defined_switch=f.valueIsTrue(u.vpn_auth_passwd_defined_switch)}if(!!!!u.vpn_auth_passwd){l.sslvpn.vpn_auth_passwd=u.vpn_auth_passwd}}b=false}).error(function(u){b=false})};if(!h.expectedCredentials&&h.canUseManageFeature){d()}}]);angular.module("system").controller("systemAuthWatermarkController",["$scope","$injector","$interval","$timeout",function systemAuthWatermarkController(k,m,l,o){var n=m.get("$q");var i=m.get("$route");var r=m.get("$http");var d=m.get("$routeParams");var p=m.get("$document");var j=m.get("$window");var f=m.get("$location");var q=m.get("$cookieStore");var g=m.get("$rootScope");var e=m.get("utilService");var s=m.get("userService");var b=m.get("systemService");k.message={title:"",text:""};k.watermark={client_connection_canvas_watermark_switch:false,client_connection_canvas_watermark_contents_switch:false,client_connection_canvas_watermark_contents:""};k.$watch("watermark.client_connection_canvas_watermark_switch",function(t){if(!t){k.watermark.client_connection_canvas_watermark_contents_switch=false}});var h=false;k.saveSystemParameters=function a(){if(k.watermark.client_connection_canvas_watermark_contents_switch&&!!!k.watermark.client_connection_canvas_watermark_contents){k.message={title:"提示:",text:"请输入水印内容"};$("#modal-alert-message").modal("show");return false}var u=[];for(var t in k.watermark){var v={name:t,value:k.watermark[""+t]};u.push(v)}if(h){return false}h=true;b.saveSystemParameters(u).success(function(w){k.message={title:"提示:",text:"保存成功"};$("#modal-alert-message").modal("show");h=false}).error(function(w){k.message={title:"提示:",text:"保存失败:"+w.message};$("#modal-alert-message").modal("show");h=false})};var c=function c(){b.getParameters().success(function(t){if(!!!!t){if(!!!!t.client_connection_canvas_watermark_switch){k.watermark.client_connection_canvas_watermark_switch=e.valueIsTrue(t.client_connection_canvas_watermark_switch)}if(!!!!t.client_connection_canvas_watermark_contents_switch){k.watermark.client_connection_canvas_watermark_contents_switch=e.valueIsTrue(t.client_connection_canvas_watermark_contents_switch)}if(!!!!t.client_connection_canvas_watermark_contents){k.watermark.client_connection_canvas_watermark_contents=t.client_connection_canvas_watermark_contents}}}).error(function(t){})};if(!g.expectedCredentials&&g.canUseManageFeature){c()}}]);angular.module("system").controller("systemCloudstorageController",["$scope","$injector","$interval","$timeout",function systemCloudstorageController(n,q,p,t){var r=q.get("$q");var j=q.get("$route");var w=q.get("$http");var e=q.get("$routeParams");var u=q.get("$document");var k=q.get("$window");var g=q.get("$location");var v=q.get("$cookieStore");var h=q.get("$rootScope");var f=q.get("utilService");var x=q.get("userService");var c=q.get("systemService");var o=q.get("loggerService");n.message={title:"",text:""};var m=null;n.hideOcloudStorage=function a(){};n.showOcloudStorage=function s(){};n.cloudstorage={driveMachine:"",drivePath:"",cloudstorage_server_host:"",cloudstorage_sync_users_api:"/vvcloud/ocs/v1.php/cloud/vvwork",cloudstorage_sync_groups_api:"/vvcloud/ocs/v1.php/cloud/vvwork",cloudstorage_user_auth_token_api:"/vvcloud/ocs/v1.php/cloud/vvwork"};var i=false;n.saveSystemParameters=function b(){n.cloudstorage.cloudstorage_server_host=n.cloudstorage.driveMachine;var z=[];for(var y in n.cloudstorage){var A={name:y,value:n.cloudstorage[""+y]};if(y=="driveMachine"){z.push({name:"drive-machine",value:n.cloudstorage[""+y]})}z.push(A)}if(i){return false}i=true;c.saveSystemParameters(z).success(function(B){n.message={title:"提示:",text:"保存成功"};$("#modal-alert-message").modal("show");i=false}).error(function(B){n.message={title:"提示:",text:"保存失败:"+B.message};$("#modal-alert-message").modal("show");i=false})};var d=function d(){c.getParameters().success(function(y){if(!!!!y){if(!!!!y.driveMachine){n.cloudstorage.driveMachine=y.driveMachine}if(!!!!y["drive-machine"]){n.cloudstorage.driveMachine=y["drive-machine"]}if(!!!!y.drivePath){n.cloudstorage.drivePath=y.drivePath}}}).error(function(y){})};n.showVirworkCloudstorageWebView=false;n.CloudStorageWindowInterval=null;n.CloudStorageWindowTimeout=null;n.openCloudstorage=function l(){x.syncCloudUser().success(function(C){if(!!!C.success){n.message={title:"提示:",text:"请检查云盘服务器地址是否配置正确, 云盘服务器是否正常运行"};$("#modal-alert-message").modal("show")}else{var A=C.parameters.status;var E=C.parameters.ip;var y=C.parameters.port;var G=C.parameters.password;var F=true;if(F){var z=h.currentUsername+"#-#"+G;var H=f.Base64Encode(z,f.encode_type_utf8,2);var B=window.location.protocol+"//"+window.location.hostname+((window.location.port!="")?(":"+window.location.port):"")+((window.location.pathname=="/"||window.location.pathname.indexOf("/admin.html")!=-1||window.location.pathname.indexOf("/admin-online.html")!=-1)?"":window.location.pathname)+"/vvcloud.html?token="+H;var D=window.open(B,"_blank");D.focus();n.message={title:"提示:",text:"已通知浏览器打开WEB云盘"};$("#modal-alert-message").modal("show")}else{}}}).error(function(y){n.message={title:"提示:",text:"请检查云盘服务器地址是否配置正确, 云盘服务器是否正常运行"};$("#modal-alert-message").modal("show")})};if(!h.expectedCredentials&&h.canUseManageFeature){d()}}]);angular.module("system").controller("systemLicenseController",["$scope","$injector","$interval","$timeout",function systemLicenseController(o,m,g,c){var h=m.get("$q");var k=m.get("$route");var i=m.get("$http");var l=m.get("$routeParams");var d=m.get("$document");var b=m.get("$window");var f=m.get("$location");var p=m.get("$cookieStore");var j=m.get("$rootScope");var e=m.get("utilService");var a=m.get("userService");var n=m.get("systemService")}]);angular.module("system").controller("systemLoggerController",["$scope","$injector","$interval","$timeout",function systemLoggerController(o,q,p,t){var s=q.get("$q");var m=q.get("$route");var w=q.get("$http");var f=q.get("$routeParams");var u=q.get("$document");var n=q.get("$window");var i=q.get("$location");var v=q.get("$cookieStore");var j=q.get("$rootScope");var h=q.get("utilService");var x=q.get("userService");var c=q.get("systemService");o.data_loading=false;o.token=x.getCurrentToken();o.dateFormat="yyyy-MM-dd HH:mm:ss";o.slogger={};o.slogger.type="all";o.slogger.operat="all";o.slogger.username="";o.slogger.application="";o.slogger.startTime=h.time.getCalendar(new Date().getTime()-7*24*60*60*1000);o.slogger.endTime=h.time.getCalendar(new Date().getTime());o.slogger.allType=true;o.slogger.userType=false;o.slogger.systemType=false;o.sysLoggers=[];o.objspage=h.init_object_paging();var d=["user","type","operat","message","application","time"];o.search_condition=null;o.conditionsysLoggers=[];o.vpages=[];o.pages=0;o.page=0;o.page_size=0;o.start=0;o.end=0;o.$watch("page_size",function(y){if(y!=0){o.page=1;o.objspage=h.object_paging(o.sysLoggers,o.page,o.page_size,o.search_condition,d)}});o.$watch("search_condition",function(y){if(!!!y&&y!=""){}else{o.page=1;o.objspage=h.object_paging(o.sysLoggers,o.page,o.page_size,o.search_condition,d)}});o.pagefornumber=function l(y){o.page=y;o.objspage=h.object_paging(o.sysLoggers,o.page,o.page_size,o.search_condition,d)};var e=false;o.search=function k(){o.page_size=0;o.sysLoggers=[];var y={};if(o.slogger.type!="all"){y.type=o.slogger.type}if(o.slogger.type=="user"){y.username=o.slogger.username}if(o.slogger.application!=""){y.application=o.slogger.application}if(o.slogger.operat!="all"){y.operat=o.slogger.operat}if(o.slogger.startTime!=""){y.startTime=h.time.stringFormatTime(o.slogger.startTime)}if(o.slogger.endTime!=""){y.endTime=h.time.stringFormatTime(o.slogger.endTime)}o.data_loading=true;if(e){return false}e=true;c.getLoggers(y).success(function z(B){o.sysLoggers=[];angular.forEach(B,function A(C){C.selected=false;C.longTime=C.time;C.time=h.time.getTime_YMDHMS4Time(C.time);o.sysLoggers.push(C)});o.page=1;o.page_size=10;o.data_loading=false;e=false}).error(function(A){o.data_loading=false;e=false})};o.removeAllLoggers=function b(){c.removeAllLoggers().success(function y(){r()}).error(function(z){})};var a=false;o.deleteLogger=function g(){var y=[];var A=o.objspage.objs;angular.forEach(A,function B(C){if(C.selected){var D={application:C.application,identifier:C.identifier,message:C.message,operat:C.operat,state:C.state,time:C.longTime,type:C.type,user:C.user};y.push(D)}});if(y.length==0){return false}if(a){return false}a=true;c.removeLoggersByIdentifiers(y).success(function z(){r();a=false}).error(function(C){a=false})};var r=function r(){o.search()};o.search()}]);angular.module("system",[]);angular.module("index").directive("systemOsChar",[function(){return{restrict:"E",replace:true,templateUrl:"admin-app/index/templates/system-os-char.html",controller:["$scope","$injector","$timeout","$interval",function a(m,q,u,p){$rootScope=q.get("$rootScope");var e=q.get("utilService");var f=q.get("osService");var c=30000;m.cpu={};m.memory={};m.disks=[];m.fileSystem=[];m.cpu_usage="0%";m.cpu_idle="100%";var t=[];var s=[];var h=[];var o=[];var k=[];var b=function b(){if(t.length==10){t.shift();s.shift();h.shift();o.shift();k.shift()}var z=m.cpu.user_usage;var A=m.cpu.system_usage;var F=m.cpu.idle_usage;var y=e.time.getTime_HMS();var G=parseInt(z.replace("%",""))+parseInt(A.replace("%",""));var E=parseInt(F.replace("%",""));m.cpu_usage=G+"%";m.cpu_idle=E+"%";t.push(y);s.push(G);h.push(E);o.push(m.cpu.processes);k.push(m.cpu.threads);if(!!!$("#cpuAreaChart").get(0)){return}var C=$("#cpuAreaChart").get(0).getContext("2d");var D=new Chart(C);var H={labels:t,datasets:[{label:"Digital Goods",fillColor:"rgba(60,141,188,0.9)",strokeColor:"rgba(60,141,188,0.8)",pointColor:"#3b8bba",pointStrokeColor:"rgba(60,141,188,1)",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(60,141,188,1)",data:h},{label:"Electronics",fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:s}]};var x={showScale:true,scaleShowGridLines:false,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,bezierCurve:true,bezierCurveTension:0.3,pointDot:false,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',maintainAspectRatio:true,responsive:true};D.Line(H,x);if(!!!$("#processLineChart").get(0)){return}var B=$("#processLineChart").get(0).getContext("2d");var w=new Chart(B);var J={labels:t,datasets:[{label:"Digital Goods",fillColor:"rgba(60,141,188,0.9)",strokeColor:"rgba(60,141,188,0.8)",pointColor:"#3b8bba",pointStrokeColor:"rgba(60,141,188,1)",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(60,141,188,1)",data:o},{label:"Electronics",fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:k}]};var I=x;I.datasetFill=false;w.Line(J,I)};var d=function d(){if(!!!$("#memoryPieChart").get(0)){return}var x=$("#memoryPieChart").get(0).getContext("2d");var w=new Chart(x);var z=[{value:m.memory.used_num,color:"#f56954",highlight:"#f56954",label:"已使用"},{value:m.memory.total_num-m.memory.used_num,color:"#00a65a",highlight:"#00a65a",label:"空闲"}];var y={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,responsive:true,maintainAspectRatio:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};w.Doughnut(z,y)};var l=function l(){if(!!!$("#diskBarChart").get(0)){return}var C=$("#diskBarChart").get(0).getContext("2d");var A=new Chart(C);var D=[];var z=[];var B=[];angular.forEach(m.fileSystem,function(E){D.push(E.mount);z.push(parseInt(E.usable_number/(1024*1024*1024)));B.push(parseInt((E.total_number-E.usable_number)/(1024*1024*1024)))});var y={labels:D,datasets:[{label:"Electronics",fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:z},{label:"Digital Goods",fillColor:"rgba(60,141,188,0.9)",strokeColor:"rgba(60,141,188,0.8)",pointColor:"#3b8bba",pointStrokeColor:"rgba(60,141,188,1)",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(60,141,188,1)",data:B}]};var w=y;w.datasets[1].fillColor="#00a65a";w.datasets[1].strokeColor="#00a65a";w.datasets[1].pointColor="#00a65a";var x={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',responsive:true,maintainAspectRatio:true};x.datasetFill=false;A.Bar(w,x)};m.cpu_data_loading=false;var r=function r(){u(function(){if(!!!$("#processLineChart").get(0)){return}if(!!!$("#cpuAreaChart").get(0)){return}n()},c)};var n=function n(){m.cpu_data_loading=true;f.getCPU().success(function(w){if(!!!!w){m.cpu=w.parameters.cpu;b()}m.cpu_data_loading=false;r()}).error(function(w){m.cpu_data_loading=false;r()})};m.memory_data_loading=false;var j=function j(){u(function(){if(!!!$("#memoryPieChart").get(0)){return}i()},c)};var i=function i(){m.memory_data_loading=true;f.getMemory().success(function(w){if(!!!!w){m.memory=w.parameters.memory;d()}m.memory_data_loading=false;j()}).error(function(w){m.memory_data_loading=false;j()})};m.disk_data_loading=false;var g=function g(){m.disk_data_loading=true;f.getDisk().success(function(w){if(!!!!w){m.disks=w.parameters.disks}m.disk_data_loading=false}).error(function(w){m.disk_data_loading=false})};m.fileSystem_data_loading=false;var v=function v(){m.fileSystem_data_loading=true;f.getFileSystem().success(function(w){if(!!!!w){m.fileSystem=w.parameters.fileSystem;l()}m.fileSystem_data_loading=false}).error(function(w){m.fileSystem_data_loading=false})};if(!$rootScope.expectedCredentials&&$rootScope.canUseManageFeature){n();i();g();v()}}]}}]);angular.module("system").controller("systemOSInformationController",["$scope","$injector","$timeout",function systemOSInformationController(k,h,b){var g=h.get("$rootScope");var a=h.get("userService");var d=h.get("utilService");var e=h.get("osService");var j=h.get("systemService");k.message={title:"提示",text:""};k.featurePermission=false;k.factoryCertificationPassword="";var c=false;k.certificateFactoryPassword=function i(){if(g.expectedCredentials||!g.canUseManageFeature){k.message.text="没有操作权限";$("#modal-alert-message").modal("show");return}if(k.factoryCertificationPassword==""||k.factoryCertificationPassword.trim()==""){k.message.text="请输入厂家口令";$("#modal-alert-message").modal("show");return}var m=Crypto.SHA256(k.factoryCertificationPassword);var n={token:m,username:a.getCurrentUsername()};if(c){return false}c=true;j.factoryInformationCertificated(n).success(function(o){if(!!!!o&&o.result=="SUCCESS"){k.factoryCertificationPassword="";k.featurePermission=true;l()}else{k.message.text="验证失败";$("#modal-alert-message").modal("show")}c=false}).error(function(o){k.message.text="验证失败";$("#modal-alert-message").modal("show");c=false})};k.data_loading=false;k.canShowCPUInfo=false;k.canShowOSInformation=false;k.info={};var l=function l(){if(k.data_loading){return false}k.data_loading=true;e.getOSInformations().success(function(m){if(!!!!m){k.info=m.parameters}k.data_loading=false}).error(function(m){k.data_loading=false})};if(!g.expectedCredentials&&g.canUseManageFeature){}k.$on("$destroy",function f(){})}]);angular.module("system").controller("systemSandboxController",["$scope","$injector","$interval","$timeout",function systemSandboxController(o,m,g,c){var h=m.get("$q");var k=m.get("$route");var i=m.get("$http");var l=m.get("$routeParams");var d=m.get("$document");var b=m.get("$window");var f=m.get("$location");var p=m.get("$cookieStore");var j=m.get("$rootScope");var e=m.get("utilService");var a=m.get("userService");var n=m.get("systemService")}]);angular.module("system").controller("systemSandboxPcController",["$scope","$injector","$interval","$timeout",function systemSandboxPcController(k,m,l,o){var n=m.get("$q");var i=m.get("$route");var r=m.get("$http");var d=m.get("$routeParams");var p=m.get("$document");var j=m.get("$window");var f=m.get("$location");var q=m.get("$cookieStore");var g=m.get("$rootScope");var e=m.get("utilService");var s=m.get("userService");var b=m.get("systemService");k.message={title:"提示",text:""};k.sandbox_app={sandbox_app_auto_check_version_switch:true,sandbox_app_auto_updated_version_switch:true,sandbox_app_auto_into_url_switch:false,sandbox_app_auto_into_domain_switch:false,sandbox_app_auto_into_url:"",sandbox_last_version:"4.0.1.1",android_last_version:"4.0.1.0",ios_last_version:"4.0.1.0",ios_app_download_url:"https://itunes.apple.com/cn/app/virwork/id1371215960?mt=8"};var h=false;k.saveSystemParameters=function a(){var u=[];for(var t in k.sandbox_app){var v={name:t,value:k.sandbox_app[""+t]};u.push(v);if(t=="sandbox_last_version"){v={name:"sandbox-last-version",value:k.sandbox_app[""+t]};u.push(v)}else{if(t=="android_last_version"){v={name:"android-last-version",value:k.sandbox_app[""+t]};u.push(v)}else{if(t=="ios_last_version"){v={name:"ios-last-version",value:k.sandbox_app[""+t]};u.push(v)}}}}if(h){return false}h=true;b.saveSystemParameters(u).success(function(w){k.message={title:"提示:",text:"保存成功"};$("#modal-alert-message").modal("show");h=false}).error(function(w){k.message={title:"提示:",text:"保存失败:"+w.message};$("#modal-alert-message").modal("show");h=false})};var c=function c(){b.getParameters().success(function(t){if(!!!!t){if(!!!!t.sandbox_last_version){k.sandbox_app.sandbox_last_version=t.sandbox_last_version}if(!!!!t["sandbox-last-version"]){k.sandbox_app.sandbox_last_version=t["sandbox-last-version"]}if(!!!!t.android_last_version){k.sandbox_app.android_last_version=t.android_last_version}if(!!!!t["android-last-version"]){k.sandbox_app.android_last_version=t["android-last-version"]}if(!!!!t["ios-last-version"]){k.sandbox_app.ios_last_version=t["ios-last-version"]}if(!!!!t["ios-last-version"]){k.sandbox_app.ios_last_version=t["ios-last-version"]}if(!!!!t.sandbox_app_auto_check_version_switch){k.sandbox_app.sandbox_app_auto_check_version_switch=e.valueIsTrue(t.sandbox_app_auto_check_version_switch)}if(!!!!t.sandbox_app_auto_updated_version_switch){k.sandbox_app.sandbox_app_auto_updated_version_switch=e.valueIsTrue(t.sandbox_app_auto_updated_version_switch)}if(!!!!t.sandbox_app_auto_into_url_switch){k.sandbox_app.sandbox_app_auto_into_url_switch=e.valueIsTrue(t.sandbox_app_auto_into_url_switch)}if(!!!!t.sandbox_app_auto_into_domain_switch){k.sandbox_app.sandbox_app_auto_into_domain_switch=e.valueIsTrue(t.sandbox_app_auto_into_domain_switch)}if(!!!!t.sandbox_app_auto_into_url){k.sandbox_app.sandbox_app_auto_into_url=t.sandbox_app_auto_into_url}}}).error(function(t){})};if(!g.expectedCredentials&&g.canUseManageFeature){c()}}]);angular.module("system").controller("systemServerController",["$scope","$injector","$interval","$timeout",function systemServerController(m,o,n,q){var p=o.get("$q");var k=o.get("$route");var t=o.get("$http");var f=o.get("$routeParams");var r=o.get("$document");var l=o.get("$window");var i=o.get("$location");var s=o.get("$cookieStore");var j=o.get("$rootScope");var h=o.get("utilService");var u=o.get("userService");var b=o.get("systemService");m.message={title:"提示",text:""};m.server={server_http_port:"80",server_http_port_out:"80",server_https_port:"443",server_https_port_out:"443",server_http2https:"false",vvwork_simplename:"",vvwork_simplename_network_port:"443",vvwork_simplename_network_protocol:"https",vvwork_cdns_client_ip_address:"",vvwork_cdns_feaure_open_switch:""};var g={server_http_port:"server-http-port",server_http_port_out:"server-http-port-out",server_https_port:"server-https-port",server_https_port_out:"server-https-port-out",server_http2https:"server-http2https",vvwork_simplename:"vvwork-simplename",vvwork_simplename_network_port:"vvwork-simplename-network-port",vvwork_simplename_network_protocol:"vvwork-simplename-network-protocol",vvwork_cdns_client_ip_address:"vvwork_cdns_client_ip_address",vvwork_cdns_feaure_open_switch:"vvwork_cdns_feaure_open_switch"};var c={"server-http-port":"server_http_port","server-http-port-out":"server_http_port_out","server-https-port":"server_https_port","server-https-port-out":"server_https_port_out","server-http2https":"server_http2https","vvwork-simplename":"vvwork_simplename","vvwork-simplename-network-port":"vvwork_simplename_network_port","vvwork-simplename-network-protocol":"vvwork_simplename_network_protocol",vvwork_cdns_client_ip_address:"vvwork_cdns_client_ip_address",vvwork_cdns_feaure_open_switch:"vvwork_cdns_feaure_open_switch"};var e=false;m.saveSystemParameters=function a(){if(m.server.vvwork_simplename_network_protocol=="https"){m.server.vvwork_simplename_network_port=m.server.server_https_port_out}else{if(m.server.vvwork_simplename_network_protocol=="http"){m.server.vvwork_simplename_network_port=m.server.server_http_port_out}}var x=[];for(var w in m.server){var v=g[""+w];var y=m.server[""+w];var z={name:v,value:y};x.push(z)}if(e){return false}e=true;b.saveSystemParameters(x).success(function(A){m.message.text="保存成功";$("#modal-alert-message").modal("show");e=false}).error(function(A){m.message.text="保存失败:"+A.message;$("#modal-alert-message").modal("show");e=false})};var d=function d(){b.getParameters().success(function(y){if(!!!!y){for(var w in y){if(!!!!w&&!!!!c[""+w]){var v=c[""+w];var x=y[w];if(w=="vvwork_cdns_feaure_open_switch"){m.server[""+v]=h.valueIsTrue(x)}else{m.server[""+v]=x}}}}}).error(function(v){})};if(!j.expectedCredentials&&j.canUseManageFeature){d()}}]);angular.module("system").controller("systemServerNetworkController",["$scope","$injector",function systemServerNetworkController(o,r){var h=r.get("$rootScope");var u=r.get("userService");var c=r.get("systemService");var f=r.get("osService");o.message={title:"提示",text:""};o.network_info_loading=false;o.network_form_loading=false;o.featurePermission=false;o.factoryCertificationPassword="";var b=false;o.certificateFactoryPassword=function q(){if(h.expectedCredentials||!h.canUseManageFeature){o.message.text="没有操作权限";$("#modal-alert-message").modal("show");return}if(o.factoryCertificationPassword==""||o.factoryCertificationPassword.trim()==""){o.message.text="请输入厂家口令";$("#modal-alert-message").modal("show");return}var v=Crypto.SHA256(o.factoryCertificationPassword);var w={token:v,username:u.getCurrentUsername()};if(b){return false}b=true;c.factoryInformationCertificated(w).success(function(x){if(!!!!x&&x.result=="SUCCESS"){o.factoryCertificationPassword="";o.featurePermission=true;d()}else{o.message.text="验证失败";$("#modal-alert-message").modal("show")}b=false}).error(function(x){o.message.text="验证失败";$("#modal-alert-message").modal("show");b=false})};o.networkIFs=[];var p=function p(){f.getNetwork().success(function(v){if(!!!!v){o.networkIFs=v.parameters.networkIFs;o.server_network.server_network_adapter=n}}).error(function(v){})};var n="";o.server_network={server_network_adapter:"",server_network_ip:"",server_network_netmask:"",server_network_gateway:"",server_network_dns1:"",server_network_dns2:"",server_network_defroute:false};var e="route";var m="route | grep '^default' | grep -o '[^ ]*$'";var a="ip route get 1 | awk '{print $NF;exit}'";var j="ip addr show";var t="ifconfig";var s=function s(x){var v={command:x};var w=true;o.network_info_loading=true;o.network_form_loading=false;c.getCommandResults(v,w).success(function(A){if(!!!!A&&!!!!A.parameters&&!!!!A.parameters.result){o.showTerminalView=true;var z=A.parameters;var B=z.command;if(!!!!B){$(".terminal").append('<p class="terminal-commands"><samp>['+u.getCurrentUsername()+'@VirworkGatewayMachine ~]$</samp><span class="terminal-command">'+B+"</span></p>")}var y=z.result;angular.forEach(y,function(C){C=C.replace("<","&lt;").replace(">","&gt;");C=C.replace("error",'<samp class="terminal-error-tag">error</samp>');C=C.replace("errors",'<samp class="terminal-error-tag">errors</samp>');C=C.replace("failed",'<samp class="terminal-error-tag">failed</samp>');C=C.replace("inactive",'<samp class="terminal-error-tag">inactive</samp>');C=C.replace("FAILURE",'<samp class="terminal-error-tag">FAILURE</samp>');C=C.replace("Active",'<samp class="terminal-success-tag">Active</samp>');C=C.replace("inactive",'<samp class="terminal-error-tag">inactive</samp>');C=C.replace("active",'<samp class="terminal-success-tag">active</samp>');C=C.replace("incomplete",'<samp class="terminal-error-tag">incomplete</samp>');C=C.replace("unavailable",'<samp class="terminal-error-tag">unavailable</samp>');C=C.replace("running",'<samp class="terminal-success-tag">running</samp>');C=C.replace("enabled",'<samp class="terminal-success-tag">enabled</samp>');C=C.replace("Warning",'<samp class="terminal-error-tag">Warning</samp>');C=C.replace("disabled",'<samp class="terminal-error-tag">disabled</samp>');if(!!!!A.success){$(".terminal").append('<p class="terminal-result-row">'+C+"</p>")}else{$(".terminal").append('<p class="terminal-result-row terminal-result-error">'+C+"</p>")}});if(x==e){s(m)}if(x==m){s(a)}if(x==a){s(j)}if(x==j){s(t)}}o.network_info_loading=false}).error(function(y){o.network_info_loading=false})};o.network_info_expanded={shown:false,showin:"",collapsed_clz:"collapsed"};o.network_form_expanded={shown:false,showin:"",collapsed_clz:"collapsed"};o.toggleShowNetwork_info_expanded=function i(){o.network_info_loading=false;o.network_form_loading=false;o.network_form_expanded={shown:false,showin:"",collapsed_clz:"collapsed"};if(o.network_info_expanded.shown){o.network_info_expanded={shown:false,showin:"",collapsed_clz:"collapsed"}}else{$(".terminal").html("");s(e);o.network_info_expanded={shown:true,showin:"in",collapsed_clz:""}}};o.toggleShowNetwork_form_expanded=function i(){o.network_info_loading=false;o.network_form_loading=false;o.network_info_expanded={shown:false,showin:"",collapsed_clz:"collapsed"};if(o.network_form_expanded.shown){o.network_form_expanded={shown:false,showin:"",collapsed_clz:"collapsed"}}else{o.network_form_expanded={shown:true,showin:"in",collapsed_clz:""}}};o.saveNetworkConfig=function l(){if(!!!o.server_network.server_network_adapter){o.message.text="请输入网卡名称";$("#modal-alert-message").modal("show");return}o.message.text="你正在修改服务器网卡配置,将会重启网卡, 是否确认提交?";$("#modal-default").modal("show")};var k=function k(){if(!o.featurePermission){o.message.text="没有权限操作";$("#modal-alert-message").modal("show")}o.message.text="正在重启网卡中, 请稍后...";$("#modal-alert-message").modal("show");c.resetNetworkAdaperConfig(o.server_network).success(function(v){if(v.success){o.message.text="修改网卡成功"}else{o.message.text=v.message}$("#modal-alert-message").modal("show");o.network_info_loading=false;o.network_form_loading=false}).error(function(v){o.message.text="修改失败网卡";$("#modal-alert-message").modal("show");o.network_info_loading=false;o.network_form_loading=false})};o.submitNetWorkConfig=function g(){if(!o.featurePermission){o.message.text="没有权限操作";$("#modal-alert-message").modal("show")}var w=[];for(var v in o.server_network){var x=o.server_network[""+v];var y={name:v,value:x};w.push(y)}o.network_info_loading=false;o.network_form_loading=true;c.saveSystemParameters(w).success(function(z){k()}).error(function(z){o.message.text="保存失败:"+z.message;$("#modal-alert-message").modal("show");o.network_info_loading=false;o.network_form_loading=false})};var d=function d(){c.getParameters().success(function(x){if(!!!!x){for(var v in x){if(v in o.server_network){var w=x[v];o.server_network[""+v]=w;if(v=="server_network_adapter"){n=w}}}}}).error(function(v){})};if(!h.expectedCredentials&&h.canUseManageFeature){p()}}]);angular.module("rest").factory("systemService",["$injector",function systemService(y){var B=y.get("$http");var A=y.get("$q");var D=y.get("userService");var k=y.get("utilService");var p=y.get("$rootScope");var C={};C.getSystemParameters=function d(){var E={};return B({method:"GET",url:k.tomcat_request_host+"/api/tokens/informations",params:E})};C.getWebClientWatermarkSystemConfig=function g(){var E={token:D.getCurrentToken()};return B({method:"GET",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/webSystemConfig/watermark-config",params:E})};C.getVPNCommands=function h(){var E={vvwork_sign_no:D.getCurrentToken(),platformPC:!!!!k.isPCApp()||!!!!p.virworkBoxConnected,hostname:window.location.hostname};return B({method:"GET",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system-configs/user-vpn-configs/"+encodeURIComponent(D.getCurrentUsername()),params:E})};C.getSystemLicenseInformations=function v(){var E={token:D.getCurrentToken(),platformPC:!!!!k.isPCApp()||!!!!p.virworkBoxConnected,hostname:window.location.hostname};return B({method:"GET",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/license-info",params:E})};C.getParameters=function s(){var E={token:D.getCurrentToken()};return B({method:"GET",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/all",params:E})};C.saveSystemParameters=function b(F){var E={token:D.getCurrentToken()};return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/"+encodeURIComponent(D.getCurrentUsername())+"/webSystemConfig/save",params:E,data:F})};C.factoryInformationCertificated=function j(F){var E={token:D.getCurrentToken()};return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/factory/certifit",params:E,data:F})};C.resetNetworkAdaperConfig=function r(F){var E={token:D.getCurrentToken()};return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/system/server-network",params:E,data:F})};C.getCommandResults=function n(F,G){var E={token:D.getCurrentToken()};if(!!!!G){E.nolimit=G}return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/loggers/terminal",params:E,data:F})};C.getLoggers=function x(F){var E={token:D.getCurrentToken()};if(F){if(F.type){E.type=F.type}if(F.operat){E.operat=F.operat}if(F.username){E.username=F.username}if(F.application){E.application=F.application}if(F.startTime){E.startTime=F.startTime}if(F.endTime){E.endTime=F.endTime}}return B({method:"GET",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/form/search-logs",params:E})};C.removeAllLoggers=function c(){var E={token:D.getCurrentToken()};return B({method:"DELETE",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/loggers",params:E})};C.removeLoggersByIdentifiers=function t(F){var E={token:D.getCurrentToken()};return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/loggers/remove",params:E,data:F})};C.uploadAvatarFile=function m(G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("avatar",G);E.append("name",username+".png");return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/avatar",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadLogoFile=function w(G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("logo",G);E.append("name",G.name);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/logo",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadIconFile=function o(G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("icon",G);E.append("name",G.name);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/icon",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadAppIconFile=function u(G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("logo",G);E.append("name",G.name);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/app-icon",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadDatabaseFile=function f(G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("sqlfile",G);E.append("name",G.name);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/execute-db",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadExcelDatabaseFile=function i(H,G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("excelfile",H);E.append("name",H.name);E.append("passwdtype",G);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/execute-db-users",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.userNumberExcelFile=function q(G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("excelfile",G);E.append("name",G.name);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/execute-db-users-work-numbers",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadSandboxApkFile=function l(H,G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("apk",H);E.append("name",H.name);E.append("token",G);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/sandboxapk/upload",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadSandboxUpdateApkFile=function a(H,G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("apk",H);E.append("name",H.name);E.append("token",G);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/sandboxupdateapk/upload",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadAndroidUpdateApkFile=function e(H,G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("apk",H);E.append("name",H.name);E.append("token",G);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/androidupdateapk/upload",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};C.uploadLicenseFile=function z(H,G){var F={token:D.getCurrentToken()};var E=new FormData();E.append("apk",H);E.append("name",H.name);E.append("token",G);return B({method:"POST",url:k.tomcat_request_host+"/api/data/"+encodeURIComponent(D.getDataSource())+"/users/"+encodeURIComponent(D.getCurrentUsername())+"/license/upload",params:F,data:E,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};return C}]);angular.module("system").controller("systemSupportController",["$scope","$injector","$interval","$timeout",function systemSupportController(b,d,e,c){var a=d.get("$rootScope");a.virworkCopy.email="weijunqiang2010@foxmail.com";a.virworkCopy.tel_phone="157 6723 2253";a.virworkCopy.qq="659194256"}]);angular.module("system").controller("systemTerminalCommandController",["$scope","$injector","$interval","$timeout",function systemTerminalCommandController(l,n,m,s){var p=n.get("$q");var j=n.get("$route");var v=n.get("$http");var c=n.get("$routeParams");var t=n.get("$document");var k=n.get("$window");var g=n.get("$location");var u=n.get("$cookieStore");var h=n.get("$rootScope");var e=n.get("utilService");var w=n.get("userService");var a=n.get("systemService");l.ssh_command_key=null;l.ssh_command=null;l.command_parameter=null;l.command_text=null;l.logger_key=null;l.logger_file=null;l.logger_parameter=null;l.toolCommands=[];l.loggerFiles=[];l.showTerminalView=false;l.$watch("ssh_command_key",function(x){if(!!!!x){l.ssh_command=d[x]}else{l.ssh_command=null;l.command_parameter=null;l.command_text=null;l.logger_file=null;l.logger_parameter=null}});l.$watch("logger_key",function(x){if(!!!!x){l.logger_file=d[x]}else{l.logger_file=null;l.logger_parameter=null}});var r=function(z,A,D,y,C,x){var B={name:z,value:A,input:D,options:y,text:"",title:C,isLoggerCommand:x};d[z]=B;l.toolCommands.push(B);return B};var i=function(z,B,x,y){var A={name:z,path:B,input:x,options:y};d[z]=A;return A};var d={};var q="openvpn@server";var o="virwork_svpn@server";var b=function b(){var x=true;r("ip a","ip a",false,{required:false,options:[]},"",!x);r("systemctl status","systemctl status",false,{required:true,options:["vvworkweb","httpd","smb","sshd","firewalld",o,o+"1",o+"2"]},"",!x);r("ping","ping",true,{required:true,options:["-c 5","-c 3"]},"请输入域名或ip地址:___.___.___",!x);r("ifconfig",'ifconfig | egrep "inet|en|eth|tun"',false,{required:false,options:[]},"",!x);r("nslookup ","nslookup",true,{required:false,options:[]},"请输入附加参数内容",!x);r("whois","whois",true,{required:false,options:[]},"请输入附加参数内容",!x);r("traceroute","traceroute",true,{required:false,options:[]},"请输入附加参数内容",!x);r("cat","cat",false,{required:false,options:[]},"",x);r("tail","tail",false,{required:false,options:[]},"",x);r("head","head",false,[],"",x);r("tail -n 100","tail -n 100",false,{required:false,options:[]},"",x);l.loggerFiles.push(i("系统日志","/var/log/messages",false,{required:false,options:[]}));var B=[];var A=e.time.getTime_long();for(var z=0;z<7;z++){var y=e.time.getDateTime_YMD4Time(A-24*60*60*1000*z);B.push(y)}l.loggerFiles.push(i("跨屏系统运行日志","/usr/vvdata/cps_home/tomcat/logs/catalina.%.out",false,{required:true,options:B}));l.loggerFiles.push(i("跨屏系统请求日志","/usr/vvdata/cps_home/tomcat/logs/catalina.%.log",false,{required:true,options:B}));l.loggerFiles.push(i("云盘系统访问成功日志","/var/log/httpd/access_log",false,{required:false,options:[]}));l.loggerFiles.push(i("云盘系统访问错误日志","/var/log/httpd/error_log",false,{required:false,options:[]}));l.loggerFiles.push(i("SSH服务连接日志","/var/log/secure",false,{required:false,options:[]}));l.loggerFiles.push(i("数据库运行日志","/var/log/mariadb/mariadb.log",false,{required:false,options:[]}))};l.message={title:"提示:",text:""};l.network_info_loading=false;l.getCommandResults=function f(){if(!!!l.ssh_command){l.message.text="请选择工具命令";$("#modal-alert-message").modal("show");return false}var x={command:l.ssh_command.value};if(l.ssh_command.isLoggerCommand){if(!!!l.logger_key||!!!l.logger_file){l.message.text="请选择日志文件";$("#modal-alert-message").modal("show");return false}if(l.logger_file.options.required&&!!!l.logger_parameter){l.message.text="请选择日志文件的日期";$("#modal-alert-message").modal("show");return false}var z=l.logger_file.path;x.text=z.replace("%",l.logger_parameter)}if(l.ssh_command.options.required){if(!!!l.command_parameter){l.message.text="请选择指定参数";$("#modal-alert-message").modal("show");return false}x.parameter=l.command_parameter}if(l.ssh_command.input){if(!!!l.command_text){l.message.text="请输入其他参数";$("#modal-alert-message").modal("show");return false}x.text=l.command_text}var y=false;if(l.network_info_loading){return false}l.network_info_loading=true;a.getCommandResults(x,y).success(function(C){if(!!!!C&&!!!!C.parameters&&!!!!C.parameters.result){l.showTerminalView=true;var B=C.parameters;var D=B.command;if(!!!!D){$(".terminal").append('<p class="terminal-commands"><samp>['+w.getCurrentUsername()+'@VirworkGatewayMachine ~]$</samp><span class="terminal-command">'+D+"</span></p>")}var A=B.result;angular.forEach(A,function(E){E=E.replace("<","&lt;").replace(">","&gt;");E=E.replace("error",'<samp class="terminal-error-tag">error</samp>');E=E.replace("errors",'<samp class="terminal-error-tag">errors</samp>');E=E.replace("failed",'<samp class="terminal-error-tag">failed</samp>');E=E.replace("inactive",'<samp class="terminal-error-tag">inactive</samp>');E=E.replace("FAILURE",'<samp class="terminal-error-tag">FAILURE</samp>');E=E.replace("Active",'<samp class="terminal-success-tag">Active</samp>');E=E.replace("inactive",'<samp class="terminal-error-tag">inactive</samp>');E=E.replace("active",'<samp class="terminal-success-tag">active</samp>');E=E.replace("incomplete",'<samp class="terminal-error-tag">incomplete</samp>');E=E.replace("unavailable",'<samp class="terminal-error-tag">unavailable</samp>');E=E.replace("running",'<samp class="terminal-success-tag">running</samp>');E=E.replace("enabled",'<samp class="terminal-success-tag">enabled</samp>');E=E.replace("Warning",'<samp class="terminal-error-tag">Warning</samp>');E=E.replace("disabled",'<samp class="terminal-error-tag">disabled</samp>');if(!!!!C.success){$(".terminal").append('<p class="terminal-result-row">'+E+"</p>")}else{$(".terminal").append('<p class="terminal-result-row terminal-result-error">'+E+"</p>")}})}l.network_info_loading=false}).error(function(A){l.network_info_loading=false})};if(!h.expectedCredentials&&h.canUseManageFeature){b()}}]);angular.module("system").controller("systemToolsSshController",["$scope","$injector","$interval","$timeout",function systemToolsSshController(o,m,g,c){var h=m.get("$q");var k=m.get("$route");var i=m.get("$http");var l=m.get("$routeParams");var d=m.get("$document");var b=m.get("$window");var f=m.get("$location");var p=m.get("$cookieStore");var j=m.get("$rootScope");var e=m.get("utilService");var a=m.get("userService");var n=m.get("systemService")}]);angular.module("system").controller("systemWebsiteController",["$scope","$injector","$interval","$timeout",function systemWebsiteController(k,m,l,o){var n=m.get("$q");var i=m.get("$route");var r=m.get("$http");var d=m.get("$routeParams");var p=m.get("$document");var j=m.get("$window");var f=m.get("$location");var q=m.get("$cookieStore");var g=m.get("$rootScope");var e=m.get("utilService");var s=m.get("userService");var b=m.get("systemService");k.message={title:"",text:""};k.logoImg=null;k.tricolorImg=null;var h={logo_icon:"/userdata/logo.png",tricolor_img:"/userdata/tricolor.png?time=1543248400394"};k.logoImg_src=h.logo_icon;k.tricolorImg_src=h.tricolor_img;k.reloadImg=function(){k.logoImg_src=h.logo_icon+"?v="+(new Date().getTime());k.tricolorImg_src=h.tricolor_img+"?v="+(new Date().getTime())};k.uploadIcon=function a(){if(!!!k.logoImg){k.message.text="请选择图片文件(*.png或*.jpg的图片文件)";$("#modal-alert-message").modal("show");return false}b.uploadIconFile(k.logoImg).success(function(t){k.logoImg=null;k.message.text="上传成功";$("#modal-alert-message").modal("show");o(function(){k.reloadImg()},2000)}).error(function(t){k.message.text="上传失败:"+t.message;$("#modal-alert-message").modal("show")})};k.uploadTricolorImg=function c(){if(!!!k.tricolorImg){k.message.text="请选择图片文件(*.png或*.jpg的图片文件)";$("#modal-alert-message").modal("show");return false}b.uploadLogoFile(k.tricolorImg).success(function(t){k.logoImg=null;k.message.text="上传成功";$("#modal-alert-message").modal("show");o(function(){k.reloadImg()},2000)}).error(function(t){k.message.text="上传失败:"+t.message;$("#modal-alert-message").modal("show")})};if(!g.expectedCredentials&&g.canUseManageFeature){}}]);angular.module("index").config(["$provide",function(d){var c={};d.decorator("$templateCache",["$delegate",function b(e){var f=angular.extend({},e);f.put=function g(h){delete c[h];return e.put.apply(this,arguments)};return f}]);d.decorator("$templateRequest",["$delegate","$injector",function a(i,p){var j=p.get("$q");var m=function m(s,q){this.apply=function r(t,u){m.Operations[s](t,q,u)}};m.Operations={before:function l(r,q,s){r.find(q).before(s)},after:function e(r,q,s){r.find(q).after(s)},replace:function g(r,q,s){r.find(q).replaceWith(s)},"before-children":function f(r,q,s){r.find(q).prepend(s)},"after-children":function k(r,q,s){r.find(q).append(s)},"replace-children":function o(r,q,s){r.find(q).empty().append(s)}};var h=function h(q,r){angular.forEach(r,function s(x){var w=$(x);var u=[];w=w.filter(function v(z,A){if(A.tagName!=="META"){return true}var y=A.getAttribute("name");if(!y||!(y in m.Operations)){return true}var B=A.getAttribute("content");if(!B){return true}u.push(new m(y,B));return false});angular.forEach(u,function t(y){y.apply(q,w)})})};var n=function n(r){var q=j.defer();var t=c[r];if(t){t.then(q.resolve,q.reject);return q.promise}i.apply(this,arguments).then(function s(w){var u=$("<div></div>").html(w);var v=[];h(u,v);q.resolve.call(this,u.html())},q.reject);c[r]=q.promise;return q.promise};return n}])}]);angular.module("templates-main",["admin-app/application-program/templates/application-program-manage.html","admin-app/application-program/templates/application-program-new.html","admin-app/application-program/templates/application-program-view.html","admin-app/application-sso/templates/application-sso-manage.html","admin-app/application-sso/templates/application-sso-view.html","admin-app/application/templates/application-manage.html","admin-app/application/templates/application-new.html","admin-app/application/templates/application-session-view.html","admin-app/application/templates/application-store-app-new.html","admin-app/application/templates/application-store-view.html","admin-app/application/templates/application-view.html","admin-app/department/templates/department-manage.html","admin-app/department/templates/department-new.html","admin-app/department/templates/department-view.html","admin-app/download/templates/download.html","admin-app/home/templates/home.html","admin-app/index/templates/manage-home-login-page.html","admin-app/index/templates/manage-home-page.html","admin-app/index/templates/modal-alert-message.html","admin-app/index/templates/platform-footer.html","admin-app/index/templates/system-os-char.html","admin-app/machine/templates/machine-manage.html","admin-app/machine/templates/machine-new.html","admin-app/machine/templates/machine-view.html","admin-app/network-vpn/templates/network-user-vpn-role-view.html","admin-app/network-vpn/templates/network-vpn-role-view.html","admin-app/network-vpn/templates/network-vpn-router-view.html","admin-app/network-vpn/templates/network-vpn-server-machine-view.html","admin-app/network-vpn/templates/network-vpn-strategy-view.html","admin-app/network-vpn/templates/network-vpn-subnet-view.html","admin-app/next-vpn/templates/next-vpn-view.html","admin-app/next-vpn/templates/vpn-server-peer.html","admin-app/personal/templates/personal-info.html","admin-app/role/templates/role-manage.html","admin-app/role/templates/role-new.html","admin-app/role/templates/role-view.html","admin-app/system/templates/system-auth-client-security.html","admin-app/system/templates/system-auth-login.html","admin-app/system/templates/system-auth-vpn.html","admin-app/system/templates/system-auth-watermark.html","admin-app/system/templates/system-cloudstorage.html","admin-app/system/templates/system-license.html","admin-app/system/templates/system-logger.html","admin-app/system/templates/system-os-information.html","admin-app/system/templates/system-sandbox-pc.html","admin-app/system/templates/system-sandbox.html","admin-app/system/templates/system-servers-network.html","admin-app/system/templates/system-servers.html","admin-app/system/templates/system-support.html","admin-app/system/templates/system-terminal-command.html","admin-app/system/templates/system-tools-ssh.html","admin-app/system/templates/system-website.html","admin-app/system/templates/virworkCloudstorageView.html","admin-app/users/templates/users-manage.html","admin-app/users/templates/users-new-basic-input.html","admin-app/users/templates/users-new-worknumber-input.html","admin-app/users/templates/users-new.html","admin-app/users/templates/users-ogz-view.html","admin-app/users/templates/users-online-view.html","admin-app/users/templates/users-undisabled-ips.html","admin-app/users/templates/users-undisabled.html","admin-app/users/templates/users-view.html","admin-app/virworkbox/templates/index.html","admin-app/virworkbox/templates/pc-app.html","admin-app/virworkbox/templates/pc-browser.html","admin-app/virworkbox/templates/update.html"]);angular.module("admin-app/application-program/templates/application-program-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/application-program/templates/application-program-manage.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">编辑应用程序</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body row">\n				    <div class="col-md-6">\n				    	<div class="form-group">\n							<label  class="col-sm-2 control-label">名称</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.name" placeholder="请输入应用程序名称">\n							</div>\n						</div>\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">账户模式</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.connection_type" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option value="private">个人账户</option>\n									<option value="public">公共账户</option>\n								</select>\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!openProgramAccountTypeUserModel">\n							<label  class="col-sm-2 control-label">用户名</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.username" placeholder="请输入打开应用程序的账户名">\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!openProgramAccountTypeUserModel">\n							<label  class="col-sm-2 control-label">密码</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.password" placeholder="请输入打开应用程序的账户密码">\n							</div>\n						</div>\n						\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">应用终端显示模式</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.display_type" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option value="auto">自适应终端屏幕</option>\n									<option value="setting">指定宽高</option>\n								</select>\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!displayInitScrrentModel">\n							<label  class="col-sm-2 control-label">宽度</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.width" placeholder="请输入屏幕显示宽度">\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!displayInitScrrentModel">\n							<label  class="col-sm-2 control-label">高度</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.height" placeholder="请输入屏幕显示高度">\n							</div>\n						</div>\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">键盘布局</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.server_layout" disabled="disabled" class="form-control select2">\n									<option value="zh-us-qwerty">中文</option>\n								</select>\n							</div>\n						</div>\n						\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">分辨率(DPI)</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.dpi" disabled="disabled" class="form-control select2">\n									<option value="96">96</option>\n								</select>\n							</div>\n						</div>\n						\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">颜色深度</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.color_depth" class="form-control select2">\n									<option ng-repeat="colorDepth in displayColorDepths | orderBy:\'value\'" value="{{colorDepth.value}}">{{colorDepth.name}}</option>\n									<option value="">--请选择--</option>\n									<option value="32">高清色</option>\n									<option value="24">真彩色</option>\n									<option value="16">标准色</option>\n									<option value="8">浏览色</option>\n								</select>\n							</div>\n						</div>\n				    </div>\n				    \n					<div class="col-md-6">\n				    	<div class="form-group"\n							title="">\n							<label  class="col-sm-2 control-label">分配主机</label>\n							<div class="col-sm-10">\n								<select ng-model="program.machineIdentifier" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option  ng-repeat="machine in systemMachines | orderBy:\'name\'" value="{{machine.identifier}}">{{machine.name}}({{machine.hostname}})</option>\n								</select>\n							</div>\n						</div>\n						\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">应用程序启动路径</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program" \n									placeholder="请输入应用程序启动路径">\n							</div>\n						</div>\n						\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">兼容模式启动参数(选填)</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program_parameter" \n									placeholder="请输入兼容模式启动参数">\n							</div>\n						</div>\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">非兼容模式启动参数(选填)</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program_parameter2" \n									placeholder="请输入非兼容模式启动参数">\n							</div>\n						</div>\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">辅助进程(选填)</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program_undefined" \n									placeholder="请输入应用程序辅助进程">\n							</div>\n						</div>\n						\n				    </div>\n					\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveProgram()">保存</button>\n					 <button type="button" class="btn btn-block btn-danger btn-lg pull-right" \n                      data-toggle="modal" data-target="#modal-delete-program" \n                      ng-if="program.identifier">删除</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n        \n	<div class="modal fade" id="modal-delete-program">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title">提示:</h4>\n				</div>\n				<div class="modal-body">\n					<p>删除后数据将无法恢复!确认要删除当前应用程序吗?</p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteProgram()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	\n	 \n	<modal-alert-message></modal-alert-message>\n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application-program/templates/application-program-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/application-program/templates/application-program-new.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">新增应用程序</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body row">\n				    <div class="col-md-6">\n				    	<div class="form-group">\n							<label  class="col-sm-2 control-label">名称</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.name" placeholder="请输入应用程序名称">\n							</div>\n						</div>\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">账户模式</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.connection_type" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option value="private">个人账户</option>\n									<option value="public">公共账户</option>\n								</select>\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!openProgramAccountTypeUserModel">\n							<label  class="col-sm-2 control-label">用户名</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.username" placeholder="请输入打开应用程序的账户名">\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!openProgramAccountTypeUserModel">\n							<label  class="col-sm-2 control-label">密码</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.password" placeholder="请输入打开应用程序的账户密码">\n							</div>\n						</div>\n						\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">应用终端显示模式</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.display_type" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option value="auto">自适应终端屏幕</option>\n									<option value="setting">指定宽高</option>\n								</select>\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!displayInitScrrentModel">\n							<label  class="col-sm-2 control-label">宽度</label>\n	\n							<div class="col-sm-10">\n								<input type="number" class="form-control"\n									ng-model="program.parameters.width" placeholder="请输入屏幕显示宽度">\n							</div>\n						</div>\n						\n						<div class="form-group" title="" ng-show="!displayInitScrrentModel">\n							<label  class="col-sm-2 control-label">高度</label>\n	\n							<div class="col-sm-10">\n								<input type="number" class="form-control"\n									ng-model="program.parameters.height" placeholder="请输入屏幕显示高度">\n							</div>\n						</div>\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">键盘布局</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.server_layout" disabled="disabled" class="form-control select2">\n									<option value="zh-us-qwerty">中文</option>\n								</select>\n							</div>\n						</div>\n						\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">分辨率(DPI)</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.dpi" disabled="disabled" class="form-control select2">\n									<option value="96">96</option>\n								</select>\n							</div>\n						</div>\n						\n						\n						<div class="form-group" title="">\n							<label  class="col-sm-2 control-label">颜色深度</label>\n							<div class="col-sm-10">\n								<select ng-model="program.parameters.color_depth" class="form-control select2">\n									<option ng-repeat="colorDepth in displayColorDepths | orderBy:\'value\'" value="{{colorDepth.value}}">{{colorDepth.name}}</option>\n									<option value="">--请选择--</option>\n									<option value="32">高清色</option>\n									<option value="24">真彩色</option>\n									<option value="16">标准色</option>\n									<option value="8">浏览色</option>\n								</select>\n							</div>\n						</div>\n				    </div>\n				    \n					<div class="col-md-6">\n				    	<div class="form-group"\n							title="">\n							<label  class="col-sm-2 control-label">分配主机</label>\n							<div class="col-sm-10">\n								<select ng-model="program.machineIdentifier" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option  ng-repeat="machine in systemMachines | orderBy:\'name\'" value="{{machine.identifier}}">{{machine.name}}({{machine.hostname}})</option>\n								</select>\n							</div>\n						</div>\n						\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">应用程序启动路径</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program" \n									placeholder="请输入应用程序启动路径">\n							</div>\n						</div>\n						\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">兼容模式启动参数(选填)</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program_parameter" \n									placeholder="请输入兼容模式启动参数">\n							</div>\n						</div>\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">非兼容模式启动参数(选填)</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program_parameter2" \n									placeholder="请输入非兼容模式启动参数">\n							</div>\n						</div>\n						\n						<div class="form-group">\n							<label  class="col-sm-2 control-label">辅助进程(选填)</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="program.parameters.initial_program_undefined" \n									placeholder="请输入应用程序辅助进程">\n							</div>\n						</div>\n						\n				    </div>\n					\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveProgram()">保存</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	<modal-alert-message></modal-alert-message>\n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application-program/templates/application-program-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/application-program/templates/application-program-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">应用程序列表\n				   <small ng-click="showAddNewProgram()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增应用程序</span>\n		            </small> \n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n			<!-- Info boxes -->\n			<div class="row box-body">\n			    \n				<div class="col-md-6 col-sm-6 col-xs-12" ng-repeat="program in programs | orderBy:\'name\'">\n					<div class="info-box">\n						<span class="info-box-icon"> <img\n							class="application-list-icon" alt=""\n							ng-src="/{{program.icon}}">\n						</span>\n\n						<div class="info-box-content">\n							<a class="info-box-text" ng-bind="program.name" \n							ng-href="#/system-manage/application-program/manage/{{program.identifier}}"></a>\n							<span\n								class="info-box-text">所在主机:{{program.machine.name}}({{program.machine.hostname}}) </span>\n						    <span\n								class="info-box-number"> <a class="fa fa-edit edit-icon" title="编辑"\n								ng-href="#/system-manage/application-program/manage/{{program.identifier}}"></a> <a\n								class="fa fa-trash-o delete-icon"  title="删除" data-toggle="modal"\n								 href="javascript:void(0)" ng-click="setDeleteApplicationProgram(program)"\n								data-target="#modal-default"></a>\n							</span>\n						</div>\n						<!-- /.info-box-content -->\n					</div>\n					<!-- /.info-box -->\n				</div>\n			</div>\n\n			\n			\n			<div class="overlay" ng-show="data_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteApplicationProgram()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n	\n	<modal-alert-message></modal-alert-message>\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application-sso/templates/application-sso-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/application-sso/templates/application-sso-manage.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">设置单点(SSO)登录应用账户信息\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n			<!-- Info boxes -->\n			<div class="row box-body">\n				<div class="col-xs-12">\n					<div class="info-box">\n						<table class="table table-hover">\n			                <tr>\n			                    <th>应用</th>\n			                    <th>状态</th>\n			                    <th></th>\n			                 </tr>\n			                 <tr ng-repeat="ssoConnection in ssoConnections" ng-if="ssoConnection.fieldType != \'\'">\n			                 	 <td ng-bind="ssoConnection.connection.name"></td>\n			                 	 <td>\n				                 	  <span class="label label-success" ng-if="ssoConnection.isConfig">已设置</span>\n                  					  <span class="label label-danger" ng-if="!ssoConnection.isConfig">还未设置</span>\n			                 	 </td>\n			                 	 <td>\n			                 	 	<a title="编辑" ng-click="editSsoConnectionFieldValues(ssoConnection)"\n									ng-href="javascript:void(0)">编辑</a>\n			                 	 </td>\n			                 </tr>\n			            </table>\n					    <!-- /.info-box -->\n				</div>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default"  data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n	\n	\n	<div class="modal fade" id="modal-application-sso-setting">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="currentUserSSOApplication.connection.name"></h4>\n				</div>\n				<div class="modal-body">\n						<div class="box-body">\n						      <form class="form-horizontal">\n								<div class="form-group" ng-repeat="fieldvalue in currentUserSSOApplication.userFieldValues">\n									<label  class="col-sm-2 control-label" ng-bind="fieldvalue.field"></label>\n			\n									<div class="col-sm-10">\n										<input type="text" name="sso_application_field" class="form-control"\n											ng-model="fieldvalue.value" placeholder="{{fieldvalue.field}}">\n									</div>\n								</div>\n							</form>\n						</div>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-primary" ng-click="saveUserSsoConnectionFieldValuesConfig()">保存</button>\n					<button type="button" class="btn btn-danger" ng-click="removeUserSsoConnectionFieldValuesConfig()" \n				ng-if="currentUserSSOApplication.isConfig">清除配置</button>\n					<button type="button" class="btn btn-default"  data-dismiss="modal" ng-click="cancelUserSsoConnectionFieldValuesConfig()">取消</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n	\n	\n</div>')}]);angular.module("admin-app/application-sso/templates/application-sso-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/application-sso/templates/application-sso-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">设置单点(SSO)登录应用\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n			<!-- Info boxes -->\n			<div class="row box-body">\n				<div class="col-xs-12">\n					<div class="info-box">\n					    <table class="table table-hover">\n			                <tr>\n			                    <th>应用</th>\n			                    <th>SSO模式</th>\n			                    <th></th>\n			                 </tr>\n			                 <tr ng-repeat="application in applications | orderBy:\'name\'">\n			                 	 <td ng-bind="application.name"></td>\n			                 	 <td>\n				                 	 <div>\n						                <label>\n						                  <input type="radio" ng-change="closeApplicationSSOModel(application)" ng-model="application.sso_fields_type" value="" class="minimal">不启用\n						                </label>\n						                <label>\n						                  <input type="radio" ng-change="openApplicationSSOModel(application)" ng-model="application.sso_fields_type" value="sandbox_pass" class="minimal"> 通用模式\n						                </label>\n						              </div>\n			                 	 </td>\n			                 	 <td>\n			                 	 	<a title="编辑" ng-show="application.is_sso_application" ng-click="editApplicationSSOFields(application)"\n									ng-href="javascript:void(0)">编辑</a>\n			                 	 </td>\n			                 </tr>\n			            </table>\n					<!-- /.info-box -->\n				</div>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default"  data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n	\n	\n	<div class="modal fade" id="modal-application-sso-setting">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="currentSsoApplication.name"></h4>\n				</div>\n				<div class="modal-body">\n						<div class="box-body">\n						      <form class="form-horizontal" ng-show="!showAddNewSSOFieldView">\n								<div class="form-group">\n									<label  class="col-sm-2 control-label">字段顺序</label>\n			\n									<div class="col-sm-10">\n										<input type="text" name="sso_application_field" class="form-control"\n											ng-model="currentSsoApplication.fields" placeholder="请选择应用字段">\n									</div>\n								</div>\n								\n								<div class="form-group">\n									<label  class="col-sm-2 control-label">字段</label>\n			\n									<div class="col-sm-10">\n									    <a ng-href="javascript:void(0);" ng-click="addSystemSSOField()" class="">[新增字段]</a>\n									    <a ng-repeat="field in sysFields | orderBy:\'field\'" ng-if="field.type == \'STRING\'" class="sso-field" \n												ng-click="addField2Config(field)" title="{{field.description}}">\n													{{field.field}}</a>\n									</div>\n								</div>\n								\n								<div class="form-group">\n									<label  class="col-sm-2 control-label">特殊键</label>\n			\n									<div class="col-sm-10">\n										 <a ng-repeat="field in sysFields | orderBy:\'field\'" ng-if="field.type == \'KEY\'"\n											title="{{field.description}}" ng-click="addField2Config(field)" class="sso-field sso-field-key">\n												{{field.field}}</a>\n									</div>\n								</div>\n								\n								\n								<div class="form-group">\n									<label  class="col-sm-2 control-label"></label>\n			\n									<div class="col-sm-10 error-message" ng-bind="errorMessage">\n									</div>\n								</div>\n							</form>\n							<form class="form-horizontal" ng-show="showAddNewSSOFieldView">\n								\n								\n								<div class="form-group">\n									<label  class="col-sm-2 control-label">新增字段</label>\n			\n									<div class="col-sm-10">\n									     <input type="text" class="form-control"\n											ng-model="newField.field" placeholder="请输入字段名称">\n									</div>\n								</div>\n								\n								\n								<div class="form-group">\n									<label  class="col-sm-2 control-label">描述(选填)</label>\n			\n									<div class="col-sm-10">\n									     <input type="text" class="form-control" ng-model="newField.description" placeholder="字段描述...">\n									</div>\n								</div>\n								\n								<div class="form-group">\n									<label  class="col-sm-2 control-label"></label>\n			\n									<div class="col-sm-10 error-message" ng-bind="errorMessage">\n									</div>\n								</div>\n								 \n							</form>\n						</div>\n				</div>\n				<div class="modal-footer" ng-show="!showAddNewSSOFieldView">\n					<button type="button" class="btn btn-primary "  data-dismiss="modal" ng-click="saveSSOConnectionConfig()">保存</button>\n					<button type="button" class="btn btn-default"  data-dismiss="modal" ng-click="cancelSaveSSOConnectionConfig()">取消</button>\n				</div>\n				<div class="modal-footer" ng-show="showAddNewSSOFieldView">\n					<button type="button" class="btn btn-primary" ng-click="saveSSOField()">保存</button>\n					<button type="button" class="btn btn-default" ng-click="cancelAddSSOField()">取消</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n	\n	\n</div>')}]);angular.module("admin-app/application/templates/application-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/application/templates/application-manage.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">发布应用</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">名称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.name" id="name" placeholder="请输入应用名称">\n						</div>\n					</div>\n\n					<div class="form-group"\n						title="虚拟集成模式:多窗体SSL虚拟集成方式;虚拟加速模式:单窗体SSL虚拟加速方式;实际本地模式:纯SSLVPN模式;">\n						<label  class="col-sm-2 control-label">应用使用模式</label>\n						<div class="col-sm-10">\n							<select ng-model="application.type" class="form-control select2">\n								<option value="">--请选择--</option>\n								<option value="clint-remote-app">虚拟集成模式</option>\n								<option value="clint-desktop-app">虚拟加速模式</option>\n								<option value="clint-browser-type">实际本地模式</option>\n							</select>\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label  class="col-sm-2 control-label"></label>\n						<div class="col-sm-10">\n							<small>(虚拟集成模式:多窗体SSL虚拟集成方式; 虚拟加速模式:单窗体SSL虚拟加速方式;\n								实际本地模式:纯SSLVPN模式, 纯网页本地打开;)</small>\n						</div>\n					</div>\n					<div class="form-group"\n						ng-show="application.type == \'clint-browser-type\'">\n						<label  class="col-sm-2 control-label">应用链接地址</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.url" id="url" placeholder="请输入应用链接地址: https://192.168.10.120">\n						</div>\n					</div>\n\n					<div class="form-group"\n						ng-show="application.type != \'clint-browser-type\'">\n						<label  class="col-sm-2 control-label">SSLVPN兼容模式设置</label>\n\n						<div class="col-sm-10">\n							<div class="checkbox">\n								<label> <input type="checkbox" value="true"\n									ng-model="connectionPermissions.browserModel" id="browserModel">\n									当VPN未开启时, 无法启动应用的虚拟加速模式或虚拟集成模式时, 不再以兼容模式访问应用.\n								</label>\n							</div>\n						</div>\n					</div>\n\n\n					<div class="form-group"\n						ng-show="application.type != \'clint-browser-type\'">\n						<label  class="col-sm-2 control-label">分配程序</label>\n\n						<div class="col-sm-10">\n							<!-- Small boxes (Stat box) -->\n							<div class="row">\n\n								<div class="col-md-6 col-sm-6 col-xs-12">\n									<!-- small box -->\n									<div class="small-box bg-green">\n										<div class="inner" style="text-align: left;">\n											<h3>\n												已<sup style="font-size: 20px">分配程序列表</sup>\n											</h3>\n											<div class="checkbox" ng-repeat="software in addedApplicationSoftwares | orderBy:\'name\'">\n												<label> \n													<input type="checkbox" ng-model="software.selected">{{software.name}}@{{software.machine.name}}({{software.machine.hostname}})\n												</label>\n											</div>\n										</div>\n										<div class="icon" ng-click="removeApplicationSoftwares()">\n											<i class="fa fa-arrow-circle-right"></i>\n										</div>\n										<a href="javascript:void(0)" class="small-box-footer" ng-click="removeApplicationSoftwares()"> 移除 <i\n											class="fa fa-arrow-circle-right"></i>\n										</a>\n									</div>\n								</div>\n								<!-- ./col -->\n								<div class="col-md-6 col-sm-6 col-xs-12">\n									<!-- small box -->\n									<div class="small-box bg-yellow">\n										<div class="inner" style="text-align: left;">\n											<h3>\n												未<sup style="font-size: 20px">分配程序列表</sup>\n											</h3>\n\n											<div class="checkbox" ng-repeat="software in applicationSoftwares  | orderBy:\'name\'">\n												<label> \n													<input type="checkbox" ng-model="software.selected">{{software.name}}@{{software.machine.name}}({{software.machine.hostname}})\n												</label>\n											</div>\n										</div>\n										<div class="icon" ng-click="addApplicationSoftwares()">\n											<i class="fa fa-arrow-circle-left"></i>\n										</div>\n										<a href="javascript:void(0)" class="small-box-footer" ng-click="addApplicationSoftwares()"> <i\n											class="fa fa-arrow-circle-left"></i>添加\n										</a>\n									</div>\n								</div>\n								<!-- ./col -->\n\n							</div>\n							<!-- /.row -->\n						</div>\n					</div>\n\n                    \n					<div class="form-group">\n						<div class="col-sm-2 control-label">\n							<div>应用图标</div>\n							<div  type="file" ngf-select="uploadApplicationIcon($file, $invalidFiles)"\n          						accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">\n							<img ng-src="/{{application.icon}}" \n									class="application-list-icon"/>\n							</div>\n							<div  >\n								<small>点击图片可上传图标,或选择右侧系统图标作为应用图标</small>\n							</div>\n						</div>\n\n						<div class="col-sm-10">\n							<div class="row">\n\n								<div class="col-md-3 col-sm-3 col-xs-3" ng-repeat="icon in icons">\n									<img ng-src="/images/app-icons/{{icon}}" \n									class="application-list-icon" ng-click="setAppIcon(icon)"/>\n								</div>\n							</div>	\n						</div>\n					</div>\n					<!-- <div class="form-group">\n                  <label  class="col-sm-2 control-label">描述</label>\n\n                  <div class="col-sm-10">\n                    <textarea class="form-control" rows="3" ng-model="machine.description" id="description" placeholder="描述..."></textarea>\n                  </div>\n                </div> -->\n\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveApplication()">保存</button>\n					 <button type="button" class="btn btn-block btn-danger btn-lg pull-right" \n                      data-toggle="modal" data-target="#modal-delete-application" \n                      ng-if="application.identifier">删除</button>\n                     <button type="button" class="btn btn-block btn-lg pull-right" ng-click="back()">取消</button>\n                \n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n        \n	<div class="modal fade" id="modal-delete-application">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title">提示:</h4>\n				</div>\n				<div class="modal-body">\n					<p>删除后数据将无法恢复!确认要删除当前应用吗?</p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteApplication()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n        \n   \n     \n	<modal-alert-message></modal-alert-message>\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application/templates/application-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/application/templates/application-new.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">发布应用</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">名称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.name" id="name" placeholder="请输入应用名称">\n						</div>\n					</div>\n\n					<div class="form-group"\n						title="虚拟集成模式:多窗体SSL虚拟集成方式;虚拟加速模式:单窗体SSL虚拟加速方式;实际本地模式:纯SSLVPN模式;">\n						<label  class="col-sm-2 control-label">应用使用模式</label>\n						<div class="col-sm-10">\n							<select ng-model="application.type" class="form-control select2">\n								<option value="">--请选择--</option>\n								<option value="clint-remote-app">虚拟集成模式</option>\n								<option value="clint-desktop-app">虚拟加速模式</option>\n								<option value="clint-browser-type">实际本地模式</option>\n							</select>\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label  class="col-sm-2 control-label"></label>\n						<div class="col-sm-10">\n							<small>(虚拟集成模式:多窗体SSL虚拟集成方式; 虚拟加速模式:单窗体SSL虚拟加速方式;\n								实际本地模式:纯SSLVPN模式, 纯网页本地打开;)</small>\n						</div>\n					</div>\n					<div class="form-group"\n						ng-show="application.type == \'clint-browser-type\'">\n						<label  class="col-sm-2 control-label">应用链接地址</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.url" id="url" placeholder="请输入应用链接地址: https://192.168.10.120">\n						</div>\n					</div>\n\n					<div class="form-group"\n						ng-show="application.type != \'clint-browser-type\'">\n						<label  class="col-sm-2 control-label">SSLVPN兼容模式设置</label>\n\n						<div class="col-sm-10">\n							<div class="checkbox">\n								<label> <input type="checkbox"\n									ng-model="connectionPermissions.browserModel" id="browserModel">\n									当VPN未开启时, 无法启动应用的虚拟加速模式或虚拟集成模式时, 不再以兼容模式访问应用.\n								</label>\n							</div>\n						</div>\n					</div>\n\n\n					<div class="form-group"\n						ng-show="application.type != \'clint-browser-type\'">\n						<label  class="col-sm-2 control-label">分配程序</label>\n\n						<div class="col-sm-10">\n							<!-- Small boxes (Stat box) -->\n							<div class="row">\n\n								<div class="col-md-6 col-sm-6 col-xs-12">\n									<!-- small box -->\n									<div class="small-box bg-green">\n										<div class="inner" style="text-align: left;">\n											<h3>\n												已<sup style="font-size: 20px">分配程序列表</sup>\n											</h3>\n											<div class="checkbox" ng-repeat="software in addedApplicationSoftwares | orderBy:\'name\'">\n												<label> \n													<input type="checkbox" ng-model="software.selected">{{software.name}}@{{software.machine.name}}({{software.machine.hostname}})\n												</label>\n											</div>\n										</div>\n										<div class="icon" ng-click="removeApplicationSoftwares()">\n											<i class="fa fa-arrow-circle-right"></i>\n										</div>\n										<a href="javascript:void(0)" class="small-box-footer" ng-click="removeApplicationSoftwares()"> 移除 <i\n											class="fa fa-arrow-circle-right"></i>\n										</a>\n									</div>\n								</div>\n								<!-- ./col -->\n								<div class="col-md-6 col-sm-6 col-xs-12">\n									<!-- small box -->\n									<div class="small-box bg-yellow">\n										<div class="inner" style="text-align: left;">\n											<h3>\n												未<sup style="font-size: 20px">分配程序列表</sup>\n											</h3>\n\n											<div class="checkbox" ng-repeat="software in applicationSoftwares | orderBy:\'name\'">\n												<label> \n													<input type="checkbox" ng-model="software.selected">{{software.name}}@{{software.machine.name}}({{software.machine.hostname}})\n												</label>\n											</div>\n										</div>\n										<div class="icon" ng-click="addApplicationSoftwares()">\n											<i class="fa fa-arrow-circle-left"></i>\n										</div>\n										<a href="javascript:void(0)" class="small-box-footer" ng-click="addApplicationSoftwares()"> <i\n											class="fa fa-arrow-circle-left"></i>添加\n										</a>\n									</div>\n								</div>\n								<!-- ./col -->\n\n							</div>\n							<!-- /.row -->\n						</div>\n					</div>\n\n                    \n					<div class="form-group">\n						<div class="col-sm-2 control-label">\n							<div>应用图标</div>\n							<div  type="file" ngf-select="uploadApplicationIcon($file, $invalidFiles)"\n          						accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">\n							<img ng-src="/{{application.icon}}" \n									class="application-list-icon"/>\n							</div>\n							<div  >\n								<small>点击图片可上传图标,或选择右侧系统图标作为应用图标</small>\n							</div>\n						</div>\n\n						<div class="col-sm-10">\n							<div class="row">\n\n								<div class="col-md-3 col-sm-3 col-xs-3" ng-repeat="icon in icons">\n									<img ng-src="/images/app-icons/{{icon}}" \n									class="application-list-icon" ng-click="setAppIcon(icon)"/>\n								</div>\n							</div>	\n						</div>\n					</div>\n					<!-- <div class="form-group">\n                  <label  class="col-sm-2 control-label">描述</label>\n\n                  <div class="col-sm-10">\n                    <textarea class="form-control" rows="3" ng-model="machine.description" id="description" placeholder="描述..."></textarea>\n                  </div>\n                </div> -->\n\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveApplication()">保存</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	 \n	<modal-alert-message></modal-alert-message>\n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application/templates/application-session-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/application/templates/application-session-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">在线应用列表\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			   <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">\n			   		<div class="row">\n						<div class="col-sm-6">\n									<div class="dataTables_length" id="system-users-table_length">\n										<label>显示 <select name="system-users-table_length"\n											aria-controls="system-users-table"\n											class="form-control input-sm" ng-model="page_size">\n											    <option value="10">10</option>\n												<option value="25">25</option>\n												<option value="50">50</option>\n												<option value="100">100</option></select> 条记录\n										</label>\n									</div>\n								</div>\n								<div class="col-sm-6">\n									<div id="system-users-table_filter" class="dataTables_filter">\n										<label>查找:<input type="search" ng-model="search_condition"\n											class="form-control input-sm" placeholder="输入关键字进行过滤查找..."\n											aria-controls="system-users-table">\n											</label>\n									</div>\n								</div>							\n					</div>\n					<!-- ROW END -->\n					\n					<div class="col-sm-12">\n				 	<table class="table table-bordered table-striped">\n							<thead>\n								<tr>\n									<th>用户名</th>\n									<th>用户主机IP地址</th>\n									<th>应用</th>\n									<th>应用主机IP地址</th>\n									<th>启动模式</th>\n									<th>应用开始使用时间</th>\n								</tr>\n							</thead>\n							<tbody>\n							\n								<tr ng-repeat="session in objspage.objs | orderBy:\'machineHostname\'">\n				                    <td ng-bind="session.username"></td>\n				                    <td ng-bind="session.clientHostname"></td>\n				                    <td ng-bind="session.connectionName"></td>\n				                    <td ng-bind="session.machineHostname"></td>\n				                    <td ng-bind="session.viewModel"></td>\n				                    <td ng-bind="session.startDate"></td>\n								</tr>\n								\n							</tbody>\n						</table>\n				 </div>\n				 <!-- ROW END -->\n				 	<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_info" id="system-users-table_info"\n									role="status" aria-live="polite">显示 {{objspage.page_row_start}}到 {{objspage.page_row_end}} 共\n									{{objspage.length}} 条记录</div>\n							</div>\n						</div>\n						<!-- ROW END -->\n						<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_paginate paging_simple_numbers"\n									id="system-users-table_paginate">\n									<ul class="pagination">\n										<li class="paginate_button" ng-repeat="_vpage in objspage.page_objects" ng-class="{active:_vpage.active}">\n											<a href="javascript:(0)" ng-click="pagefornumber(_vpage.page)"\n											aria-controls="system-users-table" data-dt-idx="{{_vpage.page}}"\n											tabindex="0" ng-bind="_vpage.page" ></a>\n										</li>\n									</ul>\n								</div>\n							</div>\n						</div>\n				     <!-- ROW END -->\n			   </div>\n			   \n			</div>    \n			 \n			\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application/templates/application-store-app-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/application/templates/application-store-app-new.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">新增应用库应用</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">名称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.name" id="name" placeholder="请输入应用名称">\n						</div>\n					</div>\n					\n					\n					<div class="form-group"\n						title="应用分组">\n						<label  class="col-sm-2 control-label">应用分组</label>\n						<div class="col-sm-10">\n							<select ng-model="application.group_identifier" class="form-control select2">\n								<option value="">--请选择--</option>\n								<option  ng-repeat="applicationStoreGroup in applicationStoreGroups | orderBy:\'name\'" value="{{applicationStoreGroup.identifier}}">{{applicationStoreGroup.name}}</option>\n							</select>\n						</div>\n					</div>\n					\n					<div class="form-group"\n						title="应用程序类型">\n						<label  class="col-sm-2 control-label">应用程序类型</label>\n						<div class="col-sm-10">\n							<select ng-model="application.source_type" class="form-control select2">\n								<option value="upload_apk">上传应用程序</option>\n								<option value="download_url">应用程序链接</option>\n							</select>\n						</div>\n					</div>\n					\n					\n					<div class="form-group" ng-show="application.source_type == \'upload_apk\'">\n						<label  class="col-sm-2 control-label"></label>\n\n						<div class="col-sm-10">\n						    <div type="file" ngf-select="uploadApplicationAPK($_file, $_invalidFiles)">\n						   	 <button type="button"\n						class=" fa fa-cloud-upload btn btn-block btn-lg pull-right">请选择要上传的应用程序</button>\n						    </div>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="application.source_type == \'download_url\'">\n						<label  class="col-sm-2 control-label">应用链接地址</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.download_url" id="url" placeholder="请输入应用链接地址: https://example.appsotre.com/app.exe">\n						</div>\n					</div>\n\n\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">应用安装后的启动程序名称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="application.path" id="path" placeholder="请输入应用执行文件: nc.exe或者java his.jar">\n						</div>\n					</div>\n\n\n					<div class="form-group">\n						<div class="col-sm-2 control-label">\n							<div>应用图标</div>\n							<div  type="file" ngf-select="uploadApplicationIcon($file, $invalidFiles)"\n          						accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">\n							<img ng-src="/{{application.icon}}" \n									class="application-list-icon"/>\n							</div>\n							<div  >\n								<small>点击图片可上传图标,或选择右侧系统图标作为应用图标</small>\n							</div>\n						</div>\n\n						<div class="col-sm-10">\n							<div class="row">\n\n								<div class="col-md-3 col-sm-3 col-xs-3" ng-repeat="icon in icons">\n									<img ng-src="/images/app-icons/{{icon}}" \n									class="application-list-icon" ng-click="setAppIcon(icon)"/>\n								</div>\n							</div>	\n						</div>\n					</div>\n\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveApplication()">保存</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	 \n	<modal-alert-message></modal-alert-message>\n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application/templates/application-store-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/application/templates/application-store-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">应用库应用列表\n				   <small ng-click="showAddNewApplication()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">发布(新增)应用</span>\n		            </small> \n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n			<!-- Info boxes -->\n			<div class="box-body">\n				<div class="row">\n				<div class="col-md-6 col-sm-6 col-xs-12" ng-repeat="application in applications | orderBy:\'name\'">\n					<div class="info-box">\n						<span class="info-box-icon"> <img\n							class="application-list-icon" alt=""\n							ng-src="/{{application.icon}}">\n						</span>\n\n						<div class="info-box-content">\n							<a class="info-box-text" ng-bind="application.name" \n							ng-href="#/system-manage/application/manage/{{application.identifier}}"></a>\n						    <span class="info-box-number"> \n						        \n						        <a class="fa fa-edit edit-icon" title="编辑"\n								ng-href="#/system-manage/application/manage/{{application.identifier}}"></a> \n								<a class="fa fa-trash-o delete-icon"  title="删除" data-toggle="modal"\n								 href="javascript:void(0)" ng-click="setDeleteApplication(application)"\n								data-target="#modal-default"></a> \n								\n								<!-- <a class="fa fa-fw fa-windows open-app-pc"  title="沙盒模式打开:{{application.name}}"\n								 href="javascript:void(0)" ng-click="openApplicationSandboxModel(application)"\n								data-target="#modal-default"></a>\n								<a class="fa fa-fw fa-chrome open-app-pc"  title="兼容模式打开:{{application.name}}"\n								 href="javascript:void(0)" ng-click="openApplicationWebModel(application)"\n								data-target="#modal-default"></a> -->\n								\n							</span>\n						</div>\n						<!-- /.info-box-content -->\n					</div>\n					\n					<!-- /.info-box -->\n				</div>\n				</div>\n			</div>\n\n			\n			\n			<div class="overlay" ng-show="data_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteApplication()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n	 \n	<modal-alert-message></modal-alert-message>\n	\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/application/templates/application-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/application/templates/application-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">应用列表\n				   <small ng-click="showAddNewApplication()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">发布(新增)应用</span>\n		            </small> \n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n			<!-- Info boxes -->\n			<div class="box-body">\n				<div class="row">\n				<div class="col-md-6 col-sm-6 col-xs-12" ng-repeat="application in applications | orderBy:\'name\'">\n					<div class="info-box">\n						<span class="info-box-icon"> <img\n							class="application-list-icon" alt=""\n							ng-src="/{{application.icon}}">\n						</span>\n\n						<div class="info-box-content">\n							<a class="info-box-text" ng-bind="application.name" \n							ng-href="#/system-manage/application/manage/{{application.identifier}}"></a>\n						    <span class="info-box-number"> \n						        \n						        <a class="fa fa-edit edit-icon" title="编辑"\n								ng-href="#/system-manage/application/manage/{{application.identifier}}"></a> \n								<a class="fa fa-trash-o delete-icon"  title="删除" data-toggle="modal"\n								 href="javascript:void(0)" ng-click="setDeleteApplication(application)"\n								data-target="#modal-default"></a> \n								\n								<!-- <a class="fa fa-fw fa-windows open-app-pc"  title="沙盒模式打开:{{application.name}}"\n								 href="javascript:void(0)" ng-click="openApplicationSandboxModel(application)"\n								data-target="#modal-default"></a>\n								<a class="fa fa-fw fa-chrome open-app-pc"  title="兼容模式打开:{{application.name}}"\n								 href="javascript:void(0)" ng-click="openApplicationWebModel(application)"\n								data-target="#modal-default"></a> -->\n								\n							</span>\n						</div>\n						<!-- /.info-box-content -->\n					</div>\n					\n					<!-- /.info-box -->\n				</div>\n				</div>\n			</div>\n\n			\n			\n			<div class="overlay" ng-show="data_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteApplication()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n	 \n	<modal-alert-message></modal-alert-message>\n	\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/department/templates/department-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/department/templates/department-manage.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">编辑部门信息</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">名称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="department.name" id="name" placeholder="请输入部门名称">\n						</div>\n					</div>\n\n					<div class="form-group"\n						title="">\n						<label  class="col-sm-2 control-label">上级部门</label>\n						<div class="col-sm-10">\n							<select ng-model="department.parentIdentifier" class="form-control select2">\n								<option value="">--请选择--</option>\n								<option ng-repeat="sysDepartment in sysDepartments  | orderBy:\'name\'" value="{{sysDepartment.identifier}}">{{sysDepartment.name}}</option>\n							</select>\n						</div>\n					</div>\n \n					<div class="form-group">\n	                  <label  class="col-sm-2 control-label">描述</label>\n	\n	                  <div class="col-sm-10">\n	                    <textarea class="form-control" rows="3" ng-model="department.description" id="description" placeholder="部门描述..."></textarea>\n	                  </div>\n	                </div>\n\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveDepartment()">保存</button>\n					 <button type="button" class="btn btn-block btn-danger btn-lg pull-right" \n                      data-toggle="modal" data-target="#modal-delete-application" \n                      ng-if="department.identifier">删除</button>\n                     <button type="button" class="btn btn-block btn-lg pull-right" ng-click="back()">取消</button>\n                \n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	<div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n        \n        \n	<div class="modal fade" id="modal-delete-application">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title">提示:</h4>\n				</div>\n				<div class="modal-body">\n					<p>删除后数据将无法恢复!确认要删除当前部门吗?</p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteDepartment()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n        \n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/department/templates/department-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/department/templates/department-new.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">新增部门</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">名称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="department.name" id="name" placeholder="请输入部门名称">\n						</div>\n					</div>\n\n					<div class="form-group"\n						title="">\n						<label  class="col-sm-2 control-label">上级部门</label>\n						<div class="col-sm-10">\n							<select ng-model="department.parentIdentifier" class="form-control select2">\n								<option value="">--请选择--</option>\n								<option ng-repeat="sysDepartment in sysDepartments | orderBy:\'name\'" value="{{sysDepartment.identifier}}">{{sysDepartment.name}}</option>\n							</select>\n						</div>\n					</div>\n \n					<div class="form-group">\n	                  <label  class="col-sm-2 control-label">描述</label>\n	\n	                  <div class="col-sm-10">\n	                    <textarea class="form-control" rows="3" ng-model="department.description" id="description" placeholder="部门描述..."></textarea>\n	                  </div>\n	                </div>\n\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="save()">保存</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	<div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/department/templates/department-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/department/templates/department-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">部门列表\n				   <small ng-click="showAddNewDepartment()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增部门</span>\n		            </small> \n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n			<!-- Info boxes -->\n			<div class="row box-body">\n				<div class="col-md-6 col-sm-6 col-xs-12" ng-repeat="department in departments | orderBy:\'name\'">\n					<div class="info-box">\n						<span class="info-box-icon bg-yellow"> <!-- <img\n							class="application-list-icon" alt=""\n							ng-src="/{{department.icon}}"> -->\n							<i class="ion" ng-bind="department.iconText"></i>\n						</span>\n\n						<div class="info-box-content">\n							<a class="info-box-text" \n							ng-href="#/system-manage/department/manage/{{department.identifier}}">\n							<span class="word-text-none" ng-bind="department.name" ></span> \n							<span class="word-text-none" ng-if="department.description" >({{department.description}})</span>\n							</a>\n						    <span\n								class="info-box-number"> <a class="fa fa-edit edit-icon"  title="编辑"\n								ng-href="#/system-manage/department/manage/{{department.identifier}}"></a> <i\n								class="fa fa-trash-o delete-icon"  title="删除" data-toggle="modal"\n								ng-click="setDeleteDepartment(department)"\n								data-target="#modal-default"></i>\n							</span>\n						</div>\n						<!-- /.info-box-content -->\n					</div>\n					<!-- /.info-box -->\n				</div>\n			</div>\n\n			\n			<div class="overlay" ng-show="data_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteDepartment()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default"  data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/download/templates/download.html",[]).run(["$templateCache",function(a){a.put("admin-app/download/templates/download.html",'<div>\n<div id="nonSupportMask" class="non_support_mask">\n		<div class="no_sup_mask_main">\n			<h1 style="display: none;">跨屏办公-云办公好助手</h1>\n			<h2>\n				根据需要可以下载不同平台的APP(Windows、Android、IOS).\n			</h2>\n			\n			<div class="bs_logo_list" style="padding-bottom: 10px;">\n			    <iframe name="downloadFrame" scrolling="no" frameborder="0" style="width:0px; height:0px; "></iframe> \n				    \n				<a class="download sup_windows" title="Window虚拟沙盒"\n					 ng-href="{{downloadAppUrl.sandbox}}"\n					target="downloadFrame">\n				</a> \n				<a class="download sup_android" title="Android客户端"\n					ng-href="{{downloadAppUrl.android}}" target="downloadFrame">\n				</a> \n				<a class="download sup_ios" title="IOS客户端（语音版）" \n				   ng-href="{{downloadAppUrl.ios}}"  target="_blank">\n				</a>\n			</div>			\n		</div>\n		\n</div>\n</div>')}]);angular.module("admin-app/home/templates/home.html",[]).run(["$templateCache",function(a){a.put("admin-app/home/templates/home.html",'<div ng-show="!expectedCredentials">\n	<section class="content-header">\n		<h1>\n			系统信息\n			<small>Version {{APP.VERSION}}</small>\n		</h1>\n	</section>\n\n	<!-- Main content -->\n	<section class="content">\n		<!-- Info boxes -->\n		<div class="row">\n			<div class="col-md-3 col-sm-6 col-xs-12">\n				<a class="info-box" ng-href="#/system-manage/machine/view">\n					<span class="info-box-icon bg-aqua">\n						<i class="ion ion-ios-monitor-outline"></i>\n					</span>\n\n					<div class="info-box-content">\n						<span class="info-box-text">在线主机</span>\n						<span class="info-box-number" ng-bind="systemOtherInformations.online_machines">\n							<small>台</small>\n						</span>\n					</div>\n					<!-- /.info-box-content -->\n				</a>\n				<!-- /.info-box -->\n			</div>\n\n			<!-- /.col -->\n			<div class="col-md-3 col-sm-6 col-xs-12">\n				<div class="info-box">\n					<span class="info-box-icon bg-red">\n						<i class="fa fa-expeditedssl"></i>\n					</span>\n\n					<div class="info-box-content">\n						<span class="info-box-text">许可数</span>\n						<span class="info-box-number" ng-bind="systemOtherInformations.license"></span>\n					</div>\n					<!-- /.info-box-content -->\n				</div>\n				<!-- /.info-box -->\n			</div>\n			<!-- /.col -->\n\n\n			<!-- fix for small devices only -->\n			<div class="clearfix visible-sm-block"></div>\n\n			<div class="col-md-3 col-sm-6 col-xs-12">\n				<div class="info-box">\n					<span class="info-box-icon bg-green">\n						<i class="ion ion-android-apps"></i>\n					</span>\n\n					<div class="info-box-content">\n						<span class="info-box-text">在线应用</span>\n						<span class="info-box-number" ng-bind="systemOtherInformations.online_applications"></span>\n					</div>\n					<!-- /.info-box-content -->\n				</div>\n				<!-- /.info-box -->\n			</div>\n			<!-- /.col -->\n			<div class="col-md-3 col-sm-6 col-xs-12">\n				<div class="info-box">\n					<span class="info-box-icon bg-yellow">\n						<i class="ion ion-ios-people-outline"></i>\n					</span>\n\n					<div class="info-box-content">\n						<span class="info-box-text">在线用户</span>\n						<span class="info-box-number" ng-bind="systemOtherInformations.online_users"></span>\n					</div>\n					<!-- /.info-box-content -->\n				</div>\n				<!-- /.info-box -->\n			</div>\n			<!-- /.col -->\n\n\n			<!-- /.col -->\n			<div class="col-md-3 col-sm-6 col-xs-12">\n				<div class="info-box">\n					<span class="info-box-icon bg-fuchsia">\n						<i class="fa fa-expeditedssl"></i>\n					</span>\n\n					<div class="info-box-content">\n						<span class="info-box-text">在线许可数</span>\n						<span class="info-box-number" ng-bind="systemOtherInformations.use_licenses"></span>\n					</div>\n					<!-- /.info-box-content -->\n				</div>\n				<!-- /.info-box -->\n			</div>\n			<!-- /.col -->\n\n\n		</div>\n		<!-- /.row -->\n\n	</section>\n\n	 <section class="content-header">\n        <h1>\n            网关服务器设备状态\n            <small ng-if="os" ng-show="canShowOSInformation">({{os}})</small>\n        </h1>\n	</section>\n	\n    <system-os-char></system-os-char>\n\n\n	<section class="content-header">\n		<h1 ng-bind="systemLicenseInformation.clientName"></h1>\n	</section>\n\n	<section class="content">\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">系统许可状态</h3>\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n\n					<table class="table table-hover home_page_table">\n						<tbody>\n							<tr>\n								<td>\n									<label class="control-label">沙盒版本号:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.sandboxVersion"></small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">WEB版本号:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.webVersion"></small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">系统序列号:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.serialVersionUID"></small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">SSL VPN用户数:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.sslVpnUsers"></small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">虚拟沙盒用户数:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.sandboxUsers"></small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">云盘用户数:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.cloudStorageUsers"></small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">质保和升级日期:</label>\n								</td>\n								<td>\n									<label class="control-label">\n										<small ng-bind="systemOtherInformations.endTime"></small>\n									</label>\n								</td>\n							</tr>\n						</tbody>\n					</table>\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n	</section>\n\n\n	<section class="content">\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">功能模块</h3>\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n\n					<table class="table table-hover">\n					    <thead>\n					    	<tr>\n					    	<th>功能</th>\n					    	<th>描述</th>\n					    	<th>状态</th>\n					    	</tr>\n					    </thead>\n						<tbody>\n							<tr>\n								<td>\n									<label class="control-label">终端兼容Windows系统功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label">终端兼容Apple系统功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label">终端兼容Android系统功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label" title="云模式,终端HTML5浏览器直接访问(SSLVPN)">终端纯浏览器访问功能</label>\n								</td>\n								<td>云模式,终端HTML5浏览器直接访问(SSLVPN)</td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label" title="VPN秒连、IP漫游、内网穿透、IP限流、IP分流">下一代VPN</label>\n								</td>\n								<td>VPN秒连、IP漫游、内网穿透、IP限流、IP分流</td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n							<tr>\n								<td>\n									<label class="control-label" title="VPN通道支持仅应用访问+全域访问">网络虚拟化功能</label>\n								</td>\n								<td>VPN通道支持仅应用访问+全域访问</td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label" title="云模式，适合终端界面高频刷新应用虚拟访问(下一代VPN)">终端沙盒虚拟加速访问功能</label>\n								</td>\n								<td>云模式，适合终端界面高频刷新应用虚拟访问(下一代VPN)</td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label" title="云模式，模拟终端应用窗体虚拟访问(下一代VPN)">终端沙盒虚拟集成访问功能</label>\n								</td>\n								<td>云模式，模拟终端应用窗体虚拟访问(下一代VPN)</td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n							\n							\n							<tr>\n								<td>\n									<label class="control-label" title="端模式，终端虚拟应用直接访问(下一代VPN)">终端沙盒虚拟应用访问功能</label>\n								</td>\n								<td>端模式，终端虚拟应用直接访问(下一代VPN)</td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n							\n							<tr>\n								<td>\n									<label class="control-label" title="端模式，终端真实应用直接访问(下一代VPN)">终端沙盒真实应用访问功能</label>\n								</td>\n								<td>端模式，终端真实应用直接访问(下一代VPN)</td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n							\n							\n							<tr>\n								<td>\n									<label class="control-label">云盘和云端应用同步功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n							\n							<tr>\n								<td>\n									<label class="control-label">云盘和终端虚拟同步功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n\n							<tr>\n								<td>\n									<label class="control-label">云盘资源分享协调功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label">终端同步盘文件离线功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label">网关机集群及负载均衡功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n							\n							<tr>\n								<td>\n									<label class="control-label">应用主机集群及负载均衡功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr>\n								<td>\n									<label class="control-label">服务器运行状态监控功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n							\n\n							<tr>\n								<td>\n									<label class="control-label">分布式存储功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n\n							<tr >\n								<td>\n									<label class="control-label" title="将语音输入自动转化为文字输入，仅支持手机平板端">语音转文字输入功能</label>\n								</td>\n								<td>将语音输入自动转化为文字输入，仅支持手机平板端</td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n									<small> ( Android({{systemOtherInformations.android_version}}#{{systemOtherInformations.voice_token_android}})、 IOS({{systemOtherInformations.ios_version}}#{{systemOtherInformations.voice_token_ios}})\n										)</small>\n								</td>\n							</tr>\n\n\n							<tr>\n								<td>\n									<label class="control-label">短信认证功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n\n\n							<tr title="">\n								<td>\n									<label class="control-label">终端硬件指纹认证功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n\n\n							<tr>\n								<td>\n									<label class="control-label">终端USB认证功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_disabled">未开通</small>\n									</label>\n								</td>\n							</tr>\n							\n							<tr>\n								<td>\n									<label class="control-label">终端操作录屏监控功能</label>\n								</td>\n								<td></td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n\n\n							<tr>\n								<td>\n									<label class="control-label" title="暂仅纯浏览器和HTML5兼容模式">终端操作水印审计功能</label>\n								</td>\n								<td>暂仅纯浏览器和HTML5兼容模式</td>\n								<td>\n									<label class="control-label">\n										<small class="status_success">开通</small>\n									</label>\n								</td>\n							</tr>\n\n\n						</tbody>\n					</table>\n\n				</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n	</section>\n\n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/index/templates/manage-home-login-page.html",[]).run(["$templateCache",function(a){a.put("admin-app/index/templates/manage-home-login-page.html",'<div ng-show="expectedCredentials">\n<div class="login-box">\n  <div class="login-logo">\n    <p><img ng-src="{{defaultLogoImageData}}" style="width:120px;"/></p>\n  </div>\n  <!-- /.login-logo -->\n  <div class="login-box-body">\n    <p class="login-box-msg" ng-bind="loginErrorMessage" ></p>\n\n    <form>\n      <div class="form-group has-feedback">\n        <input type="text" name="username" hidden="hidden" placeholder="用户名" autocomplete="off">\n        <input type="text" class="form-control" placeholder="用户名" ng-model="credential.username">\n        <span class="glyphicon glyphicon-user form-control-feedback"></span>\n      </div>\n      <div class="form-group has-feedback">\n        <input type="password" name="password" hidden="hidden" placeholder="密码" autocomplete="off">\n        <input type="password" class="form-control" placeholder="密码"  ng-model="credential.password">\n        <span class="glyphicon glyphicon-lock form-control-feedback"></span>\n      </div>\n      \n      <!-- <div ng-show="loginLayoutState.showAuthcode" class="form-group has-feedback">\n	 		<input type="text" ng-model="credential.securityCode" name="virwork_authcode" placeholder="验证码" class="auth-code-text" autocomplete="off">\n	 		<img src="imgs/tricolor.png" class="auth-code-img"/>\n 		</div> -->\n      \n      <!-- \n        <div ng-show="loginLayoutState.showWorknumber" class="form-group has-feedback">\n	 		<input type="text" class="form-control" ng-model="credential.worknumber" name="virwork_worknumber" placeholder="工号" autocomplete="off">\n 	        <span class="glyphicon glyphicon-lock form-control-feedback"></span>\n 		</div>\n       -->\n      \n      <!--  <div class="row" ng-show="loginLayoutState.showRemeberpasswd || loginLayoutState.showAutologin">\n        <div class="col-xs-6">\n          <div class="checkbox icheck">\n            <label>\n              <input type="checkbox" value="true" ng-model="loginCookieState.remeberpasswd"> 记住我\n            </label>\n          </div>\n        </div>\n        <div class="col-xs-6">\n          <div class="checkbox icheck">\n            <label>\n              <input type="checkbox" value="true" ng-model="loginCookieState.autologin"> 下次自动登录\n            </label>\n          </div>\n        </div>\n      </div> -->\n      \n      <div class="form-group has-feedback">\n        <button type="submit" class="btn btn-primary btn-block btn-flat" ng-click="login()">登 录</button>\n      </div>\n    </form>\n\n    <!-- /.social-auth-links -->\n  </div>\n  <!-- /.login-box-body -->\n  \n  \n \n</div>\n<platform-footer></platform-footer>\n</div>')}]);angular.module("admin-app/index/templates/manage-home-page.html",[]).run(["$templateCache",function(a){a.put("admin-app/index/templates/manage-home-page.html",'<div class="wrapper" style="position: unset;">\n\n  <header class="main-header">\n\n    <!-- Logo -->\n    <a href="#/system-manage/manage-home" class="logo">\n      <!-- mini logo for sidebar mini 50x50 pixels -->\n      <span class="logo-mini"><b>V</b>W</span>\n      <!-- logo for regular state and mobile devices -->\n      <span class="logo-lg"><b>欢迎使用</b>后台管理系统</span>\n    </a>\n\n    <!-- Header Navbar: style can be found in header.less -->\n    <nav class="navbar navbar-static-top">\n      <!-- Sidebar toggle button-->\n      <a href="javascript:void(0);" class="sidebar-toggle" data-toggle="push-menu" role="button">\n        <span class="sr-only">导航栏 </span>\n      </a>\n      <!-- Navbar Right Menu -->\n      <div class="navbar-custom-menu">\n        <ul class="nav navbar-nav">\n          <li title="用户应用界面">\n            <a href="javascript:void(0);" ng-click="back2UserAppsPage()"><i class="ion ion-android-apps"></i></a>\n          </li>\n          \n          <li title="后台管理主页">\n            <a href="#/system-manage/manage-home"><i class="fa fa-home"></i></a>\n          </li>\n          \n          <li title="注销">\n            <a href="javascript:void(0);" ng-click="logout()"><i class="fa fa-power-off"></i></a>\n          </li>\n        </ul>\n      </div>\n\n    </nav>\n  </header>\n  \n  \n  <aside class="main-sidebar">\n  \n  <!-- Left side column. contains the logo and sidebar -->\n    <!-- sidebar: style can be found in sidebar.less -->\n    <section class="sidebar">\n            \n      <!-- sidebar menu: : style can be found in sidebar.less -->\n      <ul class="sidebar-menu tree" data-widget="tree">\n        <li class="header">功能导航 </li>\n       \n       \n        <!-- 账户管理:部门、角色、用户 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-users"></i> <span>账户管理</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n            \n            <!-- 部门管理  -->\n            <li class="treeview">\n	          <a href="javascript:void(0)">\n	            <i class="fa fa-group"></i>\n	            <span>部门管理</span>\n	            <span class="pull-right-container">\n	              <i class="fa fa-angle-left pull-right"></i>\n	            </span>\n	          </a>\n	          <ul class="treeview-menu">\n	            <li><a href="#/system-manage/department/view"><i class="fa fa-circle-o"></i> 查看部门列表 </a></li>\n	            <li><a href="#/system-manage/department/new"><i class="fa fa-circle-o"></i> 新增部门 </a></li>\n	          </ul>\n	        </li>\n            <!-- 部门管理  -->\n            \n            <!-- 角色管理  -->\n            <li class="treeview">\n	          <a href="javascript:void(0)">\n	            <i class="fa fa-circle-o"></i>\n	            <span>角色管理</span>\n	            <span class="pull-right-container">\n	              <i class="fa fa-angle-left pull-right"></i>\n	            </span>\n	          </a>\n	          <ul class="treeview-menu">\n	            <li><a href="#/system-manage/role/view"><i class="fa fa-circle-o"></i> 查看角色列表 </a></li>\n	            <li><a href="#/system-manage/role/new"><i class="fa fa-circle-o"></i> 新增角色 </a></li>\n	          </ul>\n	        </li>\n            <!-- 角色管理  -->\n        \n            <!-- 用户管理  -->\n	        <li class="treeview">\n	          <a href="javascript:void(0)">\n	            <i class="fa fa-user"></i>\n	            <span>用户管理</span>\n	            <span class="pull-right-container">\n	              <i class="fa fa-angle-left pull-right"></i>\n	            </span>\n	          </a>\n	          <ul class="treeview-menu">\n	            <li><a href="#/system-manage/users/view"><i class="fa fa-circle-o"></i> 用户列表 </a></li>\n	            <li><a href="#/system-manage/users/view/ogz"><i class="fa fa-circle-o"></i> 用户组织架构图 </a></li>\n	            <!-- <li><a href="#/system-manage/users/online"><i class="fa fa-circle-o"></i> 在线用户 </a></li> -->\n	            <li><a href="#/system-manage/users/new"><i class="fa fa-circle-o"></i> 新增用户 </a></li>\n	            <li><a href="#/system-manage/users/new/basic-input"><i class="fa fa-circle-o"></i> 导入用户基本信息 </a></li>\n	            <li><a href="#/system-manage/users/new/worknumber-input"><i class="fa fa-circle-o"></i> 导入用户-工号信息 </a></li>\n	            <li><a href="#/system-manage/users/disable"><i class="fa fa-circle-o"></i> 解除账号封禁 </a></li>\n	            <li><a href="#/system-manage/users/ips/disable"><i class="fa fa-circle-o"></i> 解除账号主机IP封禁 </a></li>\n	          </ul>\n	        </li>\n	        <!-- 用户管理  -->        \n        \n          </ul>\n        </li>\n         <!-- 账户管理:部门、角色、用户 -->\n         \n         <!-- 主机管理 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-desktop"></i>\n            <span>主机管理</span>\n            <span class="pull-right-container">\n              <small class="label pull-left bg-red" ng-bind="systemOtherInformations.offline_machines"></small>\n              <small class="label pull-left bg-green" ng-bind="systemOtherInformations.online_machines"></small>\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n            <li><a href="#/system-manage/machine/view"><i class="fa fa-circle-o"></i> 查看主机列表 </a></li>\n            <li><a href="#/system-manage/machine/new"><i class="fa fa-circle-o"></i> 新增主机 </a></li>\n          </ul>\n        </li>\n         <!-- 主机管理 -->\n        \n        \n         <!-- 应用管理 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-internet-explorer"></i>\n            <span>应用管理</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n            <li><a href="#/system-manage/application-store/view"><i class="fa fa-circle-o"></i> 应用库 </a></li>\n            <li><a href="#/system-manage/application-program/view"><i class="fa fa-circle-o"></i> 应用程序列表 </a></li>\n            <li><a href="#/system-manage/application/view"><i class="fa fa-circle-o"></i> 应用列表 </a></li>\n            <!-- <li><a href="#/system-manage/application-program/new"><i class="fa fa-circle-o"></i> 创建应用程序 </a></li> -->\n            <!-- <li><a href="#/system-manage/application/new"><i class="fa fa-circle-o"></i> 发布应用 </a></li> -->\n            <li><a href="#/system-manage/application-sso/view"><i class="fa fa-circle-o"></i> SSO应用列表 </a></li>\n            <li><a href="#/system-manage/application/status"><i class="fa fa-circle-o"></i> 在线应用 </a></li>\n          </ul>\n        </li>\n         <!-- 应用管理 -->\n        \n        \n         <!-- 网络管理 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-globe"></i>\n            <span>网络管理</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n           <li ng-show="systemFeatures.open_ssl_vpn"><a href="#/system-manage/router/servers/view"><i class="fa fa-circle-o"></i> VPN服务器 </a></li>\n            \n        	 <!-- 下一代VPN网络管理 -->\n            <li ng-show="systemFeatures.open_next_ssl_vpn"><a href="#/system-manage/next-vpn/servers/view"><i class="fa fa-circle-o"></i> VPN服务器  </a></li>\n        	 <!-- 下一代VPN网络管理 -->\n         \n            <li><a href="#/system-manage/router/view"><i class="fa fa-circle-o"></i> VPN路由 </a></li>\n             <!-- <li><a href="#/system-manage/strategy/view"><i class="fa fa-circle-o"></i> VPN路由策略 </a></li>-->\n            <li><a href="#/system-manage/router/roles/view"><i class="fa fa-circle-o"></i> VPN路由角色 </a></li>\n            <li><a href="#/system-manage/router/roles/users"><i class="fa fa-circle-o"></i> 用户VPN路由角色 </a></li>\n            <li><a href="#/system-manage/network/subnet"><i class="fa fa-circle-o"></i> 本地网段设置 </a></li>\n          </ul>\n        </li>\n         <!--网络管理 -->\n\n         <!-- 厂家设置 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-cog"></i>\n            <span>厂家设置</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n            <li><a href="#/system-manage/system/sandbox"><i class="fa fa-circle-o"></i> 虚拟沙盒 </a></li>\n            <li><a href="#/system-manage/system/license"><i class="fa fa-circle-o"></i> 系统许可  </a></li>\n          </ul>\n        </li>\n         <!-- 厂家设置 -->\n        \n        \n        \n         <!-- 系统设置 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-gears"></i>\n            <span>系统设置</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n            <li><a href="#/system-manage/system/website"><i class="fa fa-circle-o"></i> 网站信息 </a></li>\n            <li><a href="#/system-manage/system/servers"><i class="fa fa-circle-o"></i> 系统服务器 </a></li>\n            <li><a href="#/system-manage/system/servers-network"><i class="fa fa-circle-o"></i> 系统服务器网络 </a></li>\n           <!--  <li><a href="#/system-manage/system/database"><i class="fa fa-circle-o"></i> 数据库备份 </a></li> -->\n            <li><a href="#/system-manage/system/sslvpn"><i class="fa fa-circle-o"></i> SSLVPN安全认证 </a></li>\n            <li><a href="#/system-manage/system/ac_auth"><i class="fa fa-circle-o"></i> 上网行为审计 </a></li>\n            <li><a href="#/system-manage/system/cloudstorage"><i class="fa fa-circle-o"></i> 系统云盘服务 </a></li>\n            <li><a href="#/system-manage/system/sandbox/pc"><i class="fa fa-circle-o"></i> 客户端Sandbox沙盒 </a></li>\n            <li><a href="#/system-manage/system/application/watermark"><i class="fa fa-circle-o"></i> 应用防盗 </a></li>\n            <li><a href="#/system-manage/system/account/login"><i class="fa fa-circle-o"></i> 用户登录权限 </a></li>\n          </ul>\n        </li>\n         <!-- 系统设置 -->\n         \n        <!-- 系统日志  --> \n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-table"></i>\n            <span>系统日志</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n       		  <li><a href="#/system-manage/servers/logger/view"><i class="fa fa-book"></i> <span>网关服务器日志</span></a></li>\n       		  <li><a href="#/system-manage/platform/logger/view"><i class="fa fa-book"></i> <span>跨平操作日志</span></a></li>\n          </ul>\n        </li>\n        <!-- 系统日志  -->\n \n        <!-- 系统操作系统信息 --> \n         <li><a href="#/system-manage/system/os-info"><i class="fa fa-info"></i> <span>网关设备状态信息</span></a></li>\n        <!-- 系统操作系统信息 --> \n        \n        \n        <!-- 个人信息 -->\n        <li class="treeview">\n          <a href="javascript:void(0)">\n            <i class="fa fa-user"></i>\n            <span>个人设置</span>\n            <span class="pull-right-container">\n              <i class="fa fa-angle-left pull-right"></i>\n            </span>\n          </a>\n          <ul class="treeview-menu">\n        	<li><a href="#/system-manage/personal/info"><i class="fa fa-info"></i> <span>个人信息</span></a></li>\n       		<li><a href="#/system-manage/application-sso/manage"><i class="fa fa-circle-o"></i> SSO应用账户管理 </a></li>\n         </ul>\n        </li>\n         <!-- 系统工具 -->\n        <!-- 个人信息 -->\n        \n        <li class="header">其它</li>\n        <!-- 沙盒下载 -->\n        <li><a href="#/download"><i class="fa fa-download"></i> <span>沙盒客户端下载</span></a></li>\n        <li><a href="#/support"><i class="fa fa-bullhorn"></i> <span>技术支持</span></a></li>\n        <!-- 沙盒下载 -->\n        \n      </ul>\n    </section>\n    <!-- /.sidebar -->\n  </aside>\n  \n  <!-- Content Wrapper. Contains page content -->\n  <div class="content-wrapper client-view" ng-view>\n  </div>\n  <!-- /.content-wrapper -->\n\n  <!-- footer -->\n  <platform-footer></platform-footer>\n  <!--  /footer -->\n  \n</div>')}]);angular.module("admin-app/index/templates/modal-alert-message.html",[]).run(["$templateCache",function(a){a.put("admin-app/index/templates/modal-alert-message.html",'	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>')}]);angular.module("admin-app/index/templates/platform-footer.html",[]).run(["$templateCache",function(a){a.put("admin-app/index/templates/platform-footer.html",'<footer class="main-footer" style="{{loginFooterClass}}">\n    <div class="pull-right hidden-xs">\n      <b>系统版本</b> 5.0.0.1\n    </div>\n    <strong>版权 &copy; 2014-2019 <a href="#/support" ng-bind="virworkCopy.name"></a> </strong> 所有.\n</footer>')}]);angular.module("admin-app/index/templates/system-os-char.html",[]).run(["$templateCache",function(a){a.put("admin-app/index/templates/system-os-char.html",'<section class="content">\n    <div class="row">\n        <div class="col-md-6">\n            <!-- AREA CHART -->\n            <div class="box box-primary">\n                <div class="box-header with-border">\n                    <h3 class="box-title">CPU\n                     (已使用:{{cpu_usage}},空闲:{{cpu_idle}})   \n                    </h3>\n\n                    <div class="box-tools pull-right">\n                        <!-- <button type="button" class="btn btn-box-tool" data-widget="collapse">\n                                <i class="fa fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-box-tool" data-widget="remove">\n                                <i class="fa fa-times"></i>\n                            </button>-->\n                    </div>\n                </div>\n                <div class="box-body">\n                    <div class="chart">\n                        <canvas id="cpuAreaChart" style="height: 165px; width: 522px;" width="522" height="165"></canvas>\n                    </div>\n                </div>\n                <!-- /.box-body -->\n            </div>\n            <!-- /.box -->\n\n            <!-- DONUT CHART -->\n            <div class="box box-danger">\n                <div class="box-header with-border">\n                    <h3 class="box-title">内存</h3>\n\n                    <div class="box-tools pull-right">\n                        <!-- <button type="button" class="btn btn-box-tool" data-widget="collapse">\n                                <i class="fa fa-minus"></i>\n                            </button>\n                           <button type="button" class="btn btn-box-tool" data-widget="remove">\n                                <i class="fa fa-times"></i>\n                            </button>-->\n                    </div>\n                </div>\n                <div class="box-body">\n                    <canvas id="memoryPieChart" style="height: 271px; width: 542px;" width="542" height="271"></canvas>\n                </div>\n\n\n\n                <div class="overlay" ng-show="memory_data_loading">\n                    <i class="fa fa-refresh fa-spin"></i>\n                </div>\n                <!-- /.box-body -->\n\n                <div class="box-footer no-padding" ng-show="!memory_data_loading">\n                    <ul class="nav nav-pills nav-stacked">\n                        <li>\n                            <a href="javascript:void(0);">已使用\n                                <span class="pull-right text-red" ng-bind="memory.used"></span>\n                            </a>\n                        </li>\n                        <li>\n                            <a href="javascript:void(0);">总共\n                                <span class="pull-right text-green" ng-bind="memory.total"></span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- /.box -->\n\n        </div>\n        <!-- /.col (LEFT) -->\n        <div class="col-md-6">\n            <!-- LINE CHART -->\n            <div class="box box-info">\n                <div class="box-header with-border">\n                    <h3 class="box-title">进程\n                    <small>({{cpu.processes}})</small>/线程\n                \n                    <small>({{cpu.threads}})</small> \n                </h3>\n\n                    <div class="box-tools pull-right">\n                        <!--  <button type="button" class="btn btn-box-tool" data-widget="collapse">\n                                <i class="fa fa-minus"></i>\n                            </button>\n                           <button type="button" class="btn btn-box-tool" data-widget="remove">\n                                <i class="fa fa-times"></i>\n                            </button>-->\n                    </div>\n                </div>\n                <div class="box-body">\n                    <div class="chart">\n                        <canvas id="processLineChart" style="height: 165px; width: 522px;" width="522" height="165"></canvas>\n                    </div>\n                </div>\n                <!-- /.box-body -->\n            </div>\n            <!-- /.box -->\n\n            <!-- BAR CHART -->\n            <div class="box box-success">\n                <div class="box-header with-border">\n                    <h3 class="box-title">硬盘(分区)</h3>\n\n                    <div class="box-tools pull-right">\n                        <!-- <button type="button" class="btn btn-box-tool" data-widget="collapse">\n                                <i class="fa fa-minus"></i>\n                            </button>\n                            <button type="button" class="btn btn-box-tool" data-widget="remove">\n                                <i class="fa fa-times"></i>\n                            </button>-->\n                    </div>\n                </div>\n\n                <div class="overlay" ng-show="disk_data_loading">\n                    <i class="fa fa-refresh fa-spin"></i>\n                </div>\n\n                <div class="box-body">\n                    <div class="chart">\n                        <canvas id="diskBarChart" style="height: 152px; width: 522px;" width="522" height="152"></canvas>\n                    </div>\n                </div>\n                <!-- /.box-body -->\n\n\n                <div class="box-footer no-padding" ng-show="!disk_data_loading">\n                    <ul class="nav nav-pills nav-stacked">\n                        <li>\n                            <a href="javascript:void(0);">磁盘个数:\n                                <span class="pull-right text-green" ng-bind="disks.length"></span>\n                            </a>\n                        </li>\n                        <li ng-repeat="disk in disks">\n                            <a href="javascript:void(0);">磁盘#{{$index}}:{{disk.name}}\n                                <span class="pull-right" ng-bind="disk.size"></span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- /.box -->\n\n        </div>\n        <!-- /.col (RIGHT) -->\n    </div>\n    <!-- /.row -->\n\n</section>')}]);angular.module("admin-app/machine/templates/machine-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/machine/templates/machine-manage.html",'<div ng-show="!expectedCredentials">\n \n\n    <!-- Main content -->\n    <section class="content">\n         \n       <div class="box box-info">\n            <div class="box-header with-border">\n              <h3 class="box-title">编辑主机信息</h3>\n               \n            </div>\n            <!-- /.box-header -->\n            <!-- form start -->\n            <form class="form-horizontal">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">名称</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="machine.name" id="name" placeholder="请输入主机名称">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">IP地址</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" data-inputmask="\'alias\': \'ip\'" data-mask="" ng-model="machine.hostname" id="hostname"  placeholder="请输入主机地址">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">端口</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="machine.port" id="port" placeholder="请输入主机端口">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">最大会话</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control"  ng-model="machine.connections" id="connections" placeholder="请输入主机最大会话数">\n                  </div>\n                </div>\n                <!-- \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">描述</label>\n\n                  <div class="col-sm-10">\n                    <textarea class="form-control" rows="3" ng-model="machine.description" id="description" placeholder="描述..."></textarea>\n                  </div>\n                </div>\n                  -->\n                 \n                 \n                <div class="form-group" ng-show="system_client_screen_record_setting">\n                  <label class="col-sm-2 control-label">录屏审计软件路径:</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control"  ng-model="connectionParameters.record_path.value" \n                    id="record_path" placeholder="请输入当前主机录屏审计软件路径">\n                  </div>\n                </div>\n                \n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveMachine()">保存</button>\n                <button type="button" class="btn btn-block btn-danger btn-lg pull-right" \n                 data-toggle="modal" data-target="#modal-delete-machine" ng-if="machine.identifier">删除</button>\n                 <button type="button" class="btn btn-block btn-lg pull-right" ng-click="back()">取消</button>\n              </div>\n              <!-- /.box-footer -->\n            </form>\n          </div>\n    \n      \n          <!-- PRODUCT LIST -->\n          <div class="box box-primary"  ng-if="machine.identifier">\n            <div class="box-header with-border">\n              <h3 class="box-title">当前主机应用程序</h3>\n            </div>\n            <!-- /.box-header -->\n            <div class="box-body">\n              \n              <div class="row">\n		        <div class="col-md-3 col-sm-6 col-xs-12" ng-repeat="software in machine.softwares">\n		          <div class="info-box">\n		            <span class="info-box-icon bg-aqua">\n		            <i class="ion ion-ios-monitor-outline"></i>\n		            </span>\n		\n		            <div class="info-box-content">\n		              <span class="info-box-text"  ng-bind="software.name"></span>\n		              <span class="info-box-number" ng-bind="software.description"></span>\n		            </div>\n		            <!-- /.info-box-content -->\n		          </div>\n		          <!-- /.info-box -->\n		        </div> \n		      </div> \n               <!-- \n              <ul class="products-list product-list-in-box">\n                <li class="item" ng-repeat="software in machine.softwares">\n                  <div class="product-img">\n                    <span class="info-box-icon bg-aqua"><i class="ion ion-ios-monitor-outline"></i></span>\n                  </div>\n                  <div class="product-info">\n                    <a href="javascript:void(0)" class="product-title" ng-bind="software.name">\n                     </a>\n                    <span class="product-description" ng-bind="software.description">\n                        </span>\n                  </div>\n                </li>\n              </ul>\n               -->\n            </div>\n            <!-- /.box-body -->\n          </div>\n          <!-- /.box -->          \n              \n    </section>\n    \n    \n    \n        <div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" ng-click="hiddenModelWindow()" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n        \n        \n   \n        <div class="modal fade" id="modal-delete-machine" role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除主机“{{machine.name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!删除主机将同时删除主机对应的应用程序!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" data-dismiss="modal" \n                ng-click="deleteMachine()">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/machine/templates/machine-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/machine/templates/machine-new.html",'<div ng-show="!expectedCredentials">\n \n\n    <!-- Main content -->\n    <section class="content">\n         \n       <div class="box box-info">\n            <div class="box-header with-border">\n              <h3 class="box-title">新增主机</h3>\n               \n            </div>\n            <!-- /.box-header -->\n            <!-- form start -->\n            <form class="form-horizontal">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">名称</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="machine.name" id="name" placeholder="请输入主机名称">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">IP地址</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" data-inputmask="\'alias\': \'ip\'" data-mask ng-model="machine.hostname" id="hostname"  placeholder="请输入主机地址">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">端口</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="machine.port" id="port" placeholder="请输入主机端口">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">最大会话</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control"  ng-model="machine.connections" id="connections" placeholder="请输入主机最大会话数">\n                  </div>\n                </div>\n                \n                \n                <div class="form-group" ng-show="system_client_screen_record_setting">\n                  <label class="col-sm-2 control-label">录屏审计软件路径:</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control"  ng-model="connectionParameters.record_path.value" \n                    id="record_path" placeholder="请输入当前主机录屏审计软件路径">\n                  </div>\n                </div>\n                \n                <!-- <div class="form-group">\n                  <label class="col-sm-2 control-label">描述</label>\n\n                  <div class="col-sm-10">\n                    <textarea class="form-control" rows="3" ng-model="machine.description" id="description" placeholder="描述..."></textarea>\n                  </div>\n                </div> -->\n                 \n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveMachine()">保存</button>\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="back()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n          </div>\n              \n    </section>\n    \n    \n    \n    \n        <div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/machine/templates/machine-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/machine/templates/machine-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">主机列表\n                   <small ng-click="getRealtimeMachineStatus()" class="btn">\n		              <i class="fa fa-refresh"></i>\n		              <span class="">刷新主机状态</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           \n           	<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>名称</th>\n                  <th>IP地址</th>\n                  <th>端口</th>\n                  <th>最大会话</th>\n                  <th>在线会话</th>\n                  <th>状态</th>\n                  <!-- <th>描述<th> -->\n                  <th>操作</th>\n                </tr>\n                \n                \n                <tr ng-repeat="machine in machines | orderBy:\'name\'">\n                  <td >\n                  	<span class="ion ion-ios-monitor-outline" ng-bind="machine.name"></span>\n                  </td>\n                  <td ng-bind="machine.hostname"></td>\n                  <td ng-bind="machine.port"></td>\n                  <td ng-bind="machine.connections"></td>\n                  <td>\n                  	<a ng-href="#/system-manage/application/status/{{machine.actives}}"  ng-bind="machine.actives" ng-show="machine.actives != 0"></a>\n                  	<span ng-bind="machine.actives" ng-show="machine.actives == 0"></span>\n                  </td>\n                  <td>\n                  <span class="status_success" ng-if="machine.alive">运行中</span>\n                  <span class="status_error" ng-if="!machine.alive">离线</span>\n                  </td>\n                  <!-- <td ng-bind="machine.description"></td> -->\n                  <td>\n                  <div class="tools">\n                    <a title="编辑" class="fa fa-edit edit-icon" href="#/system-manage/machine/manage/{{machine.identifier}}"></a>\n                    <i title="删除" class="fa fa-trash-o delete-icon" ng-click="setDeleteMachine(machine)"  data-toggle="modal" data-target="#modal-default"></i>\n                  </div>\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n          </div>\n          <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除主机“{{currentMachine.name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!删除主机将同时删除主机对应的应用程序!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteMachine()" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n        \n        <modal-alert-message></modal-alert-message>\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/network-vpn/templates/network-user-vpn-role-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/network-vpn/templates/network-user-vpn-role-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">用户VPN路由角色分配</h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body no-padding">\n               \n              <form class="form-horizontal">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">用户账户角色</label>\n\n                  <div class="col-sm-10">\n	                    <select ng-model="userVPNRouterRolePermission.userRoleIdentifier" class="form-control" >\n	                            <option value="">--请选择用户账户角色--</option>\n								<option value="{{item.identifier}}" ng-repeat="item in roles | orderBy:\'name\'">\n								{{item.name}}(所属部门:{{item.department.name}})\n								</option>\n						</select>\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">VPN路由角色</label>\n\n                  <div class="col-sm-10">\n	                    <select ng-model="userVPNRouterRolePermission.routerRoleIdentifier" class="form-control" >\n	                            <option value="">--请选择VPN路由角色--</option>\n								<option value="{{item.identifier}}" ng-repeat="item in router_roles | orderBy:\'vpn_connected_type\'">\n								{{item.name}} - {{item.vpn_connected_type==\'1\'?\'仅VPN专线模式(网络直走VPN)\':\'含VPN专线模式(VPN网络+用户本地网络)\'}}\n								</option>\n						</select>\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label"></label>\n\n                  <div class="col-sm-10">\n                    	选择用户账户角色、VPN路由角色, 将自动批量给账户角色下的所有用户分配VPN路由角色.\n                  </div>\n                </div>\n                \n                \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveUserRouterRole()">保存</button>\n              </div>\n              <!-- /.box-footer -->\n            </form>\n              \n            </div>\n            <!-- /.box-body -->\n       \n       </div>\n       <!-- /.box -->    \n       \n       \n       <div class="box box-info">\n            <div class="box-header with-border">\n              <h3 class="box-title">更新管理员的VPN路由角色</h3>\n            </div>\n            <!-- /.box-header -->\n            <!-- form start -->\n            <form class="form-horizontal">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">VPN路由角色</label>\n\n                  <div class="col-sm-10">\n	                <select ng-model="user_router_role" class="form-control" >\n	                            <option value="">--请选择VPN路由角色--</option>\n								<option value="{{item.identifier}}" ng-repeat="item in router_roles | orderBy:\'vpn_connected_type\'">\n								{{item.name}} - {{item.vpn_connected_type==\'1\'?\'仅VPN专线模式(网络直走VPN)\':\'含VPN专线模式(VPN网络+用户本地网络)\'}}\n								</option>\n						</select>\n                  </div>\n                </div>\n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer">\n                <button type="button" class="btn btn-block btn-primary btn-lg" ng-click="updateVPNRole()">保存</button>\n              </div>\n              <!-- /.box-footer -->\n            </form>\n          </div>\n              \n    </section>\n   \n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/network-vpn/templates/network-vpn-role-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/network-vpn/templates/network-vpn-role-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">VPN路由角色列表\n                   <small ng-click="addNewVPNRole()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增VPN路由角色</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>VPN角色名称</th>\n                  <th>VPN模式</th>\n                  <th>\n		           </th>\n                </tr>\n         \n                <tr ng-repeat="item in sysVPNRouterRoles | orderBy:\'vpn_connected_type\'">\n                  <td ng-bind="item.name"></td>\n                  <td>\n                  	 <span class="label label-danger" ng-if="item.vpn_connected_type == \'1\'" title="网络直走VPN网络">仅VPN专线模式</span>\n                 	 <span class="label label-success" ng-if="item.vpn_connected_type == \'0\'" title="VPN网络+用户本地网络">含VPN专线</span>\n                  </td>\n                 \n                  <td>\n                    <a class="fa fa-edit edit-icon" ng-click="editVPNRouterRole(item)" ng-href="javascript:void(0);"></a>\n                 	<i class="fa fa-trash-o delete-icon" ng-click="setDeleteVPNRouterRole(item)" data-toggle="modal" data-target="#modal-delete"></i>\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n       \n        <form class="form-horizontal" ng-show="showEditVPNRouterRole">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">角色名称</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnRouterRole.name" id="name" placeholder="请输入主机名称">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">VPN模式</label>\n\n                  <div class="col-sm-10">\n					<select ng-model="vpnRouterRole.vpn_connected_type" class="form-control" >\n							<option value="1">仅VPN专线模式(网络直走VPN)</option>\n							<option value="0">含VPN专线模式(VPN网络+用户本地网络)</option>\n					</select>\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">分配路由</label>\n\n                  <div class="col-sm-10">\n                     <div class="checkbox" ng-show="roleRouterGateways">\n                  		<label><input type="checkbox" ng-model="selectedAllRoleRouterGateways"  value="true"/>全选</label>\n                  	</div>\n                  	<div class="checkbox" ng-repeat="item in roleRouterGateways | orderBy:\'ip_address\'" ng-show="item.vpn_connected_type == vpnRouterRole.vpn_connected_type">\n                  		<label><input type="checkbox" ng-model="item.selected"  value="true"/>{{item.ip_address}}\n                  		<samp class="sys_vpn_route_role_tag">/</samp>{{item.maskcode}}\n                  		<samp  class="sys_vpn_route_role_tag">\n                  		 <span class="label label-primary" ng-if="item.gateway == \'\'" title="用户本地局域网">用户本地局域网</span>\n                         <span class="label label-primary" ng-if="item.gateway == \'net_gateway\'" title="用户本地局域网">用户本地局域网</span>\n                 	     <span class="label label-primary" ng-if="item.gateway == \'vpn_gateway\'" title="VPN网络">VPN网络</span>\n                  		</samp>\n                  		\n                  		</label>\n                  	</div>\n                  </div>\n                </div>\n                <!-- \n                <div class="form-group" title="当需要为VPN路由添加特殊指令，可通过新增路由策略实现。">\n                  <label class="col-sm-2 control-label">路由策略(可选)</label>\n\n                  <div class="col-sm-10">\n                    <div class="checkbox" ng-show="roleRouterStrategys">\n                  		<label><input type="checkbox" ng-model="selectedAllRoleRouterStrategys" value="true"/>全选</label>\n                  	</div>\n                  	<div class="checkbox" ng-repeat="item in roleRouterStrategys | orderBy:\'command_name\'">\n                  		<label><input type="checkbox" ng-model="item.selected"  value="true"/>{{item.command_name}}</label>\n                  	</div>\n                  </div>\n                </div>\n                 -->\n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveRouterRole()">保存</button>\n                <button type="button" ng-show="vpnRouterRole.identifier" class="btn btn-block btn-danger btn-lg pull-right" data-toggle="modal" data-target="#modal-delete">删除</button>\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="cancelSaveVPNRouterRole()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除VPN路由角色“{{vpnRouterRole.name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNRouterRoles(vpnRouterRole)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/network-vpn/templates/network-vpn-router-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/network-vpn/templates/network-vpn-router-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">VPN路由列表\n                   <small ng-click="addNewVPNRouterRole()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增VPN路由</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>路由IP地址</th>\n                  <th>掩码地址</th>\n                  <th>网络类型</th>\n                  <!--<th>网关地址</th>-->\n                  <!--<th>跃点数</th>-->\n                  <th>VPN路由模式</th>\n                  <th></th>\n                </tr>\n         \n                <tr ng-repeat="item in routerGateways | orderBy:\'vpn_connected_type\'">\n                  <td ng-bind="item.ip_address"></td>\n                  <td ng-bind="item.maskcode"></td>\n                  \n                  <td>\n                     <span class="label label-primary" ng-if="item.gateway == \'\'" title="用户本地局域网">用户本地局域网</span>\n                     <span class="label label-primary" ng-if="item.gateway == \'net_gateway\'" title="用户本地局域网">用户本地局域网</span>\n                 	 <span class="label label-primary" ng-if="item.gateway == \'vpn_gateway\'" title="VPN网络">VPN网络</span>\n                  </td>\n                  <!--<td ng-bind="item.gateway"></td>-->\n                  <!--<td ng-bind="item.metric"></td>-->\n                  <td>\n                  	 <span class="label label-danger" ng-if="item.vpn_connected_type == \'1\'" title="网络直走VPN网络">仅VPN专线模式</span>\n                 	 <span class="label label-success" ng-if="item.vpn_connected_type == \'0\'" title="VPN网络+用户本地网络">含VPN专线</span>\n                  </td>\n                  <td>\n                    <a class="fa fa-edit edit-icon" ng-click="editvpnRouteGateway(item)" ng-href="javascript:void(0);"></a>\n                 	<i class="fa fa-trash-o delete-icon" ng-click="setDeletevpnRouteGateway(item)" data-toggle="modal" data-target="#modal-delete"></i>\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n       \n        <form class="form-horizontal" ng-show="showEditVPNRouterGateway">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label" title="如:172.16.0.0" >路由IP地址</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnRouteGateway.ip_address" id="ip_address"\n                     title="如:172.16.0.0"  placeholder="请输入路由IP地址,如:172.16.0.0">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label" title="如:255.255.255.0" >路由掩码地址</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" title="如:255.255.255.0" ng-model="vpnRouteGateway.maskcode" id="maskcode" placeholder="请输入路由掩码地址,如:255.255.255.0">\n                  </div>\n                </div>\n                \n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label" title="">网络类型</label>\n\n                  <div class="col-sm-10">\n                 	<select  ng-model="vpnRouteGateway.gateway" class="form-control" >\n							<option value="net_gateway">用户本地局域网</option>\n							<option value="vpn_gateway">VPN网络</option>\n					</select>\n                  \n                  </div>\n                </div>\n                \n                 <!-- \n                <div class="form-group">\n                  <label class="col-sm-2 control-label" title="如:net_gateway或192.168.10.168">网关地址(可选)</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" title="如:net_gateway或192.168.10.168" ng-model="vpnRouteGateway.gateway" id="gateway" placeholder="请输入网关地址(可选),如:net_gateway或192.168.10.168">\n                  </div>\n                </div>\n                 \n               \n                <div class="form-group">\n                    <label class="col-sm-2 control-label" title="如:net_gateway或192.168.10.168"></label>\n                    \n                    <div class="col-sm-10">\n                		<p>当前路由的网关为VPN网关时，网关地址可填 vpn_gateway;当前路由的网关为客户端所在的子网网关时,网关地址可填 net_gateway</p>\n               		</div>\n                </div>\n                \n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">跃点数(可选)</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnRouteGateway.metric" id="metric" placeholder="请输入网络跳跃数(可选)">\n                  </div>\n                </div>\n                -->\n               <div class="form-group">\n                  <label class="col-sm-2 control-label">路由模式</label>\n\n                  <div class="col-sm-10">\n                    <select ng-model="vpnRouteGateway.vpn_connected_type" class="form-control" >\n							<option value="1">仅VPN专线模式(网络直走VPN)</option>\n							<option value="0">含VPN专线模式(VPN网络+用户本地网络)</option>\n					</select>\n                  </div>\n                </div>\n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveVPNRouterGateway()">保存</button>\n                <button type="button" ng-show="vpnRouteGateway.identifier" class="btn btn-block btn-danger btn-lg pull-right" data-toggle="modal" data-target="#modal-delete">删除</button>\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="cancelSaveVPNRouterGateway()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除当前路由“{{vpnRouteGateway.ip_address}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNRouterGateway(vpnRouteGateway)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/network-vpn/templates/network-vpn-server-machine-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/network-vpn/templates/network-vpn-server-machine-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">VPN服务器列表\n                   <small ng-click="addNewVPNService()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增VPN服务器</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>vpn服务名称</th>\n                  <th>内网IP地址</th>\n                  <th>内网访问端口</th>\n                  <th>外网IP地址</th>\n                  <th>外网访问端口</th>\n                  <th>连接数</th>\n                  <th>在线连接数</th>\n                  <th>\n		           </th>\n                </tr>\n         \n                <tr ng-repeat="item in sysVPNServers | orderBy:\'name\'">\n                  <td ng-bind="item.name" class="ion ion-ios-monitor-outline"></td>\n                  <td ng-bind="item.machine"></td>\n                  <td ng-bind="item.port"></td>\n                  <td ng-bind="item.machine_hostname"></td>\n                  <td ng-bind="item.machine_port"></td>\n                  <td ng-bind="item.connections"></td>\n                  <td ng-bind="item.activitys"></td>\n                  <td>\n                    <a class="fa fa-edit edit-icon" ng-click="editVPNServers(item)" ng-href="javascript:void(0);"></a>\n                 	<i class="fa fa-trash-o delete-icon" ng-click="setDeleteVPNServers(item)" data-toggle="modal" data-target="#modal-delete"></i>\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n       \n        <form class="form-horizontal" ng-show="showEditVPNServers">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">名称</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnMachine.name" id="name" placeholder="请输入主机名称">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">内网IP地址</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" data-inputmask="\'alias\': \'ip\'" data-mask ng-model="vpnMachine.machine" id="machine"  placeholder="请输入服务器内网IP地址___.___.___.___">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">内网访问端口</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnMachine.port" id="port" placeholder="请输入服务器内网访问端口">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">外网IP地址</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" data-inputmask="\'alias\': \'ip\'" data-mask ng-model="vpnMachine.machine_hostname" id="machine_hostname"  placeholder="请输入服务器外网IP地址___.___.___.___">\n                  </div>\n                </div>\n                \n	            <div class="form-group">\n	                  <label class="col-sm-2 control-label"></label>\n	\n	                  <div class="col-sm-10">\n	                  		如需要外网访问, 可配置外网访问地址; 动态IP地址可为空、不填写,系统自动获取服务器地址.\n	                  </div>\n	            </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">外网访问端口</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnMachine.machine_port" id="machine_port" placeholder="请输入服务器外网访问端口">\n                  </div>\n                </div>\n	            \n	            <div class="form-group">\n                  <label class="col-sm-2 control-label"></label>\n\n                  <div class="col-sm-10">\n                  		如需要外网访问, 请在路由器中配置外网访问的映射端口.\n                  </div>\n                </div>\n	                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">连接数</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control"  ng-model="vpnMachine.connections" id="connections" placeholder="请输入连接数数">\n                  </div>\n                </div>\n                \n                <!-- <div class="form-group">\n                  <label class="col-sm-2 control-label">描述</label>\n\n                  <div class="col-sm-10">\n                    <textarea class="form-control" rows="3" ng-model="vpnMachine.description" id="description" placeholder="描述..."></textarea>\n                  </div>\n                </div> -->\n                 \n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveVPNMachine()">保存</button>\n                <button type="button" ng-show="vpnMachine.identifier" class="btn btn-block btn-danger btn-lg pull-right" data-toggle="modal" data-target="#modal-delete">删除</button>\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="cancelSaveVPNMachine()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除服务器“{{vpnMachine.name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNServers(vpnMachine)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/network-vpn/templates/network-vpn-strategy-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/network-vpn/templates/network-vpn-strategy-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">VPN路由策略列表\n                   <small ng-click="addNewVPNStrategy()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增VPN路由策略</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>命令</th>\n                  <th>值</th>\n                  <th></th>\n                </tr>\n         \n                <tr ng-repeat="item in routerStrategys | orderBy:\'command_name\'">\n                  <td ng-bind="item.command_name"></td>\n                  <td ng-bind="item.command_value"></td>\n                  <td>\n                    <a class="fa fa-edit edit-icon" ng-click="editvpnRouteStrategys(item)" ng-href="javascript:void(0);"></a>\n                 	<i class="fa fa-trash-o delete-icon" ng-click="setDeletevpnRouteStrategys(item)" data-toggle="modal" data-target="#modal-delete"></i>\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n       \n        <form class="form-horizontal" ng-show="showEditVPNRouterStrategy">\n              <div class="box-body">\n                <div class="form-group" title="如指令 route-nopull" >\n                  <label class="col-sm-2 control-label" title="如指令 route-nopull" >路由策略指令</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnRouteStrategy.command_name" id="command_name"\n                     title="如指令 route-nopull"  placeholder="请输入路由策略指令">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label" title="" >路由策略指令值</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnRouteStrategy.command_value" id="command_value"\n                     title="如指令 route-nopull"  placeholder="请输入路由策略指令值(选填)">\n                  </div>\n                </div>\n                \n                \n                <div class="form-group" title="如指令 route-nopull" >\n                    <label class="col-sm-2 control-label"></label>\n                    \n                    <div class="col-sm-10">\n                		<p>当需要为VPN路由添加特殊指令，可通过新增路由策略实现。如需添加指令 route-nopull等</p>\n               		</div>\n                </div>\n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveVPNRouterStrategy()">保存</button>\n                <button type="button" ng-show="vpnRouteStrategy.identifier" class="btn btn-block btn-danger btn-lg pull-right" data-toggle="modal" data-target="#modal-delete">删除</button>\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="cancelSaveVPNRouterStrategy()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除当前路由策略“{{vpnRouteStrategy.command_name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNRouterStrategy(vpnRouteStrategy)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/network-vpn/templates/network-vpn-subnet-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/network-vpn/templates/network-vpn-subnet-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">本地网段设置\n                   <small ng-click="addNewSubnet()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增本地网段</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>子网IP地址</th>\n                  <th>子网掩码地址</th>\n                  <th></th>\n                </tr>\n         \n                <tr ng-repeat="item in subnets | orderBy:\'-isSystem\'">\n                  <td ng-bind="item.ip"></td>\n                  <td ng-bind="item.mask"></td>\n                  <td>\n                  	 <small class="label bg-gray" ng-if="item.isSystem">系统默认子网</small>\n                     <div ng-if="!item.isSystem">\n                    	<a class="fa fa-edit edit-icon" ng-click="editSubnet(item)" ng-href="javascript:void(0);"></a>\n                 	   <i class="fa fa-trash-o delete-icon" ng-click="setDeleteSubnet(item)" data-toggle="modal" data-target="#modal-delete"></i>\n                     </div>\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n       \n        <form class="form-horizontal" ng-show="showEditSubnet">\n              <div class="box-body">\n                <div class="form-group" >\n                  <label class="col-sm-2 control-label" >IP地址</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="subnet.ip" id="ip" placeholder="请输入子网IP地址">\n                  </div>\n                </div>\n                \n                <div class="form-group" >\n                  <label class="col-sm-2 control-label" >掩码地址</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="subnet.mask" id="mask" placeholder="请输入子网掩码地址">\n                  </div>\n                </div>\n                \n                \n                <div class="form-group" >\n                    <label class="col-sm-2 control-label"></label>\n                    \n                    <div class="col-sm-10">\n                		<p>可以将局域网的一些网段加入到系统保存，以便于用户更好的使用USB、本地打印、云盘等功能。</p>\n               		</div>\n                </div>\n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSubnet()">保存</button>\n                <button type="button" ng-show="subnet.identifier" class="btn btn-block btn-danger btn-lg pull-right" \n                data-toggle="modal" data-target="#modal-delete">删除</button>\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="cancelSaveSubnet()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除当前网段“{{subnet.ip}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNSubnet(subnet)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/next-vpn/templates/next-vpn-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/next-vpn/templates/next-vpn-view.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title">VPN服务器列表\n                   <small ng-click="addNewVPNService()" class="btn" \n                   ng-show="sysVPNServers.length == 0">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增VPN服务器</span>\n		            </small> \n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n            <div class="box-body table-responsive no-padding">\n              <table class="table table-hover">\n                <tr>\n                  <th>服务名称</th>\n                  <th>服务器内网IP地址</th>\n                  <th>内网访问端口</th>\n                  <th>网卡名称</th>\n                  <th>网卡IP地址</th>\n                  <th>网卡掩码地址</th>\n                  <th>网卡DNS</th>\n                  <th>流量转发网卡</th>\n                  <th>外网IP地址</th>\n                  <th>外网访问端口</th>\n                  <th>连接数</th>\n                  <th>在线连接数</th>\n                  <th></th>\n                </tr>\n         \n                <tr ng-repeat="item in sysVPNServers | orderBy:\'name\'">\n                  <td ng-bind="item.name" class="ion ion-ios-monitor-outline"></td>\n                  <td ng-bind="item.ipaddress"></td>\n                  <td ng-bind="item.machine_pri_port"></td>\n                  <td ng-bind="item.network_card_name"></td>\n                  <td ng-bind="item.network_card_ipaddress"></td>\n                  <td ng-bind="item.network_card_mask"></td>\n                  <td ng-bind="item.network_card_dns"></td>\n                  <td ng-bind="item.network_card_tsf_iface"></td>\n                  <td ng-bind="item.machine_pub_hostname"></td>\n                  <td ng-bind="item.machine_pub_port"></td>\n                  <td ng-bind="item.connections"></td>\n                  <td ng-bind="item.activitys"></td>\n                  <td>\n                    <i class="fa fa-edit edit-icon" ng-click="editVPNServer(item)""></i>\n<!--                  	<i class="fa fa-trash-o delete-icon" ng-click="setDeleteVPNServers(item)" data-toggle="modal" data-target="#modal-delete"></i> -->\n                  </td>\n                </tr>\n               \n              </table>\n            </div>\n            <!-- /.box-body -->\n       \n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除服务器“{{vpnMachine.name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNServers(vpnMachine)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/next-vpn/templates/vpn-server-peer.html",[]).run(["$templateCache",function(a){a.put("admin-app/next-vpn/templates/vpn-server-peer.html",'<div ng-show="!expectedCredentials">\n\n    <!-- Main content -->\n    <section class="content">\n      <div class="box">\n            <div class="box-header">\n              <h3 class="box-title" ng-show="!vpnMachine.identifier">新增VPN服务器\n              </h3>\n              <h3 class="box-title" ng-show="vpnMachine.identifier">编辑VPN服务器\n              </h3>\n            </div>\n            <!-- /.box-header -->\n           	<!-- Info boxes -->\n       \n        <form class="form-horizontal">\n              <div class="box-body">\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">服务器名称</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" ng-model="vpnMachine.name" id="name" class="form-control" placeholder="请输入服务器名称">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">服务器IP地址</label>\n\n                  <div class="col-sm-10">\n                     <input type="text" ng-model="vpnMachine.ipaddress" id="ipaddress" class="form-control" placeholder="请输入服务器IP地址,如:192.168.10.180">\n                  </div>\n                </div>\n\n               <div class="form-group">\n                  <label class="col-sm-2 control-label">外网IP地址(选填)</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" data-inputmask="\'alias\': \'ip\'" data-mask ng-model="vpnMachine.machine_pub_hostname" id="machine_pub_hostname"  placeholder="请输入服务器外网IP地址,如:113.66.50.80">\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">网卡名称</label>\n\n                  <div class="col-sm-10">\n                     <input type="text" ng-model="vpnMachine.network_card_name" id="network_card_name" class="form-control" placeholder="请输入服务器IP地址,如:192.168.10.180">\n                  </div>\n                </div>\n               <div class="form-group">\n                  <label class="col-sm-2 control-label">网卡IP地址</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" ng-model="vpnMachine.network_card_ipaddress" id="network_card_ipaddress" class="form-control" placeholder="请输入网卡IP地址,如:10.10.0.1">\n                  </div>\n                </div>\n                \n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">网卡掩码</label>\n\n                  <div class="col-sm-10">\n                    <!--<input type="text" ng-model="vpnMachine.network_card_mask" id="network_card_mask" class="form-control" placeholder="请输入网卡掩码地址地址,如:255.255.0.0">-->\n                    <select class="form-control" name="network_card_mask" ng-model="vpnMachine.network_card_mask" id="network_card_mask" title="请输入网卡掩码地址地址,如:255.255.0.0">\n                        <option value="128.0.0.0">128.0.0.0</option>\n                        <option value="192.0.0.0">192.0.0.0</option>\n                        <option value="224.0.0.0">224.0.0.0</option>\n                        <option value="240.0.0.0">240.0.0.0</option>\n                        <option value="248.0.0.0">248.0.0.0</option>\n                        <option value="252.0.0.0">252.0.0.0</option>\n                        <option value="254.0.0.0">254.0.0.0</option>\n                        <option value="255.0.0.0">255.0.0.0</option>\n                        <option value="255.128.0.0">255.128.0.0</option>\n                        <option value="255.192.0.0">255.192.0.0</option>\n                        <option value="255.224.0.0">255.224.0.0</option>\n                        <option value="255.240.0.0">255.240.0.0</option>\n                        <option value="255.248.0.0">255.248.0.0</option>\n                        <option value="255.252.0.0">255.252.0.0</option>\n                        <option value="255.254.0.0">255.254.0.0</option>\n                        <option value="255.255.0.0">255.255.0.0</option>\n                        <option value="255.255.128.0">255.255.128.0</option>\n                        <option value="255.255.192.0">255.255.192.0</option>\n                        <option value="255.255.224.0">255.255.224.0</option>\n                        <option value="255.255.240.0">255.255.240.0</option>\n                        <option value="255.255.248.0">255.255.248.0</option>\n                        <option value="255.255.252.0">255.255.252.0</option>\n                        <option value="255.255.254.0">255.255.254.0</option>\n                        <option value="255.255.255.0">255.255.255.0</option>\n                        <option value="255.255.255.128">255.255.255.128</option>\n                        <option value="255.255.255.192">255.255.255.192</option>\n                        <option value="255.255.255.224">255.255.255.224</option>\n                        <option value="255.255.255.240">255.255.255.240</option>\n                        <option value="255.255.255.248">255.255.255.248</option>\n                        <option value="255.255.255.252">255.255.255.252</option>\n                        <option value="255.255.255.255">255.255.255.255</option>\n                      </select>\n                  </div>\n                </div>\n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">网卡DNS</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" ng-model="vpnMachine.network_card_dns" id="network_card_dns" class="form-control" placeholder="请输入网卡DNS地址地址,如:8.8.8.8">\n                  </div>\n                </div>\n\n                \n                \n               <div class="form-group">\n                  <label class="col-sm-2 control-label">VPN流量转发接口(网卡)</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" ng-model="vpnMachine.network_card_tsf_iface" id="network_card_tsf_iface" class="form-control" placeholder="请输入VPN流量转发接口(网卡),如:eth0">\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label class="col-sm-2 control-label">内网访问端口</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" ng-model="vpnMachine.machine_pri_port" id="machine_pri_port" class="form-control" placeholder="内网访问端口,如:58866">\n                    <!-- \n                    <select ng-model="vpnMachine.machine_pri_port" id="machine_pri_port" class="form-control">\n                      <option ng-repeat="port in demoServers.ports">{{port}}</option>\n                    </select>\n                    -->\n                  </div>\n                </div>\n                \n                \n	            <div class="form-group">\n	                  <label class="col-sm-2 control-label"></label>\n	\n	                  <div class="col-sm-10">\n	                  		如需要外网访问, 可配置外网访问地址; 动态IP地址可为空、不填写,系统自动获取服务器地址.\n	                  </div>\n	            </div>\n                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">外网访问端口(选填)</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" ng-model="vpnMachine.machine_pub_port" id="machine_pub_port" placeholder="请输入服务器外网访问端口,如:8443">\n                  </div>\n                </div>\n	            \n	            <div class="form-group">\n                  <label class="col-sm-2 control-label"></label>\n\n                  <div class="col-sm-10">\n                  		如需要外网访问, 请在路由器中配置外网访问的映射端口.\n                  </div>\n                </div>\n	                \n                <div class="form-group">\n                  <label class="col-sm-2 control-label">连接数</label>\n\n                  <div class="col-sm-10">\n                    <input type="text" class="form-control" disabled  ng-model="vpnMachine.connections" id="connections" placeholder="请输入连接数数">\n                  </div>\n                </div>\n                \n                <!-- <div class="form-group">\n                  <label class="col-sm-2 control-label">描述</label>\n\n                  <div class="col-sm-10">\n                    <textarea class="form-control" rows="3" ng-model="vpnMachine.description" id="description" placeholder="描述..."></textarea>\n                  </div>\n                </div> -->\n                 \n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveVPNMachine()">保存</button>\n<!--            <button type="button" ng-show="vpnMachine.identifier" class="btn btn-block btn-danger btn-lg pull-right" data-toggle="modal" data-target="#modal-delete">删除</button> -->\n                <button type="button" class="btn btn-block btn-lg pull-right" ng-click="cancelSaveVPNMachine()">取消</button>\n             \n              </div>\n              <!-- /.box-footer -->\n            </form>\n       </div>\n       <!-- /.box -->    \n    </section>\n   \n   \n   \n        <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除服务器“{{vpnMachine.name}}”吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteVPNServers(vpnMachine)" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n        <div class="modal fade" id="modal-default">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示:</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/personal/templates/personal-info.html",[]).run(["$templateCache",function(a){a.put("admin-app/personal/templates/personal-info.html",'<div ng-show="!expectedCredentials">\n\n<section class="content-header">\n      <h1>\n        个人信息\n        <small ng-bind="userInformation.username"></small>\n      </h1>\n   \n</section>\n\n    <!-- Main content -->\n    <section class="content">\n    \n       <div class="box box-default">\n   \n        <!-- /.box-header -->\n        <div class="box-body">\n          <div class="row">\n            <div class="col-md-6">\n              <div class="form-group">\n                <label>用户名</label>\n                <input type="text" value="{{userInformation.username}}" disabled="disabled" class="form-control">\n              </div>\n              <!-- /.form-group -->\n              <div class="form-group">\n                <label>管理员身份</label>\n                <select class="form-control select2" disabled="disabled" style="width: 100%;">\n                  <option selected="selected">是</option>\n                  <option>否</option>\n                </select>\n              </div>\n              <!-- /.form-group -->\n            </div>\n            <!-- /.col -->\n            <div class="col-md-6">\n              <div class="form-group">\n                <label>昵称</label>\n                 <input type="text" ng-model="userInformation.nickname" class="form-control">\n              </div>\n              <!-- /.form-group -->\n              <div class="form-group">\n                <label>工号</label>\n                 <input type="text" ng-model="userInformation.worknumber" class="form-control">\n              </div>\n              <!-- /.form-group -->\n            </div>\n            <!-- /.col -->\n          </div>\n          <!-- /.row -->\n        </div>\n        <!-- /.box-body -->\n        <div class="box-footer">\n          <div class="btn btn-block btn-primary btn-lg" ng-click="saveSetting()">保存修改</div>\n        </div>\n      </div>\n      <!-- /.box -->\n       \n    \n       <div class="box box-info">\n            <div class="box-header with-border">\n              <h3 class="box-title">更新密码</h3>\n            </div>\n            <!-- /.box-header -->\n            <!-- form start -->\n            <form class="form-horizontal">\n              <div class="box-body">\n                <div class="form-group">\n                  <label for="inputEmail3" class="col-sm-2 control-label">原登录密码</label>\n\n                  <div class="col-sm-10">\n                    <input type="password" ng-model="userPasswdInformation.oldPassword" class="form-control" id="old-password" placeholder="请输入原登录密码">\n                  </div>\n                </div>\n                \n                <div class="form-group">\n                  <label for="inputPassword3" class="col-sm-2 control-label">新密码</label>\n\n                  <div class="col-sm-10">\n                    <input type="password" ng-model="userPasswdInformation.newPassword" class="form-control" id="new-password" placeholder="请输入新密码">\n                  </div>\n                </div>\n                 \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer">\n                <button type="button" class="btn btn-block btn-primary btn-lg" ng-click="updatePassword()">更新密码</button>\n              </div>\n              <!-- /.box-footer -->\n            </form>\n          </div>\n             \n    </section>\n    \n    \n	<div class="modal fade" id="modal-default_1"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message1"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n       <div class="modal fade" id="modal-default_2"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message2"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/role/templates/role-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/role/templates/role-manage.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">编辑角色信息</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				 <div class="row box-body">\n					<div class="form-group row box-body">\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">名称</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="role.name" id="name" placeholder="请输入角色名称">\n							</div>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">所属部门</label>\n	\n							<div class="col-sm-10">\n								<select ng-model="role.departmentIdentifier" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option ng-repeat="sysDepartment in sysDepartments | orderBy:\'name\'" value="{{sysDepartment.identifier}}">{{sysDepartment.name}}</option>\n								</select>\n							</div>\n						</div>\n					</div>\n					\n					\n					<div class="form-group row box-body">\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">权限</label>\n	\n							<div class="col-sm-10 checkbox">\n							    <div class="row box-body">\n							        \n									<label class="col-xs-12">\n										<input ng-model="selectedAllRolePermission" type="checkbox" value="true">\n										全选\n									</label>\n									\n									<label ng-repeat="permission in rolePermissions | orderBy:\'identifier\'" class="col-xs-12" ng-show="permission.show">\n										<input ng-model="permission.selected" type="checkbox" value="true">\n										{{permission.name}}\n									</label>\n							    </div>\n							</div>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">分配应用</label>\n						    \n							<div class="col-sm-10 checkbox">\n								<div class="row box-body">\n								    \n									<label class="col-xs-12">\n										<input ng-model="selectedAllSysApplication" type="checkbox" value="true">\n										全选\n									</label>\n									\n									<label ng-repeat="sysApplication in sysApplications | orderBy:\'name\'" class="col-xs-12">\n										<input ng-model="sysApplication.selected" type="checkbox" value="true">\n										{{sysApplication.name}}\n									</label>\n								</div>\n							</div>\n						</div>\n					</div>\n					\n					<div class="form-group row box-body">\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">自启动应用</label>\n	\n							<div class="col-sm-10 checkbox">\n							    <div class="row box-body">\n							        <label class="col-xs-12">\n										<input ng-model="selectedAllAutoApplication" type="checkbox" value="true">\n										全选\n									</label>\n									<label ng-repeat="autoOpenApplication in sysApplications | orderBy:\'name\'" class="col-xs-12" ng-if="autoOpenApplication.selected">\n										<input ng-model="autoOpenApplication.isAutoApplication" type="checkbox" value="true">\n										{{autoOpenApplication.name}}\n									</label>\n							    </div>\n							</div>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						     <label  class="col-sm-2 control-label">描述</label>\n		\n			                  <div class="col-sm-10">\n			                    <textarea class="form-control" rows="3" ng-model="role.description" id="description" placeholder="角色描述..."></textarea>\n			                  </div>\n						</div>\n					</div>\n				</div>\n				 \n				<!-- /.box-body -->\n				\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="saveRole()">保存</button>\n					 <button type="button" class="btn btn-block btn-danger btn-lg pull-right" \n                      data-toggle="modal" data-target="#modal-delete-application" \n                      ng-if="role.identifier">删除</button>\n                     <button type="button" class="btn btn-block btn-lg pull-right" ng-click="back()">取消</button>\n                \n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	<div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n        \n        \n	<div class="modal fade" id="modal-delete-application">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title">提示:</h4>\n				</div>\n				<div class="modal-body">\n					<p>删除后数据将无法恢复!确认要删除当前角色吗?</p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteRole()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n        \n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/role/templates/role-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/role/templates/role-new.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">新增角色</h3>\n\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="row box-body">\n					<div class="form-group row box-body">\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">名称</label>\n	\n							<div class="col-sm-10">\n								<input type="text" class="form-control"\n									ng-model="role.name" id="name" placeholder="请输入角色名称">\n							</div>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">所属部门</label>\n	\n							<div class="col-sm-10">\n								<select ng-model="role.departmentIdentifier" class="form-control select2">\n									<option value="">--请选择--</option>\n									<option ng-repeat="sysDepartment in sysDepartments | orderBy:\'name\'" value="{{sysDepartment.identifier}}">{{sysDepartment.name}}</option>\n								</select>\n							</div>\n						</div>\n					</div>\n					\n					\n					<div class="form-group row box-body">\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">权限</label>\n	\n							<div class="col-sm-10 checkbox">\n							    <div class="row box-body">\n							        \n									<label class="col-xs-12">\n										<input ng-model="selectedAllRolePermission" type="checkbox" value="true">\n										全选\n									</label>\n									\n									<label ng-repeat="permission in rolePermissions | orderBy:\'identifier\'" class="col-xs-12" ng-show="permission.show">\n										<input ng-model="permission.selected" type="checkbox" value="true">\n										{{permission.name}}\n									</label>\n							    </div>\n							</div>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">分配应用</label>\n						    \n							<div class="col-sm-10 checkbox">\n								<div class="row box-body">\n								    \n									<label class="col-xs-12">\n										<input ng-model="selectedAllSysApplication" type="checkbox" value="true">\n										全选\n									</label>\n									\n									<label ng-repeat="sysApplication in sysApplications | orderBy:\'name\'" class="col-xs-12">\n										<input ng-model="sysApplication.selected" type="checkbox" value="true">\n										{{sysApplication.name}}\n									</label>\n								</div>\n							</div>\n						</div>\n					</div>\n					\n					<div class="form-group row box-body">\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						    <label  class="col-sm-2 control-label">自启动应用</label>\n	\n							<div class="col-sm-10 checkbox">\n							    <div class="row box-body">\n							        <label class="col-xs-12">\n										<input ng-model="selectedAllAutoApplication" type="checkbox" value="true">\n										全选\n									</label>\n									<label ng-repeat="autoOpenApplication in sysApplications | orderBy:\'name\'" class="col-xs-12" ng-if="autoOpenApplication.selected">\n										<input ng-model="autoOpenApplication.isAutoApplication" type="checkbox" value="true">\n										{{autoOpenApplication.name}}\n									</label>\n							    </div>\n							</div>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12 row">\n						     <label  class="col-sm-2 control-label">描述</label>\n		\n			                  <div class="col-sm-10">\n			                    <textarea class="form-control" rows="3" ng-model="role.description" id="description" placeholder="角色描述..."></textarea>\n			                  </div>\n						</div>\n					</div>\n				</div>\n				 \n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="save()">保存</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n			</form>\n		</div>\n\n	</section>\n	\n	\n	<div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/role/templates/role-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/role/templates/role-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">角色列表\n				   <small ng-click="showAddNewRole()" class="btn">\n		              <i class="fa fa-plus"></i>\n		              <span class="">新增角色</span>\n		            </small> \n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- Info boxes -->\n			<div class="box-body">\n			    <div class="input-group">\n			    	<span class="input-group-addon"><i class="fa fa-search"></i></span>\n			  		<input class="form-control" placeholder="请输入关键字进行查找" type="text" ng-model="search_conditions">\n			    </div>\n			</div>    \n			<!-- Info boxes -->\n			<div class="row box-body">\n				<div class="col-md-6 col-sm-6 col-xs-12" ng-repeat="role in roles | orderBy:\'name\'">\n					<div class="info-box">\n						<span class="info-box-icon bg-red"> <!-- <img\n							class="application-list-icon" alt=""\n							ng-src="/{{department.icon}}"> -->\n							<i class="ion" ng-bind="role.iconText"></i>\n						</span>\n\n						<div class="info-box-content">\n							<a class="info-box-text" \n							ng-href="#/system-manage/role/manage/{{role.identifier}}">\n							<span class="word-text-none" ng-bind="role.name"></span> \n							<span class="word-text-none" ng-if="role.description" >({{role.description}})</span>\n							</a>\n							<span class="info-box-text word-text-none">所属部门:{{role.department.name}}</span>\n						    <span\n								class="info-box-number"> <a class="fa fa-edit edit-icon"  title="编辑"\n								ng-href="#/system-manage/role/manage/{{role.identifier}}"></a> <i\n								class="fa fa-trash-o delete-icon"  title="删除" data-toggle="modal"\n								ng-click="setDeleteRole(role)"\n								data-target="#modal-default"></i>\n							</span>\n						</div>\n						<!-- /.info-box-content -->\n					</div>\n					<!-- /.info-box -->\n				</div>\n			</div>\n\n			\n			\n			<div class="overlay" ng-show="data_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="deleteRole()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default"  data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/system/templates/system-auth-client-security.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-auth-client-security.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					用户行为审计设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">录屏监控</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="ClientSecurity.client_screen_record_setting" \n							value="true">启用\n							\n							</label>\n							<p>(当需要对用户使用/操作应用进行监控审计的时候,管理员可开启启动录屏监控这一功能,并可分配到角色或用户使用录屏进行监控)</p>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="ClientSecurity.client_screen_record_setting" >\n						<label  class="col-sm-2 control-label">录屏监控管理员行为</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="ClientSecurity.open_client_screen_record_setting" \n							value="true">启用\n							</label>\n							<p>(启用后,系统管理员admin在使用应用过程中，系统将会使用录屏进行监控)</p>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">上网行为监控</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="ClientSecurity.client_ac_auth_setting" \n							value="true">启用\n							</label>\n							<p>(结合深信服AC设备)</p>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="ClientSecurity.client_ac_auth_setting">\n						<label  class="col-sm-2 control-label">用户上网行为认证地址</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="ClientSecurity.client_ac_auth_tc_onlineuser_url" class="form-control" \n							placeholder="用户上网行为认证地址(跨屏服务器内网地址):如,https://192.168.10.186:58888或http://192.168.10.186:58887" \n							title="用户上网行为认证地址(跨屏服务器内网地址):如,https://192.168.10.186:58888或http://192.168.10.186:58887">\n					\n							<p>(跨屏服务器内网地址)</p>\n						</div>\n					</div>\n					\n				 </form>\n			</div>\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	<modal-alert-message></modal-alert-message>\n	\n	\n</div>')}]);angular.module("admin-app/system/templates/system-auth-login.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-auth-login.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					用户登录设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n				   \n				    \n					<div class="form-group">\n						<label  class="col-sm-2 control-label">登录界面APP下载入口</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="webClientAuth.close_app_download_url_ui" value="true">关闭\n							</label>\n						</div>\n					</div>\n				     \n				\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">记住用户名密码功能</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="webClientAuth.close_remember_account_login_feature_show" \n							value="true">关闭(将自动取消自动登录功能)\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">自动登录功能</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="webClientAuth.close_auto_login_feature_show" \n							value="true">关闭(不影响记住用户名和密码功能)\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">登录时,必须输入工号</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="webClientAuth.user_login_auth_code_feature_show" \n							value="true">\n							    开启(管理员必须在用户管理功能中“导入用户-工号表”，若没有导入表又开启此功能，用户将无法登录。)\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">密码重置</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="webClientAuth.user_login_update_passwd" \n							value="true">开启(第一次登录成功后,必须修改密码)\n							</label>\n						</div>\n					</div>\n					\n					\n				 </form>\n			</div>\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	<modal-alert-message></modal-alert-message>\n	\n</div>')}]);angular.module("admin-app/system/templates/system-auth-vpn.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-auth-vpn.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					系统SSLVPN设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n				   \n					<div class="form-group">\n						<label  class="col-sm-2 control-label">客户端SSLVPN功能 </label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sslvpn.vpn_auth_feature_close_switch" value="true">\n							不开启\n							</label>\n							<p>\n							(如果已使用其他vpn, 可关闭此sslvpn功能;\n							否则必须使用sslvpn才可以打开应用;\n							如未开启其他vpn,又关闭sslvpn功能,将会出现无法打开应用的情况)	\n							</p>\n						</div>\n					</div>\n				   \n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">下一代VPN</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sslvpn.virwork_super_vpn_feature_switch" value="true">启用\n							</label>\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">用户账号认证SSLVPN</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sslvpn.vpn_auth_passwd_switch" value="true">启用\n							</label>\n						</div>\n					</div>\n				\n					<div class="form-group"  ng-show="sslvpn.vpn_auth_passwd_switch">\n						<label  class="col-sm-2 control-label">认证码超时</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sslvpn.vpn_auth_passwd_timeout_switch" \n							value="true">启动\n							</label>\n							<p>(启动后系统默认每三分钟更新一次认证码)</p>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="sslvpn.vpn_auth_passwd_switch">\n						<label  class="col-sm-2 control-label">固定认证码</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sslvpn.vpn_auth_passwd_defined_switch" \n							value="true">启动\n							</label>\n						</div>\n					</div>\n					\n					\n 					<div class="form-group" ng-show="sslvpn.vpn_auth_passwd_switch && sslvpn.vpn_auth_passwd_defined_switch">\n						<label  class="col-sm-2 control-label">SSLVPN认证码</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="sslvpn.vpn_auth_passwd" \n							class="form-control" placeholder="输入固定的SSLVPN认证码(字母数字的组合).如:SxTaD2B5" \n							title="输入固定的SSLVPN认证码(字母数字的组合).如:SxTaD2B5">\n						</div>\n					</div>\n					\n				 </form>\n			</div>\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	<modal-alert-message></modal-alert-message>\n	\n</div>')}]);angular.module("admin-app/system/templates/system-auth-watermark.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-auth-watermark.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					虚拟兼容模式下，应用水印设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">水印设置</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="watermark.client_connection_canvas_watermark_switch" \n							value="true">开启\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="watermark.client_connection_canvas_watermark_switch">\n						<label  class="col-sm-2 control-label">自定义水印内容</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="watermark.client_connection_canvas_watermark_contents_switch" \n							value="true">开启(不开启,将按照格式为：“应用名 用户名 时间” 使用, 如: CRM lisi 2018-5-22 16:41:40 使用)\n							</label>\n						</div>\n					</div>\n 					<div class="form-group" ng-show="watermark.client_connection_canvas_watermark_contents_switch">\n						<label  class="col-sm-2 control-label">水印内容</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="watermark.client_connection_canvas_watermark_contents" \n							class="form-control" placeholder="请输入水印内容：若为空,则按系统模式格式" \n							title="请输入水印内容：若为空,则按系统模式格式">\n						</div>\n					</div>\n					\n					\n				 </form>\n			</div>\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	<modal-alert-message></modal-alert-message>\n	\n</div>')}]);angular.module("admin-app/system/templates/system-cloudstorage.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-cloudstorage.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					系统云盘设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n					 \n 					<div class="form-group">\n						<label  class="col-sm-2 control-label">云盘服务器地址</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="cloudstorage.driveMachine" \n							class="form-control" placeholder="请输入云盘服务器地址:___.___.___" \n							title="请输入云盘服务器地址:___.___.___">\n						</div>\n					</div>\n					\n					\n				 </form>\n			</div>\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            	<button ng-show="cloudstorage.driveMachine"  type="button" class="btn btn-block btn-primary btn-lg pull-right"\n            	 ng-click="openCloudstorage()">打开云盘系统</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	  \n	\n	<modal-alert-message></modal-alert-message>\n	\n	\n	\n</div>')}]);angular.module("admin-app/system/templates/system-license.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-license.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					许可管理\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<div class="alert alert-warning alert-dismissible">\n                <!-- <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> -->\n                <h4><i class="icon fa fa-warning"></i> 抱歉! </h4>\n                	当前版本,暂未提供上传 许可证书文件 功能.\n              </div>\n			</div>\n			\n		</div>\n		<!-- /.box-info -->\n		\n		<div class="box box-info">\n            <div class="box-header with-border">\n              <h3 class="box-title">系统许可状态</h3>\n            </div>\n            <!-- /.box-header -->\n            <!-- form start -->\n            <form class="form-horizontal">\n              <div class="box-body">\n                 \n                <table class="table table-hover home_page_table">\n                	<tbody>\n                		<tr>\n                			<td><label class="control-label">沙盒版本号:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.sandboxVersion"></small></label></td>\n                		</tr>\n                		<tr>\n                			<td><label class="control-label">WEB版本号:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.webVersion"></small></label></td>\n                		</tr>\n                		<tr>\n                			<td><label class="control-label">系统序列号:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.serialVersionUID"></small></label></td>\n                		</tr>\n                		<tr>\n                			<td><label class="control-label">SSL VPN用户数:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.sslVpnUsers"></small></label></td>\n                		</tr>\n                		<tr>\n                			<td><label class="control-label">虚拟沙盒用户数:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.sandboxUsers"></small></label></td>\n                		</tr>\n                		<tr>\n                			<td><label class="control-label">云盘用户数:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.cloudStorageUsers"></small></label></td>\n                		</tr>\n                		<tr>\n                			<td><label class="control-label">质保和升级日期:</label></td>\n                			<td><label class="control-label"><small ng-bind="systemOtherInformations.endTime"></small></label></td>\n                		</tr>\n                	</tbody>\n                </table>\n                \n              </div>\n              <!-- /.box-body -->\n              <div class="box-footer"> \n              </div>\n              <!-- /.box-footer -->\n            </form>\n          </div>\n	</section>\n</div>')}]);angular.module("admin-app/system/templates/system-logger.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-logger.html",'<div ng-show="!expectedCredentials">\n \n\n    <!-- Main content -->\n    <section class="content">\n               <!-- TABLE: LATEST ORDERS -->\n      <div class="box box-info">\n            <div class="box-header with-border">\n              <h3 class="box-title">系统日志</h3>\n            </div>\n            <!-- /.box-header -->\n           \n            <div class="box-body">\n              <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">\n						<div class="row">\n							<div class="col-sm-2">\n								<div class="dataTables_length" id="system-users-table_length">\n									<label>显示 <select name="system-users-table_length"\n										aria-controls="system-users-table"\n										class="form-control input-sm" ng-model="page_size">\n										    <option value="10">10</option>\n											<option value="25">25</option>\n											<option value="50">50</option>\n											<option value="100">100</option></select> 条记录\n									</label>\n								</div>\n							</div>\n							<div class="col-sm-2">\n								<input type="search" ng-model="search_condition"\n										class="form-control input-sm" placeholder="输入关键字进行过滤查找..."\n										aria-controls="system-users-table">\n							</div>\n							<div class="col-sm-2">\n								<a class="btn btn-block btn-primary" target="_blank"\n								 ng-href="/api/data/qyzs-db/loggers/output?token={{token}}">导出所有日志</a>\n							</div>\n							<div class="col-sm-2">\n								<button type="button" class="btn btn-block btn-danger" data-toggle="modal" data-target="#modal-delete-all">清空所有日志</button>\n							</div>\n							<div class="col-sm-2">\n								<button type="button" class="btn btn-block btn-danger" data-toggle="modal" data-target="#modal-delete">删除所选日志</button>\n							</div>\n             \n						</div>\n						<div class="row">\n							<div class="col-sm-12">\n				                <table id="system-loggers-table" class="table table-bordered table-striped">\n				                  <thead>\n				                  <tr>\n				                    <th>#</th>\n				                    <th>执行者</th>\n				                    <th>日志类别</th>\n				                    <th>操作</th>\n				                    <th>详情</th>\n				                    <th>内容</th>\n				                    <th>时间</th>\n				                  </tr>\n				                  </thead>\n				                  <tbody>\n				                  \n						               <tr ng-repeat="logger in objspage.objs | orderBy:\'-time\'">\n						                    <td>\n						                    <input type="checkbox" ng-model="logger.selected"/>\n						                    </td>\n						                    <td>{{logger.user}}</td>\n						                    <td>{{logger.type}}</td>\n						                    <td>{{logger.operat}}</td>\n						                    <td>{{logger.message}}</td>\n						                    <td>{{logger.application}}</td>\n						                    <td>{{logger.time | date : dateFormat}}</td>\n						                </tr>\n				                  </tbody>\n				                </table>\n			                </div>\n                     </div>\n                     \n                     <div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_info" id="system-users-table_info"\n									role="status" aria-live="polite">显示 {{objspage.page_row_start}}到 {{objspage.page_row_end}} 共\n									{{objspage.length}} 条记录</div>\n							</div>\n						</div>\n						<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_paginate paging_simple_numbers"\n									id="system-users-table_paginate">\n									<ul class="pagination">\n										<li class="paginate_button" ng-repeat="_vpage in objspage.page_objects" ng-class="{active:_vpage.active}">\n											<a href="javascript:(0)" ng-click="pagefornumber(_vpage.page)"\n											aria-controls="system-users-table" data-dt-idx="{{_vpage.page}}"\n											tabindex="0" ng-bind="_vpage.page" ></a>\n										</li>\n									</ul>\n								</div>\n							</div>\n						</div>\n              </div>\n              <!-- /.table-responsive -->\n            </div>\n            <!-- /.box-body -->\n            <!-- <div class="box-footer clearfix">\n              <a href="javascript:void(0)" class="btn btn-sm btn-default btn-flat pull-right">查看更多</a>\n            </div> -->\n						<!-- /.box-footer -->\n						\n			\n			\n			<div class="overlay" ng-show="data_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>			\n    </div>\n     <!-- /.box -->        \n        \n    \n              \n    </section>\n    \n    <div class="modal fade" id="modal-delete">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要删除日志吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="deleteLogger()" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n    <div class="modal fade" id="modal-delete-all">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">确认要清空所有日志吗?</h4>\n              </div>\n              <div class="modal-body">\n                <p>删除数据将不可恢复!</p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n                <button type="button" class="btn btn-danger" ng-click="removeAllLoggers()" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n<!-- /.content -->\n</div>    ')}]);angular.module("admin-app/system/templates/system-os-information.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-os-information.html",'<div ng-show="!expectedCredentials">\n    <section class="content-header">\n        <h1>\n            网关服务器设备状态信息\n            <small ng-if="featurePermission">({{info.os}})</small>\n        </h1>\n    </section>\n\n    <section class="content" ng-hide="featurePermission">\n        <div class="box">\n            <div class="box-body">\n                <form class="form-horizontal">\n\n                    <div class="form-group">\n                        <label class="col-sm-2 control-label">厂家口令</label>\n\n                        <div class="col-sm-10">\n                            <input type="text" ng-model="factoryCertificationPassword" class="form-control" placeholder="请输入厂家口令" title="请输入厂家口令">\n                        </div>\n                    </div>\n\n                </form>\n            </div>\n            <div class="box-footer">\n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="certificateFactoryPassword()">验证</button>\n            </div>\n        </div>\n    </section>\n\n    <!--    <system-os-char ng-show="featurePermission"></system-os-char>-->\n\n    <section class="content" ng-show="featurePermission">\n        <div class="box box-info">\n            <div class="box-header with-border">\n                <h3 class="box-title">CPU</h3>\n            </div>\n            <!-- /.box-header -->\n            <div class="box-body">\n                <table class="table table-hover home_page_table">\n                    <tbody>\n                        <tr>\n                            <td>\n                                <label class="control-label">名称:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.name"></small>\n                                </label>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label class="control-label">处理器标识:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.identifier"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">处理器编码:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.processorID"></small>\n                                </label>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label class="control-label">物理CPU包数:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.physicalPackageCount"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">物理CPU核数:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.physicalProcessorCount"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">逻辑CPU个数:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.logicalProcessorCount"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">用户进程使用率:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.user_usage"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">系统使用率:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.system_usage"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">空闲:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.idle_usage"></small>\n                                </label>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label class="control-label">线程数:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.threads"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td>\n                                <label class="control-label">进程数:</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.cpu.processes"></small>\n                                </label>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n            </div>\n            <div class="overlay" ng-show="data_loading">\n                <i class="fa fa-refresh fa-spin"></i>\n            </div>\n            <!-- /.box-body -->\n            <div class="box-footer">\n\n                <div class="box">\n                    <div class="box-header with-border">\n                        <h3 class="box-title">使用率最高进程列表</h3>\n                    </div>\n                    <!-- /.box-header -->\n                    <div class="box-body">\n\n                        <table class="table table-hover">\n                            <tbody>\n                                <tr>\n                                    <th>进程ID</th>\n                                    <th>CPU使用率(%)</th>\n                                    <th>内存使用率(%)</th>\n                                    <th>虚拟内存使用量</th>\n                                    <th>字节使用量</th>\n                                    <th>名称</th>\n                                </tr>\n                                <tr ng-repeat="proc in info.cpu.procs">\n                                    <td>\n                                        <label class="control-label" ng-bind="proc.pid"></label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label" ng-bind="proc.cpu_used"></label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label" ng-bind="proc.mem"></label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label" ng-bind="proc.vsz"></label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label" ng-bind="proc.rss"></label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label" ng-bind="proc.name"></label>\n                                    </td>\n                                </tr>\n\n                            </tbody>\n                        </table>\n\n                    </div>\n\n\n                    <div class="overlay" ng-show="data_loading">\n                        <i class="fa fa-refresh fa-spin"></i>\n                    </div>\n                    <!-- /.box-body -->\n                    <div class="box-footer">\n\n\n\n                    </div>\n                    <!-- /.box-footer -->\n                </div>\n\n            </div>\n            <!-- /.box-footer -->\n        </div>\n    </section>\n\n    <section class="content" ng-show="featurePermission">\n        <div class="box box-info">\n            <div class="box-header with-border">\n                <h3 class="box-title">内存</h3>\n            </div>\n            <!-- /.box-header -->\n            <div class="box-body">\n\n                <table class="table table-hover home_page_table">\n                    <tbody>\n                        <tr>\n                            <td>\n                                <label class="control-label">已使用：</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.memory.used"></small>\n                                </label>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label class="control-label">总共：</label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="info.memory.total"></small>\n                                </label>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <div class="overlay" ng-show="data_loading">\n                <i class="fa fa-refresh fa-spin"></i>\n            </div>\n        </div>\n    </section>\n\n\n    <section class="content" ng-show="featurePermission">\n        <div class="box box-info">\n            <div class="box-header with-border">\n                <h3 class="box-title">磁盘\n                    <small ng-if="disks">({{disks.length}}个)</small>\n                </h3>\n            </div>\n            <!-- /.box-header -->\n            <div class="box-body" ng-repeat="disk in info.disks">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <h5>磁盘#{{$index}}:{{disk.name}} </h5>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="col-xs-12">\n                        <table class="table table-hover home_page_table">\n                            <tbody>\n                                <tr>\n                                    <td>\n                                        <label class="control-label">名称：</label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label">\n                                            <small ng-bind="disk.name"></small>\n                                        </label>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>\n                                        <label class="control-label">类型：</label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label">\n                                            <small ng-bind="disk.model"></small>\n                                        </label>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>\n                                        <label class="control-label">大小：</label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label">\n                                            <small ng-bind="disk.size"></small>\n                                        </label>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>\n                                        <label class="control-label">序列号：</label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label">\n                                            <small ng-bind="disk.serial"></small>\n                                        </label>\n                                    </td>\n                                </tr>\n\n                                <tr>\n                                    <td>\n                                        <label class="control-label">分区数：</label>\n                                    </td>\n                                    <td>\n                                        <label class="control-label">\n                                            <small ng-bind="disk.partitions.length"></small>\n                                        </label>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="overlay" ng-show="data_loading">\n                <i class="fa fa-refresh fa-spin"></i>\n            </div>\n        </div>\n    </section>\n\n\n    <section class="content" ng-show="featurePermission">\n        <div class="box box-info">\n            <div class="box-header with-border">\n                <h3 class="box-title">网卡\n                    <samp ng-if="info.networkIFs">({{info.networkIFs.length}}个)</samp>\n                </h3>\n            </div>\n            <!-- /.box-header -->\n            <div class="box-body">\n                <table class="table table-hover">\n                    <tbody>\n                        <tr>\n                            <td>\n                                <label class="control-label">名称</label>\n                            </td>\n                            <td>\n                                <label class="control-label">IPV6</label>\n                            </td>\n                            <td>\n                                <label class="control-label">IPV4</label>\n                            </td>\n                            <td>\n                                <label class="control-label">MAC地址</label>\n                            </td>\n\n                            <td>\n                                <label class="control-label">传输速度</label>\n                            </td>\n                            <td>\n                                <label class="control-label">下载</label>\n                            </td>\n\n                            <td>\n                                <label class="control-label">上传</label>\n                            </td>\n                        </tr>\n                        <tr ng-repeat="nwk in info.networkIFs">\n                            <td>\n                                <label class="control-label">\n                                    {{nwk.name}}({{nwk.displayName}})\n                                </label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="nwk.ipv6"></small>\n                                </label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="nwk.ipv4"></small>\n                                </label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="nwk.macaddr"></small>\n                                </label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="nwk.mtu_spped"></small>\n                                </label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="nwk.traffic_received"></small>\n                                </label>\n                            </td>\n                            <td>\n                                <label class="control-label">\n                                    <small ng-bind="nwk.traffic_transmitted"></small>\n                                </label>\n                            </td>\n                        </tr>\n\n                    </tbody>\n                </table>\n            </div>\n\n            <div class="overlay" ng-show="data_loading">\n                <i class="fa fa-refresh fa-spin"></i>\n            </div>\n        </div>\n    </section>\n\n\n    <section class="content" ng-show="featurePermission">\n        <div class="box box-info">\n            <div class="box-header with-border">\n                <h3 class="box-title">声卡\n                    <samp>({{info.soundCards.length}}个)</samp>\n                </h3>\n            </div>\n            <!-- /.box-header -->\n            <div class="box-body">\n\n                <div class="box" ng-repeat="soundCard in info.soundCards">\n                    <div class="box-header with-border">\n                        <h3 class="box-title">声卡:#{{$index}}:{{soundCard.codec}}</h3>\n\n                        <div class="box-tools pull-right">\n                            <!-- <button type="button" class="btn btn-box-tool" data-widget="collapse">\n                                <i class="fa fa-minus"></i>\n                            </button>\n                           <button type="button" class="btn btn-box-tool" data-widget="remove">\n                                <i class="fa fa-times"></i>\n                            </button>-->\n                        </div>\n                    </div>\n                    <div class="box-body">\n                    </div>\n\n                    <div class="box-footer no-padding">\n                        <ul class="nav nav-pills nav-stacked">\n                            <li>\n                                <a href="javascript:void(0);" ng-bind="soundCard.name"></a>\n                            </li>\n                            <li>\n                                <a href="javascript:void(0);" ng-bind="soundCard.kernelVersion"></a>\n                            </li>\n                        </ul>\n                    </div>\n\n                </div>\n\n            </div>\n\n            <div class="overlay" ng-show="data_loading">\n                <i class="fa fa-refresh fa-spin"></i>\n            </div>\n        </div>\n    </section>\n\n\n\n\n    <modal-alert-message></modal-alert-message>\n\n</div>')}]);angular.module("admin-app/system/templates/system-sandbox-pc.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-sandbox-pc.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n		\n		   <div class="box-header with-border">\n				<h3 class="box-title">\n					Sandbox沙盒版本控制设置\n				</h3>\n			</div>\n			\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n						\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">电脑端沙盒客户端版本</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="sandbox_app.sandbox_last_version" \n							class="form-control" placeholder="请输入电脑端沙盒版本号,如:4.0.1.1" \n							title="请输入电脑端沙盒版本号,如:4.0.1.1">\n						</div>\n					</div>\n					\n						\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">Android沙盒客户端版本</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="sandbox_app.android_last_version" \n							class="form-control" placeholder="请输入Android沙盒版本号,如:4.0.1.1" \n							title="请输入Android沙盒版本号,如:4.0.1.1">\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">IOS沙盒客户端版本</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="sandbox_app.ios_last_version" \n							class="form-control" placeholder="请输入IOS沙盒版本号,如:4.0.1.1" \n							title="请输入IOS沙盒版本号,如:4.0.1.1">\n						</div>\n					</div>\n					\n						\n					<div class="form-group" ng-show="sandbox_app.ios_last_version">\n						<label  class="col-sm-2 control-label">IOS沙盒App Store下载地址</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="sandbox_app.ios_app_download_url" \n							class="form-control" placeholder="请输入IOS沙盒App Store下载地址" \n							title="请输入IOS沙盒App Store下载地址">\n						</div>\n					</div>\n					\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">自动检测版本更新</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sandbox_app.sandbox_app_auto_check_version_switch" value="true">开启\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">自动更新到最新版本</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sandbox_app.sandbox_app_auto_updated_version_switch" value="true">开启\n							</label>\n						</div>\n					</div>\n					\n				 </form>\n			</div>\n			\n			\n		\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					电脑端Sandbox沙盒安装设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n						\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">沙盒安装完,自动填写服务器地址</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sandbox_app.sandbox_app_auto_into_url_switch" value="true">开启\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="sandbox_app.sandbox_app_auto_into_url_switch">\n						<label  class="col-sm-2 control-label">使用域名填充</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n							<input type="checkbox" ng-model="sandbox_app.sandbox_app_auto_into_domain_switch" value="true">开启\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="sandbox_app.sandbox_app_auto_into_domain_switch">\n						<label  class="col-sm-2 control-label">服务器域名</label>\n			\n						<div class="col-sm-10 checkbox">\n							<input type="text" ng-model="sandbox_app.sandbox_app_auto_into_url" \n							class="form-control" placeholder="请输入服务器域名.如：gzyb.vvwork.com" \n							title="请输入服务器域名.如：gzyb.vvwork.com">\n						</div>\n					</div>\n					\n					\n				 </form>\n			</div>\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	\n	<modal-alert-message></modal-alert-message>\n	\n</div>')}]);angular.module("admin-app/system/templates/system-sandbox.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-sandbox.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					沙盒客户端管理\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<div class="alert alert-warning alert-dismissible">\n                <!-- <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> -->\n                <h4><i class="icon fa fa-warning"></i> 抱歉! </h4>\n                	当前版本,暂未提供上传 沙盒客户端 功能.\n              </div>\n			</div>\n			\n		</div>\n	</section>\n</div>')}]);angular.module("admin-app/system/templates/system-servers-network.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-servers-network.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					服务器网卡信息设置\n				</h3>\n			</div>\n			<div ng-hide="featurePermission">\n				<div class="box-body">\n					<form class="form-horizontal">\n\n						<div class="form-group">\n							<label class="col-sm-2 control-label">厂家口令</label>\n\n							<div class="col-sm-10">\n								<input type="text" ng-model="factoryCertificationPassword" class="form-control" placeholder="请输入厂家口令" title="请输入厂家口令">\n							</div>\n						</div>\n\n					</form>\n				</div>\n				<div class="box-footer">\n					<button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="certificateFactoryPassword()">验证</button>\n				</div>\n			</div>\n			<div class="box-body" ng-show="featurePermission">\n				<div class="box-group" id="accordion">\n					<div class="panel box box-primary">\n						<div class="box-header with-border" ng-click="toggleShowNetwork_info_expanded()">\n							<h4 class="box-title">\n								<a data-toggle="collapse" data-parent="#accordion" aria-expanded="{{network_info_expanded.shown}}" class="{{network_info_expanded.collapsed_clz}}">\n									查看网卡信息\n								</a>\n							</h4>\n						</div>\n						<div id="collapseOne" class="panel-collapse collapse {{network_info_expanded.showin}}" aria-expanded="{{network_info_expanded.shown}}">\n							<div class="box-body">\n								<div class="terminal">\n								</div>\n							</div>\n						</div>\n						\n						<div class="overlay" ng-show="network_info_loading">\n							<i class="fa fa-refresh fa-spin" style="color:#ffffff;"></i>\n						</div>\n					</div>\n					<div class="panel box box-primary">\n						<div class="box-header with-border" ng-click="toggleShowNetwork_form_expanded()">\n							<h4 class="box-title">\n								<a data-toggle="collapse" data-parent="#accordion" class="{{network_form_expanded.collapsed_clz}}" aria-expanded="{{network_form_expanded.shown}}">\n									设置网卡信息\n								</a>\n							</h4>\n						</div>\n						<div id="collapseTwo" class="panel-collapse collapse {{network_form_expanded.showin}}" aria-expanded="{{network_form_expanded.shown}}">\n							<div class="box-body">\n								<form class="form-horizontal">\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">IP地址</label>\n\n										<div class="col-sm-10">\n											<input type="text" ng-model="server_network.server_network_ip" class="form-control" placeholder="如：192.168.10.120" title="如：192.168.10.120">\n										</div>\n									</div>\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">掩码地址</label>\n\n										<div class="col-sm-10">\n											<input type="text" ng-model="server_network.server_network_netmask" class="form-control" placeholder="如：255.255.255.0" title="如：255.255.255.0">\n										</div>\n									</div>\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">网关地址</label>\n\n										<div class="col-sm-10">\n											<input type="text" ng-model="server_network.server_network_gateway" class="form-control" placeholder="如：192.168.10.168" title="如：192.168.10.168">\n										</div>\n									</div>\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">DNS地址1</label>\n\n										<div class="col-sm-10">\n											<input type="text" ng-model="server_network.server_network_dns1" class="form-control" placeholder="如：192.168.10.168" title="如：192.168.10.168">\n										</div>\n									</div>\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">DNS地址2</label>\n\n										<div class="col-sm-10">\n											<input type="text" ng-model="server_network.server_network_dns2" class="form-control" placeholder="如：192.168.10.168" title="如：192.168.10.168">\n										</div>\n									</div>\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">设置为默认路由</label>\n\n										<div class="col-sm-10">\n											<select ng-model="server_network.server_network_defroute" class="form-control select2">\n												<option value="false">否</option>\n												<option value="true">是</option>\n											</select>\n										</div>\n									</div>\n\n\n									<div class="form-group">\n										<label class="col-sm-2 control-label">网卡名称</label>\n\n										<div class="col-sm-10">\n											<select ng-model="server_network.server_network_adapter" class="form-control">\n												<option value="">--请选择--</option>\n												<option ng-repeat="networkif in networkIFs" value="{{networkif.name}}">{{networkif.name}}{{networkif.ipv4}}</option>\n											</select>\n<!--											<input type="text" ng-model="server_network.server_network_adapter" class="form-control" placeholder="如：ens192" title="如：ens192">-->\n										</div>\n									</div>\n\n								</form>\n							</div>\n							<div class="box-footer">\n								\n								<button ng-show="network_form_loading" type="button" class="btn btn-block btn-primary btn-lg pull-right">保存</button>\n								<button ng-show="!network_form_loading" type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveNetworkConfig()">保存</button>\n							</div>\n\n						</div>\n					</div>\n				</div>\n\n			</div>\n\n		</div>\n		<!-- /.box-info -->\n\n	</section>\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger" ng-click="submitNetWorkConfig()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n\n	<modal-alert-message></modal-alert-message>\n\n</div>')}]);angular.module("admin-app/system/templates/system-servers.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-servers.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					服务器访问设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n						\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">http访问端口(内网)</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="server.server_http_port" \n							class="form-control" placeholder="http访问端口(内网).如：80" \n							title="http访问端口(内网).如：80">\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">http访问端口(外网)</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="server.server_http_port_out" \n							class="form-control" placeholder="http访问端口(外网).如：80" \n							title="http访问端口(外网).如：80">\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">https访问端口(内网)</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="server.server_https_port" \n							class="form-control" placeholder="https访问端口(内网).如：443" \n							title="https访问端口(内网).如：443">\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">https访问端口(外网)</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="server.server_https_port_out" \n							class="form-control" placeholder="https访问端口(外网).如：443" \n							title="https访问端口(外网).如：443">\n						</div>\n					</div>\n					\n					\n				 </form>\n			</div>\n			\n			<div class="box-header with-border">\n				<h4>\n					<font style="vertical-align: inherit;">\n						<font style="vertical-align: inherit;">外网动态域名解析设置</font>\n					</font>\n			    </h4>\n			</div>\n			\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">外网域名动态IP解析</label>\n			\n						<div class="col-sm-10 checkbox">\n							<label>\n								<input type="checkbox" ng-model="server.vvwork_cdns_feaure_open_switch" \n						         value="true">\n							开启\n							</label>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">所属单位简称(英文字母、数字)</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="server.vvwork_simplename" \n							class="form-control" placeholder="如：gzyb" \n							title="如：gzyb">\n						</div>\n					</div>\n			\n							\n					<div class="form-group">\n						<label  class="col-sm-2 control-label">拥有固定的外网IP地址</label>\n			\n						<div class="col-sm-10">\n							<input type="text" ng-model="server.vvwork_cdns_client_ip_address" \n							class="form-control" placeholder="如：58.210.200.113" \n							title="如：58.210.200.113">\n							<p>\n								设置固定的外网IP地址，访问域名时将直接使用该地址.\n							</p>\n						</div>\n					</div>\n					 \n					<div class="form-group">\n						<label  class="col-sm-2 control-label">动态映射访问的协议</label>\n			\n						<div class="col-sm-10">\n							<select class="form-control"  ng-model="server.vvwork_simplename_network_protocol">\n								<option value="https">HTTPS</option>\n								<option value="http">HTTP</option>\n							</select>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label"></label>\n			\n						<div class="col-sm-10">\n							设置对应的单位简称通过域名访问，不需要记住动态的IP地址.(单位简称.vvwork.com 或  单位简称.virwork.com), 可以动态根据外网IP的变动而改变对应的访问IP.\n						</div>\n					</div>\n					\n				 </form>\n			</div>\n			\n			\n			\n		    <div class="box-footer"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="saveSystemParameters()">保存</button>\n            </div>\n            \n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	\n	<modal-alert-message></modal-alert-message>\n	\n</div>')}]);angular.module("admin-app/system/templates/system-support.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-support.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					技术支持\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<div class="alert alert-warning alert-dismissible">\n					<div class="row">\n						<div class="col-md-6 col-sm-6 col-xs-12">\n							<h4>\n							<i class="icon fa fa-phone"></i>服务热线:\n							<span ng-bind="virworkCopy.tel"></span>\n							</h4>\n						</div>\n						\n						<div class="col-md-6 col-sm-6 col-xs-12">\n							<h4>\n							 <i class="icon fa fa-envelope-o"></i>邮箱: \n							 <span ng-bind="virworkCopy.email"></span> \n							</h4>\n						</div>\n					</div>\n					<div class="row">\n						<div class="col-md-6 col-sm-6 col-xs-12">\n							<h4>\n							 <i class="icon fa fa-phone"></i>紧急联系:\n							 <span ng-bind="virworkCopy.tel_phone"></span> \n							</h4>\n						</div>\n						<div class="col-md-6 col-sm-6 col-xs-12">\n							<h4>\n							<i class="icon fa fa-comments-o"></i>QQ:\n							<span ng-bind="virworkCopy.qq"></span>\n							</h4>\n						</div>\n						\n					</div>\n 					  \n                 </div>\n			</div>\n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n</div>')}]);angular.module("admin-app/system/templates/system-terminal-command.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-terminal-command.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					网关日志\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n								<div class="form-group">\n									<label  class="col-sm-2 control-label">工具命令</label>\n			\n									<div class="col-sm-10">\n										<select ng-model="ssh_command_key" class="form-control">\n											<option value="">--请选择--</option>\n											<option value="{{command.name}}" ng-repeat="command in toolCommands | orderBy:\'name\'">{{command.name}}</option>\n										</select>\n									</div>\n								</div>\n								\n								\n								<div class="form-group" ng-show="ssh_command.options.required">\n									<label  class="col-sm-2 control-label">指定参数</label>\n			\n									<div class="col-sm-10">\n										<select ng-model="command_parameter" class="form-control">\n											<option value="">--请选择--</option>\n											<option value="{{option}}" ng-repeat="option in ssh_command.options.options">{{option}}</option>\n										</select>\n									</div>\n								</div>\n								\n								<div class="form-group" ng-show="ssh_command.input">\n									<label  class="col-sm-2 control-label">输入其他参数</label>\n			\n									<div class="col-sm-10">\n										<input ng-model="command_text" class="form-control" placeholder="{{ssh_command.title}}"/>\n									</div>\n								</div>\n								\n								<div class="form-group" ng-show="ssh_command.isLoggerCommand">\n									<label  class="col-sm-2 control-label">日志文件</label>\n			\n									<div class="col-sm-10">\n										<select ng-model="logger_key" class="form-control">\n											<option value="">--请选择--</option>\n											<option value="{{logger.name}}" ng-repeat="logger in loggerFiles">{{logger.name}}</option>\n										</select>\n									</div>\n								</div>\n								\n								<div class="form-group" ng-show="ssh_command.isLoggerCommand && logger_file.options.required">\n									<label  class="col-sm-2 control-label">日期</label>\n			\n									<div class="col-sm-10">\n										<select ng-model="logger_parameter" class="form-control">\n											<option value="">--请选择--</option>\n											<option value="{{option}}" ng-repeat="option in logger_file.options.options">{{option}}</option>\n										</select>\n									</div>\n								</div>\n					</form>\n			</div>\n\n		    <div class="box-footer" ng-if="ssh_command"> \n                <button type="button" class="btn btn-block btn-primary btn-lg pull-right" ng-click="getCommandResults()">发送指令</button>\n            </div>\n            \n            <div class="box-body" ng-show="showTerminalView">\n            	<div class="terminal">\n            		<!-- <p class="terminal-commands">\n            		  <samp>[admin@VirworkGatewayMachine ~]#</samp>\n            		  <i class="fa fa-terminal"></i>\n		              <span class="terminal-command">ipconfig</span>\n		            </p>\n            		<p class="terminal-result-row">docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</p>\n            		<p class="terminal-result-row">inet 172.17.0.1  netmask 255.255.0.0  broadcast 0.0.0.0</p>\n            		<p class="terminal-result-row">ether 02:42:e4:05:30:78  txqueuelen 0  (Ethernet)</p>\n			        <p class="terminal-result-row">RX packets 0  bytes 0 (0.0 B)</p>\n			        <p class="terminal-result-row">RX errors 0  dropped 0  overruns 0  frame 0</p>\n			        <p class="terminal-result-row">TX packets 0  bytes 0 (0.0 B)</p>\n			        <p class="terminal-result-row">TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</p> -->\n            	</div>\n			</div>\n			\n			<div class="overlay" ng-show="network_info_loading">\n				<i class="fa fa-refresh fa-spin" style="color:#ffffff;"></i>\n			</div>\n		</div>\n		<!-- /.box -->\n\n	</section>\n\n	<modal-alert-message></modal-alert-message>\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/system/templates/system-tools-ssh.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-tools-ssh.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					网关控制台\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<div class="alert alert-warning alert-dismissible">\n                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>\n                <h4><i class="icon fa fa-warning"></i> 抱歉! </h4>\n                	当前版本,暂未提供该功能.\n              </div>\n			</div>\n			\n		</div>\n	</section>\n</div>')}]);angular.module("admin-app/system/templates/system-website.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/system-website.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					网站信息设置\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n						\n					<div class="form-group">\n					      <table>\n					      	<tbody>\n					      		<tr>\n					      			<td><img id="logoImg" ng-src="{{logoImg_src}}" width="96" height="96" alt="/userdata/logo.png" title="" style=""></td>\n					      			<td><input type="file" upload-file-model="tricolorImg" \n								accept="image/png,image/jpeg"></td>\n								  </tr>\n								  <tr>\n									  <td></td>\n									  <td>\n										 <button type="button" class="btn btn-primary" ng-click="uploadTricolorImg()">上传网站欢迎界面Logo</button>\n									  </td>\n					      		\n								  </tr>\n					      	</tbody>\n					      </table>\n					</div>\n					\n					\n					<div class="form-group">\n					      <table>\n					      	<tbody>\n					      		<tr>\n					      			<td><img id="tricolorImg" ng-src="{{tricolorImg_src}}" width="96" height="96" alt="/userdata/tricolor.png"></td>\n								  <td><input type="file" upload-file-model="logoImg" \n								accept="image/png,image/jpeg"></td>\n								 \n								  </tr>\n								  <tr>\n									  <td></td>\n									  <td>\n							  				<button type="button" class="btn btn-primary" ng-click="uploadIcon()">上传网站LOGO图标</button>\n									  </td>\n					      		\n								  </tr>\n					      	</tbody>\n					      </table>\n					</div>\n					 \n					\n				 </form>\n			</div>\n			\n		</div>\n		<!-- /.box-info -->\n		\n	</section>\n	\n	<modal-alert-message></modal-alert-message>\n	\n</div>')}]);angular.module("admin-app/system/templates/virworkCloudstorageView.html",[]).run(["$templateCache",function(a){a.put("admin-app/system/templates/virworkCloudstorageView.html",'<div class="cloudstorage-view">\n	\n<modal-alert-message></modal-alert-message>\n	\n<iframe id="mainCloudIframe" name="mainCloudIframe" class="mainCloudIframe" ng-show="showVirworkCloudstorageWebView" ></iframe>\n</div>')}]);angular.module("admin-app/users/templates/users-manage.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-manage.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">编辑用户信息</h3>\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n			    <div class="box-body">\n				    <div class="form-group">\n						<label  class="col-sm-2 control-label" for="vusername">名称</label>\n	\n						<div class="col-sm-10">\n						\n						       <input type="text" class="form-control"\n									ng-model="user.basicInformation.username" style="display:none;" placeholder="请输入用户登录密码">\n						\n								<input type="text" class="form-control"\n									value="{{user.username}}" name="vusername" id="vusername" placeholder="请输入用户名称" disabled>\n								\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label" for="vpassword">密码</label>\n	\n				    	<div class="col-sm-10">\n							<input type="text" class="form-control"\n									ng-model="user.password" name="vpassword" id="vpassword" placeholder="请输入用户登录密码">\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label" for="nickname">昵称</label>\n	\n						<div class="col-sm-10">\n						    <input type="text" class="form-control"\n									ng-model="user.basicInformation.nickname" name="nickname" id="nickname" placeholder="请输入用户昵称">\n						</div>\n					</div>\n					\n					<div class="form-group" ng-show="user_login_auth_code_feature_show">\n						<label  class="col-sm-2 control-label" for="worknumber">工号</label>\n						    \n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n									ng-model="user.worknumber" name="worknumber" id="worknumber" placeholder="请输入用户工号">\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label" for="router_role">VPN路由角色</label>\n	\n						<div class="col-sm-10">\n							 <select ng-model="user_router_role" id="router_role"  class="form-control select2">\n							        <option value="">--请选择路由角色--</option>\n							    	<option ng-repeat="router_role in router_roles | orderBy:\'name\'" value="{{router_role.identifier}}" ng-bind="router_role.name"></option>\n							 </select>\n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label" for="department_role">用户部门角色</label>\n	\n						<div class="col-sm-10 checkbox">\n							    <div class="row box-body">\n							    	<label class="col-xs-12">\n										<input ng-model="selectedAllRoles" type="checkbox" value="true">\n										全选\n									</label>\n									<label ng-repeat="role in roles | orderBy:\'name\'" class="col-md-6 col-sm-6 col-xs-12">\n										<input ng-model="role.selected" type="checkbox" value="true">\n										{{role.name}}(所属部门:{{role.department.name}})\n									</label>\n							    </div>\n						</div>\n					</div>\n					\n					\n					 	 \n			    </div>\n			    </form>\n			    \n			<div class="box-header with-border">\n				<h3 class="box-title">用户登录限制</h3>\n		    </div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n			    <div class="box-body">\n				  \n					<div class="form-group checkbox">\n						<label  class="col-sm-2 control-label" >是否禁止登录</label>\n	\n							<div class="col-sm-10">\n							     <div class="row box-body">\n								     <label  class="col-xs-3 col-xs-6 col-xs-12" for="disabled">\n		\n									<input ng-model="userStatePermission.disabled" name="disabled" id="disabled" type="checkbox" value="true">\n										是否禁止登录</label>\n							     </div>\n							    \n						</div>\n					</div>\n					\n					<div class="form-group">\n						<label  class="col-sm-2 control-label" for="access_window_start">设置允许访问系统的时间</label>\n			\n						<div class="col-sm-10">\n							<input ng-model="userStatePermission.access_window_start" lenient-time \n							id="access_window_start" name="access_window_start" type="time" placeholder="HH:MM:SS"/>\n						</div>\n					</div>\n					<div class="form-group">\n							<label  class="col-sm-2 control-label" for="access_window_end">设置不允许访问系统的时间</label>\n		\n							<div class="col-sm-10">\n								 <input ng-model="userStatePermission.access_window_end" lenient-time \n								 name="access_window_end" id="access_window_end" type="time" placeholder="HH:MM:SS"/>\n							</div>\n					</div>\n				  <div class="form-group">\n						<label  class="col-sm-2 control-label" for="valid_from">账号激活日期</label>\n		\n							<div class="col-sm-10">\n									 <input ng-model="userStatePermission.valid_from" lenient-date\n									 name="valid_from" id="valid_from" type="date" placeholder="YYYY-MM-DD"/>\n							</div>\n					</div>\n					<div class="form-group">\n						<label  class="col-sm-2 control-label" for="valid_until">账号失效日期</label>\n		\n							<div class="col-sm-10">\n									 <input ng-model="userStatePermission.valid_until" lenient-date \n									 name="valid_until" id="valid_until" type="date" placeholder="YYYY-MM-DD"/>\n							</div>\n					</div>\n				<!-- /.box-body -->\n				<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="save()">保存</button>\n					<button type="button"\n						class="btn btn-block btn-lg pull-right"\n						ng-click="back()">取消</button>\n				</div>\n				<!-- /.box-footer -->\n				</div>\n			</form>\n			\n			\n		\n		</div>\n\n	</section>\n	\n	\n	<div class="modal fade" id="modal-default"  role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title">提示</h4>\n              </div>\n              <div class="modal-body">\n                <p ng-bind="message"></p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n              </div>\n            </div>\n            <!-- /.modal-content -->\n          </div>\n          <!-- /.modal-dialog -->\n        </div>\n        <!-- /.modal -->\n   \n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/users/templates/users-new-basic-input.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-new-basic-input.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					导入用户基本信息 \n					<a  href="download/template.xls" class="btn" target="_blank"> <i\n						class="fa fa-download"></i> <span class="">下载用户基本信息Excel模板</span>\n					</a>\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n					<div class="box-body">\n						\n						<div class="form-group row">\n							<div class="col-xs-12 contents-overflow-hidden">\n								<img ng-src="images/basic-info-example.png" class="form-group"/>\n							</div>\n						</div> \n						\n					    <div class="form-group row">\n					    	<div class="col-xs-6">\n						    	<label  class="col-sm-2 control-label" for="valid_from">加密方式</label>\n			\n								<div class="col-sm-10">\n										<select ng-model="databasePasswordType">\n											<option value="word">明文</option>\n											<option value="sha256">SHA-256</option>\n										</select>\n								</div>\n							</div>\n					    	<div class="col-xs-6"> <input type="file" upload-file-model="excelFile" \n								accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">\n							</div>\n					    </div>\n					    \n					</div>\n					<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="uploadFile()">上传</button>\n					</div>\n				</form>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n	<modal-alert-message></modal-alert-message>\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/users/templates/users-new-worknumber-input.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-new-worknumber-input.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					导入用户-工号信息 \n					<a  href="download/user_worknumber_template.xls" class="btn" target="_blank"> <i\n						class="fa fa-download"></i> <span class="">下载用户-工号信息Excel模板</span>\n					</a>\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<form class="form-horizontal">\n					<div class="box-body">\n					    <div class="form-group row">\n							<div class="col-xs-12 contents-overflow-hidden">\n								<img ng-src="images/worknumber-info-example.png" class="form-group"/>\n							</div>\n						</div> \n						\n						<div class="form-group">\n						     <div class="col-xs-12">\n						     	 <input type="file" upload-file-model="excelFile" \n								accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">\n						     </div>\n					    </div>\n					 </div>   \n					<div class="box-footer">\n					<button type="button"\n						class="btn btn-block btn-primary btn-lg pull-right"\n						ng-click="uploadFile()">上传</button>\n					</div>\n				</form>\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n \n	<modal-alert-message></modal-alert-message>\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/users/templates/users-new.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-new.html",'<div ng-show="!expectedCredentials">\n\n\n	<!-- Main content -->\n	<section class="content">\n\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">新增用户</h3>\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="vusername">名称</label>\n\n						<div class="col-sm-10">\n\n							<input type="text" class="form-control"\n								ng-model="user.basicInformation.username" style="display: none;"\n								placeholder="请输入用户登录密码"> <input type="text"\n								class="form-control" ng-model="user.username" name="vusername"\n								id="vusername" placeholder="请输入用户名称">\n\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="vpassword">密码</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control" ng-model="user.password"\n								name="vpassword" id="vpassword" placeholder="请输入用户登录密码">\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="nickname">昵称</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="user.basicInformation.nickname" name="nickname"\n								id="nickname" placeholder="请输入用户昵称">\n						</div>\n					</div>\n\n					<div class="form-group" ng-show="user_login_auth_code_feature_show">\n						<label class="col-sm-2 control-label" for="worknumber">工号</label>\n\n						<div class="col-sm-10">\n							<input type="text" class="form-control"\n								ng-model="user.worknumber" name="worknumber" id="worknumber"\n								placeholder="请输入用户工号">\n						</div>\n					</div>\n\n                    <!-- \n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="user_account_role">用户角色</label>\n\n						<div class="col-sm-10">\n							<select ng-model="user_account_role" id="user_account_role"\n								class="form-control select2">\n								<option value="">--请选择用户角色--</option>\n								<option value="is_feature_normal_user">普通用户</option>\n								<option value="is_feature_common_user">共享用户</option>\n								<option value="is_feature_sysadm_user">二级管理员</option>\n							</select>\n						</div>\n					</div>\n					\n\n					<div class="form-group" ng-if="user_account_role">\n						<label class="col-sm-2 control-label"></label>\n						<p class="col-sm-10">\n							<span ng-show="user_account_role == \'is_feature_normal_user\'">普通用户,拥有独立账户并使用所属部门角色的应用</span>\n							<span ng-show="user_account_role == \'is_feature_common_user\'">共享用户,可供多个用户共享账户并使用所属部门角色的应用(每个使用共享用户的用户不可修改个人信息和密码)</span>\n							<span ng-show="user_account_role == \'is_feature_sysadm_user\'">二级管理员,可拥有系统管理员的部分权限</span>\n						</p>\n					</div>\n					-->\n					<div class="form-group"\n						ng-show="user_account_role == \'is_feature_sysadm_user\'">\n						<label class="col-sm-2 control-label">系统功能</label>\n						<div class="col-sm-10 checkbox">\n                            <!-- \n							<div id="treeview-checkbox-demo">\n								<ul class="fa-ul">\n									<li><input type="checkbox"\n										ng-model="features.account_manage" value="account_manage"\n										class="tw-control">账户管理\n										<ul class="fa-ul collapse" aria-expanded="false"\n											style="height: 0">\n											<li data-value="department_manage"><input\n												type="checkbox" class="tw-control"\n												ng-model="features.department_manage"\n												value="department_manage">部门管理</li>\n											<li data-value="role_manage"><input type="checkbox"\n												class="tw-control" ng-model="features.role_manage"\n												value="role_manage">角色管理</li>\n											<li data-value="user_manage"><input type="checkbox"\n												class="tw-control" ng-model="features.user_manage"\n												value="user_manage">用户管理</li>\n										</ul></li>\n									<li><input type="checkbox" class="tw-control">PHP\n										<ul class="fa-ul collapse in" aria-expanded="true" style="">\n											<li data-value="PHP if..else"><input type="checkbox"\n												class="tw-control" value="PHP if..else">PHP if..else\n											</li>\n											<li><input type="checkbox" class="tw-control">\n												PHP Loops\n												<ul class="fa-ul collapse" aria-expanded="false"\n													style="height: 0px;">\n													<li data-value="For loop"><input type="checkbox"\n														class="tw-control" value="For loop">For loop</li>\n													<li data-value="While loop"><input type="checkbox"\n														class="tw-control" value="While loop">While loop</li>\n													<li data-value="Do WHile loop"><input type="checkbox"\n														class="tw-control" value="Do WHile loop">Do WHile\n														loop</li>\n												</ul></li>\n											<li><input type="checkbox" class="tw-control">PHP\n												arrays</li>\n										</ul></li>\n									<li><input type="checkbox" class="tw-control">jQuery\n										<ul class="collapse fa-ul">\n											<li data-value="jQuery append"><input type="checkbox"\n												class="tw-control" value="jQuery append">jQuery\n												append</li>\n											<li data-value="jQuery prepend"><input type="checkbox"\n												class="tw-control" value="jQuery prepend">jQuery\n												prepend</li>\n										</ul></li>\n								</ul>\n							</div>\n							-->\n							<aside class="main-sidebar2">\n\n								<!-- Left side column. contains the logo and sidebar -->\n								<!-- sidebar: style can be found in sidebar.less -->\n								<section class="sidebar">\n\n									<!-- sidebar menu: : style can be found in sidebar.less -->\n									<ul class="sidebar-menu tree" data-widget="tree">\n										<!-- 账户管理:部门、角色、用户 -->\n										<li class="treeview"><a\n											ng-click="changedFeatures(\'account_manage\')"\n											href="javascript:void(0)"> <input\n												ng-model="features.account_manage" type="checkbox"\n												value="true"> <i class="fa fa-users"></i> <span>账户管理</span>\n												<span class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n\n												<!-- 部门管理  -->\n												<li class="treeview"><a\n													ng-click="changedFeatures(\'department_manage\')"\n													href="javascript:void(0)"> <input\n														ng-model="features.department_manage" type="checkbox"\n														value="true"> <i class="fa fa-group"></i> <span>部门管理</span>\n														<span class="pull-right-container"> <i\n															class="fa fa-angle-left pull-right"></i>\n													</span>\n												</a>\n													<ul class="treeview-menu">\n														<li><a\n															ng-click="changedFeatures(\'department_views_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.department_views_manage"\n																type="checkbox" value="true"><i\n																class="fa fa-circle-o"></i> 查看部门列表\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'department_new_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.department_new_manage"\n																type="checkbox" value="true"> <i\n																class="fa fa-circle-o"></i> 新增部门\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'department_delete_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.department_delete_manage"\n																type="checkbox" value="true"> <i\n																class="fa fa-circle-o"></i> 删除部门\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'department_update_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.department_update_manage"\n																type="checkbox" value="true"> <i\n																class="fa fa-circle-o"></i> 更新部门\n														</a></li>\n													</ul></li>\n												<!-- 部门管理  -->\n\n												<!-- 角色管理  -->\n												<li class="treeview"><a\n													ng-click="changedFeatures(\'role_manage\')"\n													href="javascript:void(0)"> <input\n														ng-model="features.role_manage" type="checkbox"\n														value="true"> <i class="fa fa-circle-o"></i> <span>角色管理</span>\n														<span class="pull-right-container"> <i\n															class="fa fa-angle-left pull-right"></i>\n													</span>\n												</a>\n													<ul class="treeview-menu">\n														<li><a\n															ng-click="changedFeatures(\'role_views_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.role_views_manage" type="checkbox"\n																value="true"> <i class="fa fa-circle-o"></i>\n																查看角色列表\n														</a></li>\n														<li><a ng-click="changedFeatures(\'role_new_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.role_new_manage" type="checkbox"\n																value="true"> <i class="fa fa-circle-o"></i>\n																新增角色\n														</a></li>\n													</ul></li>\n												<!-- 角色管理  -->\n\n												<!-- 用户管理  -->\n												<li class="treeview"><a\n													ng-click="changedFeatures(\'user_manage\')"\n													href="javascript:void(0)"> <input\n														ng-model="features.user_manage" type="checkbox"\n														value="true"> <i class="fa fa-user"></i> <span>用户管理</span>\n														<span class="pull-right-container"> <i\n															class="fa fa-angle-left pull-right"></i>\n													</span>\n												</a>\n													<ul class="treeview-menu">\n														<li><a\n															ng-click="changedFeatures(\'user_views_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_views_manage" type="checkbox"\n																value="true"> <i class="fa fa-circle-o"></i>\n																用户列表\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'user_views_ogz_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_views_ogz_manage"\n																type="checkbox" value="true"> <i\n																class="fa fa-circle-o"></i> 用户组织架构图\n														</a></li>\n														<!-- <li><a href="#/system-manage/users/online"><i class="fa fa-circle-o"></i> 在线用户 </a></li> -->\n														<li><a ng-click="changedFeatures(\'user_new_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_new_manage" type="checkbox"\n																value="true"> <i class="fa fa-circle-o"></i>\n																新增用户\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'user_new_basic_input_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_new_basic_input_manage"\n																type="checkbox" value="true"> <i\n																class="fa fa-circle-o"></i> 导入用户基本信息\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'user_new_wg_input_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_new_wg_input_manage"\n																type="checkbox" value="true"><i\n																class="fa fa-circle-o"></i> 导入用户-工号信息\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'user_disabled_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_disabled_manage" type="checkbox"\n																value="true"><i class="fa fa-circle-o"></i>\n																解除账号封禁\n														</a></li>\n														<li><a\n															ng-click="changedFeatures(\'user_disabled_ip_manage\')"\n															href="javascript:void(0)"> <input\n																ng-model="features.user_disabled_ip_manage"\n																type="checkbox" value="true"><i\n																class="fa fa-circle-o"></i> 解除账号主机IP封禁\n														</a></li>\n													</ul></li>\n												<!-- 用户管理  -->\n\n											</ul></li>\n										<!-- 账户管理:部门、角色、用户 -->\n\n										<!-- 主机管理 -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-desktop"></i> <span>主机管理</span> <span\n												class="pull-right-container"> <small\n													class="label pull-left bg-red"\n													ng-bind="systemOtherInformations.offline_machines"></small>\n													<small class="label pull-left bg-green"\n													ng-bind="systemOtherInformations.online_machines"></small>\n													<i class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<li><a href="#/system-manage/machine/view"><i\n														class="fa fa-circle-o"></i> 查看主机列表 </a></li>\n												<li><a href="#/system-manage/machine/new"><i\n														class="fa fa-circle-o"></i> 新增主机 </a></li>\n											</ul></li>\n										<!-- 主机管理 -->\n\n\n										<!-- 应用管理 -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-internet-explorer"></i> <span>应用管理</span> <span\n												class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<li><a href="#/system-manage/application-store/view"><i\n														class="fa fa-circle-o"></i> 应用库 </a></li>\n												<li><a href="#/system-manage/application-program/view"><i\n														class="fa fa-circle-o"></i> 应用程序列表 </a></li>\n												<li><a href="#/system-manage/application/view"><i\n														class="fa fa-circle-o"></i> 应用列表 </a></li>\n												<!-- <li><a href="#/system-manage/application-program/new"><i class="fa fa-circle-o"></i> 创建应用程序 </a></li> -->\n												<!-- <li><a href="#/system-manage/application/new"><i class="fa fa-circle-o"></i> 发布应用 </a></li> -->\n												<li><a href="#/system-manage/application-sso/view"><i\n														class="fa fa-circle-o"></i> SSO应用列表 </a></li>\n												<li><a href="#/system-manage/application/status"><i\n														class="fa fa-circle-o"></i> 在线应用 </a></li>\n											</ul></li>\n										<!-- 应用管理 -->\n\n\n										<!-- 网络管理 -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-globe"></i> <span>网络管理</span> <span\n												class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<!--<li><a href="#/system-manage/router/servers/view"><i class="fa fa-circle-o"></i> VPN服务器 </a></li> -->\n\n												<!-- 下一代VPN网络管理 -->\n												<li><a href="#/system-manage/next-vpn/servers/view"><i\n														class="fa fa-circle-o"></i> VPN服务器 </a></li>\n												<!-- 下一代VPN网络管理 -->\n\n												<li><a href="#/system-manage/router/view"><i\n														class="fa fa-circle-o"></i> VPN路由 </a></li>\n												<!-- <li><a href="#/system-manage/strategy/view"><i class="fa fa-circle-o"></i> VPN路由策略 </a></li>-->\n												<li><a href="#/system-manage/router/roles/view"><i\n														class="fa fa-circle-o"></i> VPN路由角色 </a></li>\n												<li><a href="#/system-manage/router/roles/users"><i\n														class="fa fa-circle-o"></i> 用户VPN路由角色 </a></li>\n												<li><a href="#/system-manage/network/subnet"><i\n														class="fa fa-circle-o"></i> 本地网段设置 </a></li>\n											</ul></li>\n										<!--网络管理 -->\n\n										<!-- 厂家设置 -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-cog"></i> <span>厂家设置</span> <span\n												class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<li><a href="#/system-manage/system/sandbox"><i\n														class="fa fa-circle-o"></i> 虚拟沙盒 </a></li>\n												<li><a href="#/system-manage/system/license"><i\n														class="fa fa-circle-o"></i> 系统许可 </a></li>\n											</ul></li>\n										<!-- 厂家设置 -->\n\n\n\n										<!-- 系统设置 -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-gears"></i> <span>系统设置</span> <span\n												class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<li><a href="#/system-manage/system/website"><i\n														class="fa fa-circle-o"></i> 网站信息 </a></li>\n												<li><a href="#/system-manage/system/servers"><i\n														class="fa fa-circle-o"></i> 系统服务器 </a></li>\n												<li><a href="#/system-manage/system/servers-network"><i\n														class="fa fa-circle-o"></i> 系统服务器网络 </a></li>\n												<!--  <li><a href="#/system-manage/system/database"><i class="fa fa-circle-o"></i> 数据库备份 </a></li> -->\n												<li><a href="#/system-manage/system/sslvpn"><i\n														class="fa fa-circle-o"></i> SSLVPN安全认证 </a></li>\n												<li><a href="#/system-manage/system/ac_auth"><i\n														class="fa fa-circle-o"></i> 上网行为审计 </a></li>\n												<li><a href="#/system-manage/system/cloudstorage"><i\n														class="fa fa-circle-o"></i> 系统云盘服务 </a></li>\n												<li><a href="#/system-manage/system/sandbox/pc"><i\n														class="fa fa-circle-o"></i> 客户端Sandbox沙盒 </a></li>\n												<li><a\n													href="#/system-manage/system/application/watermark"><i\n														class="fa fa-circle-o"></i> 应用防盗 </a></li>\n												<li><a href="#/system-manage/system/account/login"><i\n														class="fa fa-circle-o"></i> 用户登录权限 </a></li>\n											</ul></li>\n										<!-- 系统设置 -->\n\n										<!-- 系统日志  -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-table"></i> <span>系统日志</span> <span\n												class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<li><a href="#/system-manage/servers/logger/view"><i\n														class="fa fa-book"></i> <span>网关服务器日志</span></a></li>\n												<li><a href="#/system-manage/platform/logger/view"><i\n														class="fa fa-book"></i> <span>跨平操作日志</span></a></li>\n											</ul></li>\n										<!-- 系统日志  -->\n\n										<!-- 系统操作系统信息 -->\n										<li><a href="#/system-manage/system/os-info"><i\n												class="fa fa-info"></i> <span>网关设备状态信息</span></a></li>\n										<!-- 系统操作系统信息 -->\n\n\n										<!-- 个人信息 -->\n										<li class="treeview"><a href="javascript:void(0)"> <i\n												class="fa fa-user"></i> <span>个人设置</span> <span\n												class="pull-right-container"> <i\n													class="fa fa-angle-left pull-right"></i>\n											</span>\n										</a>\n											<ul class="treeview-menu">\n												<li><a href="#/system-manage/personal/info"><i\n														class="fa fa-info"></i> <span>个人信息</span></a></li>\n												<li><a href="#/system-manage/application-sso/manage"><i\n														class="fa fa-circle-o"></i> SSO应用账户管理 </a></li>\n											</ul></li>\n										<!-- 系统工具 -->\n										<!-- 个人信息 -->\n\n										<li class="header">其它</li>\n										<!-- 沙盒下载 -->\n										<li><a href="#/download"><i class="fa fa-download"></i>\n												<span>沙盒客户端下载</span></a></li>\n										<li><a href="#/support"><i class="fa fa-bullhorn"></i>\n												<span>技术支持</span></a></li>\n										<!-- 沙盒下载 -->\n\n									</ul>\n								</section>\n								<!-- /.sidebar -->\n							</aside>\n\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="router_role">VPN路由角色</label>\n\n						<div class="col-sm-10">\n							<select ng-model="user_router_role" id="router_role"\n								class="form-control select2">\n								<option value="">--请选择VPN路由角色--</option>\n								<option ng-repeat="router_role in router_roles | orderBy:\'name\'"\n									value="{{router_role.identifier}}" ng-bind="router_role.name"></option>\n							</select>\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="department_role">用户部门角色</label>\n\n						<div class="col-sm-10 checkbox">\n							<div class="row box-body">\n								<label class="col-xs-12"> <input\n									ng-model="selectedAllRoles" type="checkbox" value="true">\n									全选\n								</label> <label ng-repeat="role in roles  | orderBy : \'name\'"\n									class="col-md-6 col-sm-6 col-xs-12"> <input\n									ng-model="role.selected" type="checkbox" value="true">\n									{{role.name}}(所属部门:{{role.department.name}})\n								</label>\n							</div>\n						</div>\n					</div>\n\n\n\n				</div>\n			</form>\n\n			<div class="box-header with-border">\n				<h3 class="box-title">用户登录限制</h3>\n			</div>\n			<!-- /.box-header -->\n			<!-- form start -->\n			<form class="form-horizontal">\n				<div class="box-body">\n\n					<div class="form-group checkbox">\n						<label class="col-sm-2 control-label">是否禁止登录</label>\n\n						<div class="col-sm-10">\n							<div class="row box-body">\n								<label class="col-md-6 col-sm-6 col-xs-12" for="disabled">\n\n									<input ng-model="userStatePermission.disabled" name="disabled"\n									id="disabled" type="checkbox" value="true"> 是否禁止登录\n								</label>\n							</div>\n\n						</div>\n					</div>\n\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="access_window_start">设置允许访问系统的时间</label>\n\n						<div class="col-sm-10">\n							<input ng-model="userStatePermission.access_window_start"\n								lenient-time id="access_window_start" name="access_window_start"\n								type="time" />\n						</div>\n					</div>\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="access_window_end">设置不允许访问系统的时间</label>\n\n						<div class="col-sm-10">\n							<input ng-model="userStatePermission.access_window_end"\n								lenient-time name="access_window_end" id="access_window_end"\n								type="time" />\n						</div>\n					</div>\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="valid_from">账号激活日期</label>\n\n						<div class="col-sm-10">\n							<input ng-model="userStatePermission.valid_from" lenient-date\n								name="valid_from" id="valid_from" type="date" />\n						</div>\n					</div>\n					<div class="form-group">\n						<label class="col-sm-2 control-label" for="valid_until">账号失效日期</label>\n\n						<div class="col-sm-10">\n							<input ng-model="userStatePermission.valid_until" lenient-date\n								name="valid_until" id="valid_until" type="date" />\n						</div>\n					</div>\n					<!-- /.box-body -->\n					<div class="box-footer">\n						<button type="button"\n							class="btn btn-block btn-primary btn-lg pull-right"\n							ng-click="save()">保存</button>\n						<button type="button" class="btn btn-block btn-lg pull-right"\n							ng-click="back()">取消</button>\n					</div>\n					<!-- /.box-footer -->\n				</div>\n			</form>\n\n\n\n		</div>\n\n	</section>\n\n\n\n	<modal-alert-message></modal-alert-message>\n\n\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/users/templates/users-ogz-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-ogz-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					用户列表 <small ng-click="showAddNewUser()" class="btn"> <i\n						class="fa fa-plus"></i> <span class="">新增用户</span>\n					</small>\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n\n			<!-- boxes -->\n			<div class="box-body" id="chart-container"></div>\n			 \n			\n			<div class="overlay" ng-show="users_info_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n\n	<div class="modal fade" id="modal-default">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default pull-left"\n						data-dismiss="modal">取消</button>\n					<button type="button" class="btn btn-danger"\n						ng-click="disabledUser()" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	<!-- /.modal -->\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/users/templates/users-online-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-online-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					用户列表 \n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<div class="table-responsive">\n					<div id="system-users-table_wrapper"\n						class="dataTables_wrapper form-inline dt-bootstrap no-footer">\n						<div class="row">\n							<div class="col-sm-6">\n								<div class="dataTables_length" id="system-users-table_length">\n									<label>显示 <select name="system-users-table_length"\n										aria-controls="system-users-table"\n										class="form-control input-sm" ng-model="page_size">\n										    <option value="10">10</option>\n											<option value="25">25</option>\n											<option value="50">50</option>\n											<option value="100">100</option></select> 条记录\n									</label>\n								</div>\n							</div>\n							<div class="col-sm-6">\n								<div id="system-users-table_filter" class="dataTables_filter">\n									<label>查找:<input type="search" ng-model="search_condition"\n										class="form-control input-sm" placeholder=""\n										aria-controls="system-users-table"></label>\n								</div>\n							</div>\n						</div>\n						<div class="row">\n							<div class="col-sm-12">\n								<table id="system-users-table"\n									class="table table-bordered table-striped">\n									<thead>\n										<tr>\n											<th>#</th>\n											<th>用户名</th>\n											<th>昵称</th>\n											<th>状态</th>\n											<th>操作</th>\n										</tr>\n									</thead>\n									<tbody>\n										<tr ng-repeat="user in objspage.objs | orderBy:\'username\'">\n											<td><i class="ion" ng-bind="user.iconText"></i></td>\n											<td ng-bind="user.username"></td>\n											<td ng-bind="user.nickname"></td>\n											<td><span class="label label-success" ng-show="user.activity">已激活</span> <span\n												class="label label-danger" ng-show="!user.activity">禁用中</span></td>\n											<td>\n												<a title="编辑" class="fa fa-edit edit-icon" ng-href="#/system-manage/users/manage/{{user.username}}"></a>\n											</td>\n										</tr>\n									</tbody>\n								</table>\n							</div>\n						</div>\n						<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_info" id="system-users-table_info"\n									role="status" aria-live="polite">显示 {{objspage.page_row_start}}到 {{objspage.page_row_end}} 共\n									{{objspage.length}} 条记录</div>\n							</div>\n						</div>\n						<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_paginate paging_simple_numbers"\n									id="system-users-table_paginate">\n									<ul class="pagination">\n										<li class="paginate_button" ng-repeat="_vpage in objspage.page_objects" ng-class="{active:_vpage.active}">\n											<a href="javascript:(0)" ng-click="pagefornumber(_vpage.page)"\n											aria-controls="system-users-table" data-dt-idx="{{_vpage.page}}"\n											tabindex="0" ng-bind="_vpage.page" ></a>\n										</li>\n									</ul>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n\n			</div>\n\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/users/templates/users-undisabled-ips.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-undisabled-ips.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					封禁IP地址列表\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n			    \n			    <div class="row">\n					<div class="col-sm-12"  ng-show="disabledIPs.length != 0">\n						<button type="button" class="btn btn-block btn-danger" ng-click="undisabled()">解禁IP地址</button>\n					</div>\n					\n					<div class="col-sm-12">\n						<table class="table table-bordered table-striped">\n							<thead>\n								<tr>\n									<th>#</th>\n									<th>IP地址</th>\n									<th></th>\n								</tr>\n							</thead>\n							<tbody>\n							\n								<tr ng-repeat="disabledIP in disabledIPs">\n				                    <td><input type="checkbox" ng-model="disabledIP.selected"/></td>\n				                    <td>{{disabledIP.hostname}}</td>\n				                    <td></td>\n								</tr>\n								\n							</tbody>\n						</table>\n					</div>\n				</div>			\n				\n			</div>\n			\n		</div>\n	</section>\n	\n	\n	\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n</div>')}]);angular.module("admin-app/users/templates/users-undisabled.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-undisabled.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					封禁用户列表\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n			    \n			    <div class="row">\n					<div class="col-sm-12" ng-show="disabledUsers.length != 0">\n						<button type="button" class="btn btn-block btn-danger" ng-click="undisabled()">解禁用户</button>\n					</div>\n					\n					<div class="col-sm-12">\n						<table class="table table-bordered table-striped">\n							<thead>\n								<tr>\n									<th>#</th>\n									<th>用户名</th>\n									<th></th>\n								</tr>\n							</thead>\n							<tbody>\n							\n								<tr ng-repeat="disabledUser in disabledUsers">\n				                    <td><input type="checkbox" ng-model="disabledUser.selected"/></td>\n				                    <td>{{disabledUser.username}}</td>\n				                    <td></td>\n								</tr>\n								\n							</tbody>\n						</table>\n					</div>\n				</div>			\n				\n			</div>\n			\n		</div>\n	</section>\n	\n	\n	<div class="modal fade" id="modal-alert-message">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal"\n						aria-label="Close">\n						<span aria-hidden="true">&times;</span>\n					</button>\n					<h4 class="modal-title" ng-bind="message.title"></h4>\n				</div>\n				<div class="modal-body">\n					<p ng-bind="message.text"></p>\n				</div>\n				<div class="modal-footer">\n					<button type="button" class="btn btn-default" data-dismiss="modal">确认</button>\n				</div>\n			</div>\n			<!-- /.modal-content -->\n		</div>\n		<!-- /.modal-dialog -->\n	</div>\n	\n</div>')}]);angular.module("admin-app/users/templates/users-view.html",[]).run(["$templateCache",function(a){a.put("admin-app/users/templates/users-view.html",'<div ng-show="!expectedCredentials">\n\n	<!-- Main content -->\n	<section class="content">\n\n		<!-- PRODUCT LIST -->\n		<div class="box box-info">\n			<div class="box-header with-border">\n				<h3 class="box-title">\n					用户列表 \n					<small ng-click="showAddNewUser()" class="btn"> \n						<i class="fa fa-plus"></i> <span class="">新增用户</span>\n					</small>\n					\n					<small ng-click="syncAccount2Cloudstorage()" class="btn pull-right">\n						<i class="fa fa-cloud"></i> <span class="">同步云盘用户表</span>\n					</small>\n				</h3>\n			</div>\n\n			<!-- /.box-header -->\n\n			<!-- boxes -->\n			<div class="box-body">\n				<div class="table-responsive">\n					<div id="system-users-table_wrapper"\n						class="dataTables_wrapper form-inline dt-bootstrap no-footer">\n						<div class="row">\n							<div class="col-md-6 col-sm-6 col-xs-12">\n								<div class="dataTables_length" id="system-users-table_length">\n									<label>显示 <select name="system-users-table_length"\n										aria-controls="system-users-table"\n										class="form-control input-sm" ng-model="page_size">\n										    <option value="10">10</option>\n											<option value="25">25</option>\n											<option value="50">50</option>\n											<option value="100">100</option></select> 条记录\n									</label>\n								</div>\n							</div>\n							<div class="col-md-6 col-sm-6 col-xs-12">\n								<div id="system-users-table_filter" class="dataTables_filter">\n									<label>查找:<input type="search" ng-model="search_condition"\n										class="form-control input-sm" placeholder=""\n										aria-controls="system-users-table"></label>\n								</div>\n							</div>\n						</div>\n						<div class="row">\n							<div class="col-md-12 col-sm-12 col-xs-12">\n								<table id="system-users-table"\n									class="table table-bordered table-striped">\n									<thead>\n										<tr>\n											<th>#</th>\n											<th>用户名</th>\n											<th>昵称</th>\n											<th>状态</th>\n											<th>操作</th>\n										</tr>\n									</thead>\n									<tbody>\n										<tr ng-repeat="user in objspage.objs | orderBy:\'username\'">\n											<td><i class="ion" ng-bind="user.iconText"></i></td>\n											<td ng-bind="user.username"></td>\n											<td ng-bind="user.nickname"></td>\n											<td><span class="label label-success" ng-show="user.activity">已激活</span> <span\n												class="label label-danger" ng-show="!user.activity">禁用中</span></td>\n											<td>\n												<a title="编辑" class="fa fa-edit edit-icon" ng-href="#/system-manage/users/manage/{{user.username}}"></a>\n											</td>\n										</tr>\n									</tbody>\n								</table>\n							</div>\n						</div>\n						<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_info" id="system-users-table_info"\n									role="status" aria-live="polite">显示 {{objspage.page_row_start}}到 {{objspage.page_row_end}} 共\n									{{objspage.length}} 条记录</div>\n							</div>\n						</div>\n						<div class="row" ng-show="objspage.length > 0">\n							<div class="col-sm-12">\n								<div class="dataTables_paginate paging_simple_numbers"\n									id="system-users-table_paginate">\n									<ul class="pagination">\n										<li class="paginate_button" ng-repeat="_vpage in objspage.page_objects" ng-class="{active:_vpage.active}">\n											<a href="javascript:(0)" ng-click="pagefornumber(_vpage.page)"\n											aria-controls="system-users-table" data-dt-idx="{{_vpage.page}}"\n											tabindex="0" ng-bind="_vpage.page" ></a>\n										</li>\n									</ul>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n\n			</div>\n\n		\n			\n			<div class="overlay" ng-show="users_info_loading">\n				<i class="fa fa-refresh fa-spin"></i>\n			</div>\n			\n		</div>\n		<!-- /.box -->\n\n\n\n	</section>\n\n	<modal-alert-message></modal-alert-message>\n	 \n	<!-- /.content -->\n</div>')}]);angular.module("admin-app/virworkbox/templates/index.html",[]).run(["$templateCache",function(a){a.put("admin-app/virworkbox/templates/index.html",'<section class="virworkbox">\n	<div class="callout callout-warning">\n		<iframe name="downloadFrame" scrolling="no" frameborder="0"\n			style="width: 0px; height: 0px;"></iframe>\n\n        <h2 ng-show="isIEBrowser">{{\'VIRWORK_SANDBOX.HOME.WARN\' | translate}}（\n        	<a ng-href="{{downloadAppUrl.sandbox}}" title="{{\'VIRWORK_SANDBOX.HOME.STATEMENT_B\' | translate}}" \n				target="downloadFrame">{{\'VIRWORK_SANDBOX.HOME.STATEMENT_B\' | translate}}</a>）.</h2>\n		\n		<h4>{{\'VIRWORK_SANDBOX.HOME.TITLE\' | translate}}</h4>\n\n		<p>\n			{{\'VIRWORK_SANDBOX.HOME.STATEMENT_A\' | translate}}（\n			 <a ng-href="{{downloadAppUrl.sandbox}}" title="{{\'VIRWORK_SANDBOX.HOME.STATEMENT_B\' | translate}}" \n				target="downloadFrame">{{\'VIRWORK_SANDBOX.HOME.STATEMENT_B\' | translate}}</a>）\n		</p>\n		<p>{{\'VIRWORK_SANDBOX.HOME.STATEMENT_C\' | translate}}</p>\n	</div>\n\n	<!-- /.box -->\n</section>')}]);angular.module("admin-app/virworkbox/templates/pc-app.html",[]).run(["$templateCache",function(a){a.put("admin-app/virworkbox/templates/pc-app.html",'\n      <section class="virworkbox">        \n        <div class="box box-default">\n          <div class="box-header with-border">\n            <h3 class="box-title">{{\'VIRWORK_SANDBOX.PC_APP.TITLE\' | translate}}</h3>\n          </div>\n          <div class="box-body">\n              {{\'VIRWORK_SANDBOX.PC_APP.STATEMENT_A\' | translate}}                \n          </div>\n          <!-- /.box-body -->\n        </div>\n        <!-- /.box -->\n      </section>')}]);angular.module("admin-app/virworkbox/templates/pc-browser.html",[]).run(["$templateCache",function(a){a.put("admin-app/virworkbox/templates/pc-browser.html",'\n      <section class="virworkbox">        \n        <div class="box box-default">\n          <div class="box-header with-border">\n            <h3 class="box-title">{{\'VIRWORK_SANDBOX.PC_BROWSER.TITLE\' | translate}}</h3>\n          </div>\n          <div class="box-body">\n              <p>\n                {{\'VIRWORK_SANDBOX.PC_BROWSER.STATEMENT_A\' | translate}}    \n              </p>       \n           	  <p>            \n                {{\'VIRWORK_SANDBOX.PC_BROWSER.STATEMENT_B\' | translate}}                               \n              </p>\n          </div>\n          <!-- /.box-body -->\n        </div>\n        <!-- /.box -->\n      </section>')}]);angular.module("admin-app/virworkbox/templates/update.html",[]).run(["$templateCache",function(a){a.put("admin-app/virworkbox/templates/update.html",'      <section class="virworkbox">        \n        <div class="box box-default update-sandbox">\n          <div class="box-header with-border">\n            <h3 class="box-title">{{\'VIRWORK_SANDBOX.UPDATE_APP.TITLE\' | translate}} </h3>\n          </div>\n          <div class="box-body">\n           	  <div class="progress">\n                <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%">\n                  <span class="sr-only"></span>\n                </div>\n              </div>\n               <div class="progress-bar-value">\n	          	 {{\'VIRWORK_SANDBOX.UPDATE_APP.STATEMENT_A\' | translate}}{{progress}}%...\n	          </div>\n          </div>\n         \n          <!-- /.box-body -->\n        </div>\n        <!-- /.box -->\n      </section>\n      ')}]);angular.module("users").directive("uploadFileModel",["$parse",function(a){return{restrict:"A",link:function(f,e,d){var c=a(d.uploadFileModel);var b=c.assign;e.bind("change",function(){f.$apply(function(){b(f,e[0].files[0])})})}}}]);angular.module("index").directive("uploadFileModel",["$parse",function(a){return{restrict:"A",link:function(f,e,d){var c=a(d.uploadFileModel);var b=c.assign;e.bind("change",function(){f.$apply(function(){b(f,e[0].files[0])})})}}}]);angular.module("rest").factory("UserAppPermissionsEntry",["$injector",function defineUserAppPermissionsEntry(b){var c=b.get("utilService");var a=function a(d){d=d||{};this.identifier=d.identifier;this.voice_token_android=d.voice_token_android;this.voice_token_ios=d.voice_token_ios;this.version_android=d.android_version;this.version_ios=d.ios_version;this.version_pcapp=d.pcapp_version;this.version_sandbox=d.sandbox_version;this.supportTel=d.supportTel;this.client_name=d["client-name"];this.client_license_number=d["serial-uid"];this.data=d};return a}]);angular.module("rest").factory("UserConnectionPermissionEntry",[function defineUserConnectionPermissionEntry(){var a=function a(b){b=b||{};this.canUpload=false;this.canDownload=false;this.canDelete=false;this.canInputTxt=false;this.canOutputTxt=false;this.canUsb=false;this.canPrint=false;this.canAudio=false;this.dirSize=0;this.dirSizeType=true;this.canClientCloudStorage=false;this.canClientDrive=false;this.hasDirectory=false;var c=function(d){return(d==="true"||d=="true"||d==true)};if(!!!!b&&b["file-upload"]){this.canUpload=c(b["file-upload"])}if(!!!!b&&b["file-download"]){this.canDownload=c(b["file-download"])}if(!!!!b&&b["file-delete"]){this.canDelete=c(b["file-delete"])}if(!!!!b&&b["txt-input"]){this.canInputTxt=c(b["txt-input"])}if(!!!!b&&b["txt-output"]){this.canOutputTxt=c(b["txt-output"])}if(!!!!b&&b["app-usb"]){this.canUsb=c(b["app-usb"])}if(!!!!b&&b["enable-printing"]){this.canPrint=c(b["enable-printing"])}if(!!!!b&&b["enable-audio"]){this.canAudio=c(b["enable-audio"])}if(!!!!b&&b["app-size"]){this.dirSize=b["app-size"]}if(!!!!b&&b["app-size-type"]){this.dirSizeType=c(b["app-size-type"])}if(!!!!b&&b["client-cloudstorage"]){this.canClientCloudStorage=c(b["client-cloudstorage"])}if(!!!!b&&b["client-drive"]){this.canClientDrive=c(b["client-drive"])}if(!!!!b&&b.hasdirectory){this.hasDirectory=c(b.hasdirectory)}};return a}]);angular.module("rest").factory("UserPermissionsEntry",["$injector",function defineUserPermissionsEntry(b){var c=b.get("utilService");var a=function a(d){d=d||{};this.identifier=d.identifier;this.is_sysadm=c.valueIsTrue(d.is_sysadm);var e=d.user_account_role||{};this.is_feature_normal_user=c.valueIsTrue(e.is_feature_normal_user);this.is_feature_common_user=c.valueIsTrue(e.is_feature_common_user);this.is_feature_sysadm_user=c.valueIsTrue(e.is_feature_sysadm_user);this.vpn_auth_feature_close_switch=c.valueIsTrue(d.vpn_auth_feature_close_switch);this.client_screen_record_setting=c.valueIsTrue(d.client_screen_record_setting);this.open_client_screen_record_setting=c.valueIsTrue(d.open_client_screen_record_setting);this.client_ac_auth_setting=c.valueIsTrue(d.client_ac_auth_setting);this.client_ac_auth_tc_onlineuser_url=d.client_ac_auth_tc_onlineuser_url;this.clientCloudStorage=c.valueIsTrue(d["client-cloudstorage"]);this.cloudstorageInformation={nickname:"",cs_username:"",cs_passwd:"",passwd:"",cs_hostname:"",cs_ip:"",cs_port:""};this.updateCloudStorageInformation=function(f){this.cloudstorageInformation={nickname:f.nickname,cs_username:f.username,cs_passwd:f.cs_passwd,passwd:f.passwd,cs_hostname:f.hostname,cs_ip:f.ip||"",cs_port:f.port||""}};this.clientDrive2Remote=c.valueIsTrue(d["client-drive"]);this.audio=c.valueIsTrue(d["enable-audio"]);this.printer=c.valueIsTrue(d["enable-printing"]);this.deleteFile=c.valueIsTrue(d["file-delete"]);this.downloadFile=c.valueIsTrue(d["file-download"]);this.uploadFile=c.valueIsTrue(d["file-upload"]);this.usb=c.valueIsTrue(d["app-usb"]);this.clipboard2local=c.valueIsTrue(d["txt-output"]);this.local2clipboard=c.valueIsTrue(d["txt-input"]);this.data=d};return a}]);angular.module("rest").factory("userService",["$injector",function userService(G){var r=G.get("$http");var e=G.get("$q");var p=G.get("$rootScope");var B=G.get("$cookieStore");var u=G.get("utilService");var Q=G.get("loggerService");var h={};var P="VVWORK_AUTH";var k="VVWORK_AUTH_SETTING";var n=function n(Y){Q.i("store authentication cookie:{}",P);var X={authToken:Y.authToken,vir_work_no:Y.worknumber,vun:Y.username,dataSource:Y.dataSource,availableDataSources:Y.availableDataSources};B.put(P,X);window.sessionStorage.setItem(P,JSON.stringify(X))};var H=function H(X){if(!!!X||!!!X.remeberpasswd){Q.i("clear cookie, store authentication cookie:{}",k);o();return false}Q.i("store authentication cookie:{}",k);var Y={remeberpasswd:X.remeberpasswd,autologin:X.autologin,authToken:X.authToken,key:X.password,vir_work_no:X.worknumber,vun:X.username};B.put(k,Y);window.localStorage.setItem(k,JSON.stringify(Y));window.sessionStorage.setItem(k,JSON.stringify(Y))};h.injectorToken=function(X){n(X)};var W=function W(){Q.i("clear authentication cookie:{}",P);B.remove(P);window.sessionStorage.removeItem(P)};var o=function o(){Q.i("clear authentication cookie:{}",k);B.remove(k);window.localStorage.removeItem(k);window.sessionStorage.removeItem(k)};h.getHeaders4Token=function z(){var X={"Content-Type":"application/json","Client-Agent":h.getCurrentToken(),"Client-VN":u.utf8_to_b64(h.getCurrentUsername()),"Client-VDN":u.utf8_to_b64(h.getCurrentUsername())};return X};h.getAccountUsername=function S(){var X=B.get(k);if(X){return X.vun}else{X=window.localStorage.getItem(k);if(!!!!X){X=JSON.parse(X);return X.vun}}return null};h.getAccountRemeberStatus=function N(){var X=B.get(k);if(X){return u.valueIsTrue(X.remeberpasswd)}else{X=window.localStorage.getItem(k);if(!!!!X){X=JSON.parse(X);return u.valueIsTrue(X.remeberpasswd)}}return false};h.getAccountAutoLoginStatus=function l(){var X=B.get(k);if(X){return u.valueIsTrue(X.autologin)}else{X=window.localStorage.getItem(k);if(!!!!X){X=JSON.parse(X);return u.valueIsTrue(X.autologin)}}return false};h.getAccountPasswd=function c(){var X=B.get(k);if(X){return X.key}else{X=window.localStorage.getItem(k);if(!!!!X){X=JSON.parse(X);return X.key}}return false};h.getAccountWorkNumber=function w(){var X=B.get(k);if(X){return X.vir_work_no}else{X=window.localStorage.getItem(k);if(!!!!X){X=JSON.parse(X);return X.vir_work_no}}return false};h.getCurrentUsername=function q(){var X=B.get(P);if(X){return X.vun}return null};h.getCurrentToken=function C(){var X=B.get(P);X=window.sessionStorage.getItem(P);if(!!!!X){X=JSON.parse(X)}if(X){return X.authToken}return""};h.getDataSource=function V(){var X=B.get(P);if(X){return X.dataSource}return"qyzs-db"};h.getAvailableDataSources=function A(){var X=B.get(P);if(X){return X.availableDataSources}return["qyzs-db"]};h.getCredential=function F(Y){var X={token:""};return r({method:"POST",url:u.tomcat_request_host+"/api/data/users",params:X,data:Y})};h.initAuthTime=0;h.getTokens=function j(aa){var ac=e.defer();var X={token:h.getCurrentToken()};var ab={username:aa.username,password:Crypto.SHA256(aa.password),worknumber:aa.worknumber,authCode:aa.authCode};r({method:"POST",url:u.tomcat_request_host+"/api/tokens",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:5000,params:X,data:$.param(ab)}).success(function Z(ad){if(!!!!ad.success){h.initAuthTime=new Date().getTime();var ae=ad.parameters.authenticationResult;if(!!!!ae.cloudStorage){Q.i("ocStorage:"+u.valueIsTrue(ae.cloudStorage));p.cloudstorage=u.valueIsTrue(ae.cloudStorage)}n(ae);ac.resolve();ac.reject(ad)}else{ac.reject(ad)}}).error(function Y(ad){if(!!!ad){ad={type:"service-connection-error"}}ac.reject(ad)});return ac.promise};h.checkUserLoginStatus=function R(){var X={token:h.getCurrentToken(),authTime:h.initAuthTime,hostname:window.location.hostname};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/"+encodeURIComponent(p.virworkBoxConnected)+"/activity",params:X})};h.getUserPermissions=function E(){var X={token:h.getCurrentToken(),platformPC:!!!!u.isPCApp()||!!!!p.virworkBoxConnected,hostname:window.location.hostname};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/pc-app/permissions/resource",params:X})};h.getSSOAppAccounts=function i(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/sso-connection-fields/user/fields/"+encodeURIComponent(h.getCurrentUsername()),params:X})};h.loginAccountSetting=function(X){if(!!!X){return false}H(X)};h.clearAccountSetting=function T(){o()};h.updateUserRouter=function K(Y){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/"+encodeURIComponent(Y.identifier)+"/router",params:X})};h.getPrintFileAuth=function a(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/print-file/auth",params:X})};h.removePrintFile=function I(Y){var X={token:h.getCurrentToken()};return r({method:"POST",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/remove/print-finished-file",params:X,data:{filename:Y}})};h.getUserBasicInformation=function M(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/information",params:X})};h.updateUserWorknumber=function x(Y){var X={token:h.getCurrentToken()};return r({method:"POST",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/worknumber/"+encodeURIComponent(h.getCurrentUsername()),params:X,data:Y})};h.updateUserBasicInformation=function v(Y){var X={token:h.getCurrentToken()};return r({method:"POST",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/information",params:X,data:Y})};h.updateCloudUser=function U(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/cloudstorage/"+encodeURIComponent(h.getCurrentUsername())+"/updateCloudUser",params:X,data:{}})};h.syncCloudUser=function U(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/cloudstorage/"+encodeURIComponent(h.getCurrentUsername())+"/syncCloudUser",params:X,data:{}})};h.updateCloudUsers=function O(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/cloudstorage/updateCloudUsers",params:X})};h.updateCloudGroups=function D(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/cloudstorage/updateCloudGroups",params:X})};h.updateUserPassword=function b(Y,Z){var X={token:h.getCurrentToken()};return r({method:"POST",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/password",params:X,data:{oldPassword:Y,newPassword:Z}})};h.getUserUpdatePasswdBySystemConfig=function y(){var X={token:h.getCurrentToken(),hostname:window.location.hostname};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/update_pwd_system_cfg",params:X})};h.getUseResourceSettingPermission=function t(){var X={token:h.getCurrentToken(),hostname:window.location.hostname};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/permissions/resource-setting",params:X})};h.getClientPCAPPVersion=function g(){var X={token:h.getCurrentToken(),hostname:window.location.hostname};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/pcapp/version",params:X})};h.getAppVersion=function d(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/app/version",params:X})};h.syncOnlineUser=function L(Z){var aa="SANDBOX";if(p.virworkBoxConnected){aa="SANDBOX"}else{if(p.virworkWebModel){aa="BROWSER"}else{aa=""}}var Y=encodeURIComponent(h.getCurrentUsername());if(!!!!Z&&Z.nickname){Y=Z.nickname}var X={token:h.getCurrentToken()};var ab={virwork_token:h.getCurrentToken(),username:encodeURIComponent(h.getCurrentUsername()),virwork_username:encodeURIComponent(h.getCurrentUsername()),virwork_nickname:Y,terminal_type:aa};return r({method:"POST",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/system/sync-onlineusers",params:X,data:ab})};var f=function f(){};h.updateUserSSLVPNPasswd=function J(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/sslvpn",params:X})};h.uploadAvatarFile=function m(Z){var Y={token:h.getCurrentToken()};var X=new FormData();X.append("avatar",Z);X.append("name",h.getCurrentUsername()+".png");return r({method:"POST",url:u.tomcat_request_host+"/api/data/"+encodeURIComponent(h.getDataSource())+"/users/"+encodeURIComponent(h.getCurrentUsername())+"/avatar",params:Y,data:X,transformRequest:angular.identity,headers:{"Content-Type":undefined}})};h.logout=function s(){var X={token:h.getCurrentToken()};return r({method:"GET",url:u.tomcat_request_host+"/api/data/"+h.getDataSource()+"/connections/"+h.getCurrentUsername()+"/destory-session",params:X})};return h}]);angular.module("users").controller("usersManageController",["$scope","$injector","$interval","$timeout",function usersManageController(u,y,x,D){var A=y.get("$q");var o=y.get("$route");var G=y.get("$http");var e=y.get("$routeParams");var E=y.get("$document");var p=y.get("$window");var k=y.get("$location");var F=y.get("$cookieStore");var l=y.get("$rootScope");var w=y.get("loggerService");var j=y.get("utilService");var I=y.get("userService");var d=y.get("usersService");var b=y.get("systemService");var c=y.get("networkVPNService");var v=y.get("applicationService");var C=y.get("departmentService");var s=y.get("roleService");var r=y.get("PermissionPatch");var a=e.id;u.back=function t(){k.url("/system-manage/users/view")};var h={disabled:"disabled",valid_from:"valid-from",valid_until:"valid-until",access_window_start:"access-window-start",access_window_end:"access-window-end",expired:"expired",timezone:"timezone"};u.userStatePermission={disabled:false,valid_from:"",valid_until:"",access_window_start:"",access_window_end:"",expired:null,timezone:"Asia/Chongqing"};u.user={username:"",password:"",basicInformation:{username:"",nickname:""},worknumber:"",permissions:{"app-size":0,"app-size-type":"true","file-part-operation":"read","file-public-operation":"read"},roles:[],gatewayRoles:[],usbConnections:[],departments:[],attributes:{"access-window-end":"","access-window-start":"",disabled:"","valid-from":"","valid-until":"",expired:null,timezone:"Asia/Chongqing"}};u.roles=[];var H=function H(){s.getRoles().success(function K(L){var M={};angular.forEach(u.user.roles,function(N){M[N]=true});angular.forEach(L,function(N){N.iconText=N.name.substring(0,1).toUpperCase();if(!!!!M[N.identifier]){N.selected=true}else{N.selected=false}u.roles.push(N)})}).error(function J(L){})};u.user_router_role="";u.router_roles=[];var g=function i(){c.getVPNGatewayRoles().success(function J(L){u.router_roles=L.roles;f()}).error(function K(L){})};u.$watch("selectedAllRoles",function(K){var J=u.roles;u.roles=[];angular.forEach(J,function(L){if(K){L.selected=true}else{L.selected=false}u.roles.push(L)})});u.message="";var n=false;u.save=function z(){w.i("save user...");if(!!!u.user.username){u.message="请输入用户名称";$("#modal-default").modal("show");return false}if(a!=u.user.username){return false}if(!!!!u.user_login_auth_code_feature_show){if(!!!!u.user.worknumber){u.message="请输入用户工号";$("#modal-default").modal("show");return false}}if(!!!u.user_router_role||u.user_router_role==""){u.message="请选择用户的VPN路由角色";$("#modal-default").modal("show");return false}u.user.roles=[];angular.forEach(u.roles,function(N){if(N.selected){u.user.roles.push(N.identifier)}});if(u.user.roles.length==0){u.message="请选择用户部门角色";$("#modal-default").modal("show");return false}u.user.gatewayRoles.push(u.user_router_role);for(var J in u.userStatePermission){var M=u.userStatePermission[J];var K=h[J];u.user.attributes[""+K]=M}var L={};for(var J in u.user){L[""+J]=u.user[""+J]}if(n){return false}n=true;d.saveUser(L).success(function(N){u.message="创建成功";$("#modal-default").modal("show");d.syncUserCloudUserGroup();u.back();n=false}).error(function(N){u.message="创建失败."+N.message;$("#modal-default").modal("show");n=false})};u.user_login_auth_code_feature_show=false;var q=function q(){b.getParameters().success(function J(L){if(!!!!L){var K=L.user_login_auth_code_feature_show;if(!!!!K&&K=="true"){u.user_login_auth_code_feature_show=true}else{u.user_login_auth_code_feature_show=false}}})};var m=function m(){d.getUserWorknumber(a).success(function(L){if(!!!!L.success){var K=L.parameters;var J=K.worknumber;if(!!!!J){u.user.worknumber=J}}}).error(function(J){})};var f=function f(){c.getUserVPNGatewayRoles(a).success(function(K){var J=K.roles;if(!!!!J&&J.length>0){var L=J[0];u.user_router_role=L.identifier}}).error(function(J){})};var B=function B(){w.i("get user information:{}",a);d.getUser(a).success(function(L){var K=L.attributes;var N=L.basicInformation;var M=L.roles;var O=L.username;u.user.username=O;if(!!!!N){var J=N.nickname;if(!!!!J){u.user.basicInformation.nickname=J}}u.user.basicInformation.username=O;if(!!!!M&&M.length>0){u.user.roles=M}if(!!!!K){u.userStatePermission.disabled=K.disabled=="true";if(!!!!K["access-window-start"]&&K["access-window-start"]!=""){u.userStatePermission.access_window_start=new Date(j.time.getDateTime_YMD()+" "+K["access-window-start"])}if(!!!!K["access-window-end"]&&K["access-window-end"]!=""){u.userStatePermission.access_window_end=new Date(j.time.getDateTime_YMD()+" "+K["access-window-end"])}if(!!!!K["valid-from"]&&K["valid-from"]!=""){u.userStatePermission.valid_from=new Date(K["valid-from"])}if(!!!!K["valid-until"]&&K["valid-until"]!=""){u.userStatePermission.valid_until=new Date(K["valid-until"])}u.userStatePermission.timezone="Asia/Chongqing";u.userStatePermission.expired=null}m();q();H();g()}).error(function(J){})};if(!l.expectedCredentials){if(!!!!a){B()}else{u.back()}}}]);angular.module("users",[]);angular.module("users").controller("usersNewBasicInputController",["$scope","$injector","$interval","$timeout",function usersNewBasicInputController(i,m,l,o){var n=m.get("$q");var g=m.get("$route");var r=m.get("$http");var c=m.get("$routeParams");var p=m.get("$document");var h=m.get("$window");var e=m.get("$location");var q=m.get("$cookieStore");var f=m.get("$rootScope");var k=m.get("loggerService");var d=m.get("utilService");var a=m.get("systemService");i.back=function j(){e.url("/system-manage/users/view")};i.excelFile=null;i.databasePasswordType="word";i.message={title:"",text:""};i.uploadFile=function b(){if(!!!i.excelFile){i.message={title:"提示:",text:"请选择用户基础信息文件(*.xls)"};$("#modal-alert-message").modal("show");return false}a.uploadExcelDatabaseFile(i.excelFile,i.databasePasswordType).success(function(s){i.excelFile=null;i.message={title:"提示:",text:"上传成功"};$("#modal-alert-message").modal("show");o(function(){i.back()},2000)}).error(function(s){i.message={title:"提示:",text:"上传失败:"+s.message};$("#modal-alert-message").modal("show")})}}]);angular.module("users").controller("usersNewController",["$scope","$injector","$interval","$timeout",function usersNewController(t,x,w,B){var z=x.get("$q");var m=x.get("$route");var E=x.get("$http");var f=x.get("$routeParams");var C=x.get("$document");var n=x.get("$window");var k=x.get("$location");var D=x.get("$cookieStore");var l=x.get("$rootScope");var v=x.get("loggerService");var j=x.get("utilService");var G=x.get("userService");var e=x.get("usersService");var a=x.get("systemService");var d=x.get("networkVPNService");var u=x.get("applicationService");var A=x.get("departmentService");var r=x.get("roleService");var q=x.get("PermissionPatch");t.back=function s(){k.url("/system-manage/users/view")};var h={disabled:"disabled",valid_from:"valid-from",valid_until:"valid-until",access_window_start:"access-window-start",access_window_end:"access-window-end",expired:"expired",timezone:"timezone"};t.userStatePermission={disabled:false,valid_from:"",valid_until:"",access_window_start:"",access_window_end:"",expired:null,timezone:"Asia/Chongqing"};t.user={username:"",password:"",basicInformation:{username:"",nickname:""},worknumber:"",permissions:{"app-size":0,"app-size-type":"true","file-part-operation":"read","file-public-operation":"read"},roles:[],gatewayRoles:[],usbConnections:[],departments:[],attributes:{"access-window-end":"","access-window-start":"",disabled:"","valid-from":"","valid-until":"",expired:null,timezone:"Asia/Chongqing"}};t.user_account_role="is_feature_normal_user";t.features={account_manage:false,department_manage:false,department_views_manage:false,department_new_manage:false,role_manage:false,role_views_manage:false,role_new_manage:false,user_manage:false,user_views_manage:false,user_views_ogz_manage:false,user_new_manage:false,user_new_basic_input_manage:false,user_new_wg_input_manage:false,user_disabled_manage:false,user_disabled_ip_manage:false};t.changedFeatures=function p(H){t.features[H]=!t.features[H]};t.changedAccount_manage=function c(){t.features.account_manage=!t.features.account_manage};t.$watch("features.account_manage",function(H){});t.roles=[];var F=function F(){r.getRoles().success(function I(J){angular.forEach(J,function(K){K.iconText=K.name.substring(0,1).toUpperCase();K.selected=false;t.roles.push(K)})}).error(function H(J){})};t.user_router_role="";t.router_roles=[];var g=function i(){d.getVPNGatewayRoles().success(function H(J){t.router_roles=J.roles}).error(function I(J){})};t.$watch("selectedAllRoles",function(I){var H=t.roles;t.roles=[];angular.forEach(H,function(J){if(I){J.selected=true}else{J.selected=false}t.roles.push(J)})});t.message={title:"提示",text:""};var b=false;t.save=function y(){v.i("save user...");if(!!!t.user.username){t.message.text="请输入用户名称";$("#modal-alert-message").modal("show");return false}if(!!!t.user.password){t.message.text="请输入用户登录密码";$("#modal-alert-message").modal("show");return false}if(!!!!t.user_login_auth_code_feature_show){if(!!!!t.user.worknumber){t.message.text="请输入用户工号";$("#modal-alert-message").modal("show");return false}}if(!!!t.user_router_role||t.user_router_role==""){t.message.text="请选择用户的VPN路由角色";$("#modal-alert-message").modal("show");return false}t.user.roles=[];angular.forEach(t.roles,function(L){if(L.selected){t.user.roles.push(L.identifier)}});if(t.user.roles.length==0){t.message.text="请选择用户部门角色";$("#modal-alert-message").modal("show");return false}t.user.gatewayRoles.push(t.user_router_role);for(var H in t.userStatePermission){var K=t.userStatePermission[H];var I=h[H];t.user.attributes[""+I]=K}t.user.basicInformation.username=t.user.username;var J={};for(var H in t.user){J[""+H]=t.user[""+H]}if(b){return false}b=true;e.createUser(J).success(function(L){t.message.text="创建成功";$("#modal-alert-message").modal("show");e.syncUserCloudUserGroup();t.back();b=false}).error(function(L){t.message.text="创建失败."+L.message;$("#modal-alert-message").modal("show");b=false})};t.user_login_auth_code_feature_show=false;var o=function o(){a.getParameters().success(function H(J){if(!!!!J){var I=J.user_login_auth_code_feature_show;if(!!!!I&&I=="true"){t.user_login_auth_code_feature_show=true}else{t.user_login_auth_code_feature_show=false}}})};o();if(!l.expectedCredentials){F();g()}}]);angular.module("users").controller("usersNewWorknumberInputController",["$scope","$injector","$interval","$timeout",function usersNewWorknumberInputController(i,m,l,o){var n=m.get("$q");var g=m.get("$route");var r=m.get("$http");var c=m.get("$routeParams");var p=m.get("$document");var h=m.get("$window");var e=m.get("$location");var q=m.get("$cookieStore");var f=m.get("$rootScope");var k=m.get("loggerService");var d=m.get("utilService");var a=m.get("systemService");i.back=function j(){e.url("/system-manage/users/view")};i.excelFile=null;i.message={title:"",text:""};i.uploadFile=function b(){if(!!!i.excelFile){i.message={title:"提示:",text:"请选择用户-工号信息文件(*.xls)"};$("#modal-alert-message").modal("show");return false}a.userNumberExcelFile(i.excelFile).success(function(s){i.excelFile=null;i.message={title:"提示:",text:"上传成功"};$("#modal-alert-message").modal("show");o(function(){i.back()},2000)}).error(function(s){i.message={title:"提示:",text:"上传失败:"+s.message};$("#modal-alert-message").modal("show")})}}]);angular.module("users").controller("usersOnlineViewController",["$scope","$injector","$interval","$timeout",function usersOnlineViewController(n,q,p,u){var s=q.get("$q");var k=q.get("$route");var x=q.get("$http");var d=q.get("$routeParams");var v=q.get("$document");var l=q.get("$window");var f=q.get("$location");var w=q.get("$cookieStore");var h=q.get("$rootScope");var o=q.get("loggerService");var e=q.get("utilService");var z=q.get("userService");var b=q.get("usersService");n.message={title:"提示:",text:""};n.sysUsers=[];n.objspage=e.init_object_paging();var c=["username","nickname","status"];n.search_condition=null;n.conditionSysUsers=[];n.users=[];n.vpages=[];n.pages=0;n.page=0;n.page_size=0;n.start=0;n.end=0;n.$watch("page_size",function(A){if(A!=0){n.page=1;n.objspage=e.object_paging(n.sysUsers,n.page,n.page_size,n.search_condition,c)}});n.$watch("search_condition",function(A){if(!!!A&&A!=""){}else{n.page=1;n.objspage=e.object_paging(n.sysUsers,n.page,n.page_size,n.search_condition,c)}});var m=false;var y=function y(){if(m){return false}m=true;b.getSystemAllUsernames().success(function B(E){var C=E.activity_users;if(!!!!C&&C.length>0){angular.forEach(C,function(F){if(!!!!F.nickname){F.iconText=F.nickname.substring(0,1).toUpperCase()}else{F.iconText=F.username.substring(0,1).toUpperCase()}F.activity=true;F.status="已激活 | 激活中";n.sysUsers.push(F);n.conditionSysUsers.push(F)})}var D=E.disabled_users;if(!!!!D&&D.length>0){angular.forEach(D,function(F){if(!!!!F.nickname){F.iconText=F.nickname.substring(0,1).toUpperCase()}else{F.iconText=F.username.substring(0,1).toUpperCase()}F.activity=false;F.status="已禁用 | 禁用中";n.sysUsers.push(F);n.conditionSysUsers.push(F)})}n.page=1;n.page_size=10;m=false}).error(function A(C){m=false})};n.pagefornumber=function i(A){n.page=A;n.objspage=e.object_paging(n.sysUsers,n.page,n.page_size,n.search_condition,c)};var g=function g(){o.i("loading users informations...");y()};n.currentUser=null;n.setDisabledUser=function j(A){n.currentUser=A;n.message.title="提示:";n.message.text="确认要禁用“"+n.currentUser.usernamename+"”吗?"};var t=false;n.disabledUser=function r(){if(!!!!n.currentUser){if(t){return false}t=true;b.disabledUser(n.currentUser.username).success(function B(C){y();t=false}).error(function A(C){y();t=false})}};n.showAddNewUser=function a(){f.url("/system-manage/users/new")};g()}]);angular.module("users").controller("usersOrgViewController",["$scope","$injector","$interval","$timeout",function usersOrgViewController(l,o,n,r){var q=o.get("$q");var h=o.get("$route");var u=o.get("$http");var c=o.get("$routeParams");var s=o.get("$document");var i=o.get("$window");var e=o.get("$location");var t=o.get("$cookieStore");var f=o.get("$rootScope");var m=o.get("loggerService");var d=o.get("utilService");var v=o.get("userService");var b=o.get("usersService");var k=o.get("roleService");l.users_info_loading=false;l.message={title:"提示:",text:""};var g=0;l.org_user_datas={};var p=function(x,y){if(!!!!y&&y.length>0){var w=[];angular.forEach(y,function(B){var E={id:++x,name:B.name,title:"部门",type:"department",children:[],identifier:B.identifier};var z=B.childDepartments;if(!!!!z&&z.length>0){var D=p(x,z);x=D.org_id;var A=D.children;if(!!!!A&&A.length>0){angular.forEach(A,function(F){E.children.push(F)})}}var C=B.roles;if(!!!!C&&C.length>0){angular.forEach(C,function(H){var F={id:++x,name:H.name,title:"角色",type:"role",children:[],identifier:H.identifier};var G=H.users;if(!!!!G&&G.length>0){angular.forEach(G,function(I){var J={id:++x,name:(!!!!I.nickname?I.nickname+"("+I.username+")":I.username),title:!!!!I.nickname?I.nickname:"",type:"user",children:[],identifier:I.username};F.children.push(J)});E.children.push(F)}})}w.push(E)})}return{org_id:x,children:w}};var j=function j(){l.users_info_loading=true;g=0;b.getOrganization().success(function(y){var A=y;var C=A.users;var B=A.departments;var x={id:++g,name:"集团(公司)人员组织架构图",title:"",children:[]};if(!!!!B&&B.length>0){var w=[];var z=p(g,B);x.children=z.children}l.org_user_datas=x;$("#chart-container").orgchart({data:x,visibleLevel:2,nodeContent:"title",nodeID:"id",chartContainer:"#chart-container",createNode:function(D,G){var E=G.type;var F=null;if(E=="department"){F='<a title="编辑" class="fa fa-edit second-menu-icon" href="#/system-manage/department/manage/'+G.identifier+'"></a>'}else{if(E=="role"){F='<a title="编辑" class="fa fa-edit second-menu-icon" href="#/system-manage/role/manage/'+G.identifier+'"></a>'}else{if(E=="user"){var I=$("<a>",{"class":"fa fa-edit second-menu-icon",click:function(){$(this).siblings(".second-menu").toggle()}});var H='<div class="second-menu"><a class="avatar" src="#/system-manage/users/manage/'+G.identifier+'"></div>';F='<a title="编辑" class="fa fa-edit second-menu-icon" href="#/system-manage/users/manage/'+G.identifier+'"></a>'}}}if(!!!!F){D.append(F)}}});$("#chart-container").height(i.innerHeight-200);l.users_info_loading=false}).error(function(w){l.users_info_loading=false})};if(!f.expectedCredentials){j()}l.showAddNewUser=function a(){e.url("/system-manage/users/new")}}]);angular.module("rest").factory("usersService",["$injector",function usersService(r){var x=r.get("$http");var s=r.get("$q");var z=r.get("userService");var f=r.get("utilService");var i=r.get("$rootScope");var y={};y.getSystemAllActivityUsernames=function u(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users",params:A})};y.getSystemAllUsernames=function a(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/all-users",params:A})};y.getOrganization=function v(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/organization",params:A})};y.getUser=function l(B){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/info/"+encodeURIComponent(B),params:A})};y.getUserWorknumber=function j(B){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/worknumber/"+encodeURIComponent(B),params:A})};y.getOnlineUsers=function t(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/online-users",params:A})};y.createUser=function e(C){var B={token:z.getCurrentToken()};var A=C;A.password=Crypto.SHA256(C.password);return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users",params:B,data:C})};y.saveUser=function q(C){var B={token:z.getCurrentToken()};var A=C;if(!!!!A.password&&A.password!=""){A.password=Crypto.SHA256(C.password)}return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/"+encodeURIComponent(A.username),params:B,data:A})};y.syncUserCloudUserGroup=function(){var A={};return x({method:"POST",headers:z.getHeaders4Token(),url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/sync-cloud-user-group",params:A,data:{}})};y.updateUserBasicInformation=function h(B){var A={token:z.getCurrentToken()};return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/"+encodeURIComponent(B.username)+"/information",params:A,data:B})};y.updateUserWorknumber=function k(C,B){var A={token:z.getCurrentToken()};return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/worknumber/"+encodeURIComponent(C),params:A,data:B})};y.updateUserVPNGateway=function p(C,B){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/system/"+encodeURIComponent(C)+"/user/gateway/role/"+B,params:A})};y.updateUserVPNRouterRole=function c(C,B){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/permissions/vpn-router-role/"+encodeURIComponent(C)+"/"+encodeURIComponent(B),params:A})};y.updateUserPassword=function n(C,B){var A={token:z.getCurrentToken()};return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/users/"+encodeURIComponent(C)+"/password",params:A,data:{oldPassword:Crypto.SHA256(B.oldPassword),newPassword:Crypto.SHA256(B.newPassword)}})};y.getDisabledHostnames=function m(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/system/disableds/all/system",params:A})};y.getDisabledUsers=function w(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/system/disableds/all/user",params:A})};y.undisabledHostnames=function g(B){var A={token:z.getCurrentToken()};return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/system/disableds/remove/system",params:A,data:B})};y.undisabledUsers=function b(B){var A={token:z.getCurrentToken()};return x({method:"POST",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/system/disableds/remove/user",params:A,data:B})};y.syncUsers2Cloudstorage=function o(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/cloudstorage/syncCloudUsers",params:A})};y.syncGroups2Cloudstorage=function d(){var A={token:z.getCurrentToken()};return x({method:"GET",url:f.tomcat_request_host+"/api/data/"+encodeURIComponent(z.getDataSource())+"/cloudstorage/syncCloudGroups",params:A})};return y}]);angular.module("users").controller("usersUndisabledController",["$scope","$injector","$interval","$timeout",function usersUndisabledController(j,n,l,p){var o=n.get("$q");var h=n.get("$route");var s=n.get("$http");var d=n.get("$routeParams");var q=n.get("$document");var i=n.get("$window");var f=n.get("$location");var r=n.get("$cookieStore");var g=n.get("$rootScope");var k=n.get("loggerService");var e=n.get("utilService");var t=n.get("userService");var b=n.get("usersService");j.message={title:"提示:",text:""};j.disabledUsers=[];var m=false;var a=function a(){if(m){return false}m=true;b.getDisabledUsers().success(function u(v){j.disabledUsers=[];angular.forEach(v,function w(x){x.selected=false;j.disabledUsers.push(x)});m=false}).error(function(v){m=false})};var c=false;j.undisabled=function(){if(j.disabledUsers!==null&&j.disabledUsers.length!==0){var u=[];angular.forEach(j.disabledUsers,function w(y){if(y.selected){var x={username:y.username,attributes:y.attributes};u.push(x)}});if(u.length!==0){if(c){return false}c=true;b.undisabledUsers(u).success(function v(x){j.message.text="解除封禁成功";$("#modal-alert-message").modal("show");j.disabledUsers=[];angular.forEach(x,function y(z){z.selected=false;j.disabledUsers.push(z)});c=false}).error(function(x){c=false})}}};if(!g.expectedCredentials&&g.canUseManageFeature){a()}}]);angular.module("users").controller("usersUndisabledIPsController",["$scope","$injector","$interval","$timeout",function usersUndisabledIPsController(i,l,k,n){var m=l.get("$q");var g=l.get("$route");var r=l.get("$http");var c=l.get("$routeParams");var p=l.get("$document");var h=l.get("$window");var e=l.get("$location");var q=l.get("$cookieStore");var f=l.get("$rootScope");var j=l.get("loggerService");var d=l.get("utilService");var s=l.get("userService");var b=l.get("usersService");i.message={title:"提示:",text:""};i.disabledIPs=[];var a=function a(){b.getDisabledHostnames().success(function t(v){i.disabledIPs=[];angular.forEach(v,function u(w){w.selected=false;i.disabledIPs.push(w)})})};var o=false;i.undisabled=function(){if(i.disabledIPs!==null&&i.disabledIPs.length!==0){var t=[];angular.forEach(i.disabledIPs,function v(w){if(w.selected){var x={hostname:w.hostname,identifier:w.identifier,state:w.state,time:w.time};t.push(x)}});if(t.length!==0){if(o){return false}o=true;b.undisabledHostnames(t).success(function u(w){i.message.text="解除封禁成功";$("#modal-alert-message").modal("show");i.disabledIPs=[];angular.forEach(w,function x(y){y.selected=false;i.disabledIPs.push(y)});o=false}).error(function(w){o=false})}}};if(!f.expectedCredentials&&f.canUseManageFeature){a()}}]);angular.module("users").controller("usersViewController",["$scope","$injector","$interval","$timeout",function usersViewController(p,s,r,w){var u=s.get("$q");var n=s.get("$route");var A=s.get("$http");var g=s.get("$routeParams");var x=s.get("$document");var o=s.get("$window");var i=s.get("$location");var y=s.get("$cookieStore");var k=s.get("$rootScope");var q=s.get("loggerService");var h=s.get("utilService");var C=s.get("userService");var d=s.get("usersService");var c=s.get("systemService");p.users_info_loading=false;p.message={title:"提示:",text:""};p.sysUsers=[];p.objspage=h.init_object_paging();var f=["username","nickname","status"];p.search_condition=null;p.conditionSysUsers=[];p.users=[];p.vpages=[];p.pages=0;p.page=0;p.page_size=0;p.start=0;p.end=0;p.$watch("page_size",function(D){if(D!=0){p.page=1;p.objspage=h.object_paging(p.sysUsers,p.page,p.page_size,p.search_condition,f)}});p.$watch("search_condition",function(D){if(!!!D&&D!=""){}else{p.page=1;p.objspage=h.object_paging(p.sysUsers,p.page,p.page_size,p.search_condition,f)}});var B=function B(){if(p.users_info_loading){return false}p.users_info_loading=true;d.getSystemAllUsernames().success(function E(H){var F=H.activity_users;if(!!!!F&&F.length>0){angular.forEach(F,function(I){if(!!!!I.nickname){I.iconText=I.nickname.substring(0,1).toUpperCase()}else{I.iconText=I.username.substring(0,1).toUpperCase()}I.activity=true;I.status="已激活 | 激活中";p.sysUsers.push(I);p.conditionSysUsers.push(I)})}var G=H.disabled_users;if(!!!!G&&G.length>0){angular.forEach(G,function(I){if(!!!!I.nickname){I.iconText=I.nickname.substring(0,1).toUpperCase()}else{I.iconText=I.username.substring(0,1).toUpperCase()}I.activity=false;I.status="已禁用 | 禁用中";p.sysUsers.push(I);p.conditionSysUsers.push(I)})}p.page=1;p.page_size=10;p.users_info_loading=false}).error(function D(F){p.users_info_loading=false})};p.pagefornumber=function l(D){p.page=D;p.objspage=h.object_paging(p.sysUsers,p.page,p.page_size,p.search_condition,f)};var j=function j(){q.i("loading users informations...");B();e()};p.currentUser=null;p.setDisabledUser=function m(D){p.currentUser=D;p.message.title="提示:";p.message.text="确认要禁用“"+p.currentUser.username+"”吗?"};var v=false;p.disabledUser=function t(){if(!!!!p.currentUser){if(v){return false}v=true;d.disabledUser(p.currentUser.username).success(function E(F){B();v=false}).error(function D(F){B();v=false})}};p.cloudstorage_server_host=null;var e=function e(){c.getParameters().success(function(D){if(!!!!D){if(!!!!D.driveMachine){p.cloudstorage_server_host=D.driveMachine}if(!!!!D.cloudstorage_server_host){p.cloudstorage_server_host=D.cloudstorage_server_host}}}).error(function(D){})};var a=false;p.syncAccount2Cloudstorage=function z(){if(!!!p.cloudstorage_server_host){p.message={title:"提示:",text:"请先设置云盘服务器主机地址"};$("#modal-alert-message").modal("show");return false}if(!!!p.objspage.objs||p.objspage.objs.length==0){p.message={title:"提示:",text:"还没有用户,请先创建用户"};$("#modal-alert-message").modal("show");return false}if(a){return false}a=true;d.syncGroups2Cloudstorage().success(function(D){if(!!!D.success){p.message={title:"提示:",text:"同步系统部门信息失败:请检查云盘服务器地址是否设置正确, 能否正常使用."};$("#modal-alert-message").modal("show")}else{p.message={title:"提示:",text:"同步系统部门信息成功"};$("#modal-alert-message").modal("show")}a=false}).error(function(D){p.message={title:"提示:",text:"同步系统部门信息失败, 请检查云盘服务器地址是否设置正确, 能否正常使用."};$("#modal-alert-message").modal("show");a=false});d.syncUsers2Cloudstorage().success(function(D){if(!!!D.success){p.message={title:"提示:",text:"同步用户信息失败:请检查云盘服务器地址是否设置正确, 能否正常使用."};$("#modal-alert-message").modal("show")}else{p.message={title:"提示:",text:"同步用户信息成功"};$("#modal-alert-message").modal("show")}a=false}).error(function(D){p.message={title:"提示:",text:"同步用户信息失败, 请检查云盘服务器地址是否设置正确, 能否正常使用."};$("#modal-alert-message").modal("show");a=false})};p.showAddNewUser=function b(){i.url("/system-manage/users/new")};j()}]);angular.module("rest").factory("utilService",["$injector",function utilService(x){var b=x.get("$q");var l=x.get("$http");var o=x.get("$document");var H=x.get("$window");var z=x.get("$location");var k=x.get("$rootScope");var G=x.get("loggerService");var d={};d.mulitApplicationModel=true;d.virworkSuperVPNFeature=false;d.display_basic={width:1024,height:768};d.valueIsNotNull=function e(K){return undefined!=K&&!!!!K&&K!=""&&K.length>0};d.valueIsTrue=function j(K){return !!!!K&&K!=""&&(K=="true"||K==true)};d.numberToFixed=function t(K){return(K>=10)?K:"0"+K};d.decodeToken=function J(M){if(!!!!M){var K=";";var O=256;M=M.substring(O,M.length);var N=parseInt(M.split(K)[0]);var L=(""+N+K);var P=N+L.length;var Q=N+P;M=M.substring(P,Q);return M}return""};d.getTokenByNumbers=function i(N){var K=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","_","|","+","-","*","%","!","$","?","^","&","(",")","[","]","{","}",".",",",".",";","?","#","~","@","=",":"];if(N>0){var M="";for(var L=0;L<N;L++){M+=K[Math.floor(Math.random()*K.length)]}return M}return""};d.getRamdonCode=function(R){if(null==R){R=8}else{if(R<6||R>16){R=8}}var Q=["a","b","c","d","e","f","g","h","i","j","k","m","n","p","q","r","s","t","u","v","w","X","y","z"];var O=["A","B","C","D","E","F","G","H","J","k","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"];var L=["2","3","4","5","6","7","8","9"];var K=[".","_","-"];var N="";for(var P=0;P<R;P++){for(var M=0;M<8;M++){N+=O[Math.floor(Math.random()*O.length)]}if(P<numberLength-1){N+="-"}}return N};d.getTime=function g(){return d.time.getTime_long()};d.time={getTime_long:function w(){var K=new Date();return K.getTime()},getTime_HMS:function r(){var L=new Date();var N=d.numberToFixed(L.getHours());var K=d.numberToFixed(L.getMinutes());var M=d.numberToFixed(L.getSeconds());var O=N+":"+K+":"+M;return O},getTime_HMSM:function F(){var S=new Date();var N=S.getTime();var R=S.getDate();var P=S.getMonth()+1;var Q=S.getFullYear();var O=d.numberToFixed(S.getHours());var L=d.numberToFixed(S.getMinutes());var U=d.numberToFixed(S.getSeconds());var K=O+":"+L+":"+U+".";var T=new Date();T.setFullYear(Q);T.setMonth(P);T.setDate(R);T.setHours(S.getHours());T.setMinutes(S.getMinutes());T.setSeconds(S.getSeconds());var M=N-T.getTime();K+=M;return K},getDateTime_YMD:function n(){var K=new Date();var L=d.numberToFixed(K.getDate());var O=d.numberToFixed(K.getMonth()+1);var N=K.getFullYear();var M=N+"-"+O+"-"+L;return M},getDateTime_YMD4Time:function f(P){if(!!!P){return""}P=parseInt(P);var K=new Date(P);var L=K.getDate();var O=K.getMonth()+1;var N=K.getFullYear();var M=N+"-"+d.numberToFixed(O)+"-"+d.numberToFixed(L);return M},getDateTime_MDY:function s(){var K=new Date();var L=K.getDate();var O=K.getMonth()+1;var N=K.getFullYear();var M=d.numberToFixed(O)+"/"+d.numberToFixed(L)+"/"+N;return M},getTime_YMDHMS:function I(){var L=new Date();var P=d.numberToFixed(L.getHours());var K=d.numberToFixed(L.getMinutes());var O=d.numberToFixed(L.getSeconds());var M=L.getDate();var R=L.getMonth()+1;var N=L.getFullYear();var Q=N+"-"+d.numberToFixed(R)+"-"+d.numberToFixed(M)+" "+d.numberToFixed(P)+":"+d.numberToFixed(K)+":"+d.numberToFixed(O);return Q},getTime_YMDHMS_CN:function I(){var L=new Date();var P=d.numberToFixed(L.getHours());var K=d.numberToFixed(L.getMinutes());var O=d.numberToFixed(L.getSeconds());var M=L.getDate();var R=L.getMonth()+1;var N=L.getFullYear();var Q=N+"年"+d.numberToFixed(R)+"月"+d.numberToFixed(M)+"日 "+d.numberToFixed(P)+":"+d.numberToFixed(K)+":"+d.numberToFixed(O);return Q},getTime_YMDHMS4Time:function I(K){if(!!!K){return""}K=parseInt(K);var R=new Date(K);var N=d.numberToFixed(R.getHours());var M=d.numberToFixed(R.getMinutes());var S=d.numberToFixed(R.getSeconds());var Q=R.getDate();var O=R.getMonth()+1;var P=R.getFullYear();var L=P+"-"+d.numberToFixed(O)+"-"+d.numberToFixed(Q)+" "+d.numberToFixed(N)+":"+d.numberToFixed(M)+":"+d.numberToFixed(S);return L},getTime_YMDHMS4Time_CN:function I(K){if(!!!K){return""}K=parseInt(K);var R=new Date(K);var N=d.numberToFixed(R.getHours());var M=d.numberToFixed(R.getMinutes());var S=d.numberToFixed(R.getSeconds());var Q=R.getDate();var O=R.getMonth()+1;var P=R.getFullYear();var L=P+"年"+d.numberToFixed(O)+"月"+d.numberToFixed(Q)+"日 "+d.numberToFixed(N)+":"+d.numberToFixed(M)+":"+d.numberToFixed(S);return L},getCalendar:function y(Q){if(!!!Q){return""}Q=parseInt(Q);if(!!!!Q){var O=new Date(Q);var N=O.getFullYear();var P=O.getMonth()+1;var L=O.getDate();var K=O.getHours();var M=O.getMinutes();P=d.numberToFixed(P);L=d.numberToFixed(L);K=d.numberToFixed(K);M=d.numberToFixed(M);return N+"-"+P+"-"+L+" "+K+":"+M}return""},stringFormatTime:function p(M){if(!!!M){return""}M=parseInt(M);if(!!!!M&&M.length>0){var K=M.split(" ")[0];var L=M.split(" ")[1];var P=K.split("-")[0];var O=K.split("-")[1];var Q=K.split("-")[2];var R=L.split(":")[0];var N=L.split(":")[1];var S=new Date();S.setFullYear(parseInt(P));S.setMonth(parseInt(O)-1);S.setDate(parseInt(Q));S.setHours(parseInt(R));S.setMinutes(parseInt(N));return S.getTime()}return""}};d.codeHandler=(function(){var Q=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];var R={base64:O};var K={base64:M};var S={"utf-8":P};var T=function(U){return{from:function(V){return{to:function(W){return parseInt(U,V).toString(W)}}}}};T.bin2dec=function(U){return T(U).from(2).to(10)};T.bin2hex=function(U){return T(U).from(2).to(16)};T.dec2bin=function(U){return T(U).from(10).to(2)};T.dec2hex=function(U){return T(U).from(10).to(16)};T.hex2bin=function(U){return T(U).from(16).to(2)};T.hex2dec=function(U){return T(U).from(16).to(10)};function P(W){var V=0;var U=0;var aa="";var Y=0;var Z=W.toString(2);var X=Z.length;if(W>=0&&W<=127){aa=Z;for(V=0,U=8;V<(U-X);V++){aa=0+aa}}else{if(W>=128&&W<=2047){aa=Z;for(V=0,U=11;V<(U-X);V++){aa=0+aa}aa="110"+aa.substr(0,5)+"10"+aa.substr(5,6)}else{if(W>=2048&&W<=65535){aa=Z;for(V=0,U=16;V<(U-X);V++){aa=0+aa}aa="1110"+aa.substr(0,4)+"10"+aa.substr(4,6)+"10"+aa.substr(10,6)}else{if(W>=65536&&W<=1114111){aa=Z;for(V=0,U=21;V<(U-X);V++){aa=0+aa}aa="11110"+aa.substr(0,3)+"10"+aa.substr(3,6)+"10"+aa.substr(9,6)+"10"+aa.substr(15,6)}}}}G.d("toUTF8Binary:#"+W+"#::"+aa);return aa}function N(ad,af,X){var Z;var ab;var Y="";if(typeof(ad)=="string"){for(Z=0,ab=ad.length;Z<ab;Z++){Y+=S[X.toLowerCase()](ad.charCodeAt(Z))}}else{for(Z=0,ab=ad.length;Z<ab;Z++){var ac=ad[Z];if(typeof(ac)=="string"){var W,U;for(W=0,U=ac.length;W<U;W++){Y+=S[X.toLowerCase()](ac.charCodeAt(W))}}else{if(typeof(ac)=="number"){var aa=T.dec2bin(ac);var ae="";if(aa.length!=8){for(var V=0;V<8-aa.length;V++){ae+="0"}}Y+=ae+aa;G.d("ConvertBase.dec2bin:"+ac+"->"+T.dec2bin(ac))}}}}G.d("stringToBinary##"+ad+"#"+Y+"#");return Y}function L(Z,W){var X;var V;var U="";var Y;if(W==1){for(X=0;X<4;X++){Y=parseInt(Z.substr(X*6,6),2);U=U+Q[Y]}}else{for(X=0,V=Math.floor(W/6);X<V+1;X++){Y=parseInt(Z.substr(X*6,6),2);U=U+Q[Y]}for(X=0;X<3-V;X++){U=U+"="}}G.i("base64Parse result:"+U);return U}function O(W){var Y=0;var V=0;var ab=0;var X=0;var U="";var Z=[];var aa=N(W,8,"utf-8");V=aa.length;G.d("binary:"+aa);X=Math.floor(V/24);ab=V%24;for(Y=0;Y<X;Y++){U=U+L(aa.substr(Y*24,24),1)}remCode=aa.substr(V-ab,ab);if(ab>0){for(Y=0;Y<24-ab;Y++){remCode=remCode+0}U=U+L(remCode,ab)}return U}function M(ad){var Z=0;var X=0;var W=0;var aa=0;var ae=0;var V;var U=0;var ac=[{str:"0",len:8},{str:"110",len:11},{str:"1110",len:16},{str:"11110",len:21}];var Y="";var ab="";for(Z=0,aa=ad.length;Z<aa;Z++){var V=Q.indexOf(ad.charAt(Z)).toString(2);if(V!="-1"){for(X=0;V.length<6;X++){V=0+V}Y=Y+V}if(Z>=aa-2&&ad.charAt(Z)=="="){++ae}}if(ae==0){aa=Y.length}else{aa=Y.length-(6-2*ae)}for(;U<aa;){for(X=0;X<4;X++){if(Y.indexOf(ac[X].str,U)==U){if(ac[X].len==8){ab=ab+String.fromCharCode(parseInt(Y.substr(U,8),2))}else{if(ac[X].len==11){ab=ab+String.fromCharCode(parsetInt(Y.substr(U+3,5)+Y.substr(U+10,6),2))}else{if(ac[X].len==16){ab=ab+String.fromCharCode(parsetInt(Y.substr(U+4,4)+Y.substr(U+10,6)+Y.substr(U+18,6),2))}else{if(ac[X].len==21){ab=ab+String.fromCharCode(parseInt(Y.substr(U+5,3)+Y.substr(U+10,6)+Y.substr(U+18,6)+Y.substr(U+26,6),2))}}}}U=U+ac[X].len;break}}}Y=null;return ab}return{encode:function(V,U){return R[U](V)},decode:function(V,U){return K[U](V)}}})();d.utf8_to_b64=function(K){return d.codeHandler.encode(K,"base64")};d.b64_to_utf8=function(K){return d.codeHandler.decode(K,"base64")};d.encode_type_utf8="utf-8";d.base64=function m(){var K=this;var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";var L="=";function S(X,U,V){var Y="";var W;for(W=0;W<=U-3;W+=3){Y+=V.charAt(X.charCodeAt(W)>>>2);Y+=V.charAt(((X.charCodeAt(W)&3)<<4)|(X.charCodeAt(W+1)>>>4));Y+=V.charAt(((X.charCodeAt(W+1)&15)<<2)|(X.charCodeAt(W+2)>>>6));Y+=V.charAt(X.charCodeAt(W+2)&63)}if(U%3==2){Y+=V.charAt(X.charCodeAt(W)>>>2);Y+=V.charAt(((X.charCodeAt(W)&3)<<4)|(X.charCodeAt(W+1)>>>4));Y+=V.charAt(((X.charCodeAt(W+1)&15)<<2));Y+=L}else{if(U%3==1){Y+=V.charAt(X.charCodeAt(W)>>>2);Y+=V.charAt(((X.charCodeAt(W)&3)<<4));Y+=L;Y+=L}}return Y}K.base64_encode=function Q(V){var U=unescape(encodeURIComponent(V));return S(U,U.length,R)};K.base64url_encode=function O(V){var U=unescape(encodeURIComponent(V));return S(U,U.length,T)};function N(U){if(U=="+"){return 62}if(U=="/"){return 63}return T.indexOf(U)}K.base64_decode=function M(X){var ab="";var W,V,U,aa,Z,Y;for(W=0;W<X.length-3;W+=4){V=N(X.charAt(W+0));U=N(X.charAt(W+1));aa=N(X.charAt(W+2));Z=N(X.charAt(W+3));ab+=String.fromCharCode((V<<2)|(U>>>4));if(X.charAt(W+2)!=L){ab+=String.fromCharCode(((U<<4)&240)|((aa>>>2)&15))}if(X.charAt(W+3)!=L){ab+=String.fromCharCode(((aa<<6)&192)|Z)}}ab=decodeURIComponent(escape(ab));return ab};function P(U){if(U.indexOf("-")>=0){return true}if(U.indexOf("_")>=0){return true}return false}return K};d.Base64Encode=function B(O,N,M){if(!!!O||O==""){return""}if(!!!N){N="utf-8"}if(!!!M||M<=0){M=1}var P="";for(var L=0;L<M;L++){var K=new d.base64();O=K.base64_encode(O);P=O}return P};d.Base64Decode=function A(P,O,N){if(!!!P||P==""){return""}if(!!!O){O="utf-8"}if(!!!N||N<=0){N=1}var M="";for(var L=0;L<N;L++){var K=new d.base64();P=K.base64_decode(P);M=P}return M};var v=function v(){var W=this;var ac="unknown";var Z=window.navigator.appVersion;var aa=window.navigator.userAgent;var ab=window.navigator.appName;var O=""+parseFloat(window.navigator.appVersion);var S=parseInt(window.navigator.appVersion,10);var X,K,N;if((K=aa.indexOf("Opera"))!=-1){ab="Opera";O=aa.substring(K+6);if((K=aa.indexOf("Version"))!=-1){O=aa.substring(K+8)}}else{if((K=aa.indexOf("MSIE"))!=-1){ab="Microsoft Internet Explorer";O=aa.substring(K+5)}else{if((K=aa.indexOf("Chrome"))!=-1){ab="Chrome";O=aa.substring(K+7)}else{if((K=aa.indexOf("Safari"))!=-1){ab="Safari";O=aa.substring(K+7);if((K=aa.indexOf("Version"))!=-1){O=aa.substring(K+8)}}else{if((K=aa.indexOf("Firefox"))!=-1){ab="Firefox";O=aa.substring(K+8)}else{if((X=aa.lastIndexOf(" ")+1)<(K=aa.lastIndexOf("/"))){ab=aa.substring(X,K);O=aa.substring(K+1);if(ab.toLowerCase()==ab.toUpperCase()){ab=navigator.appName}}}}}}}if((N=O.indexOf(";"))!=-1){O=O.substring(0,N)}if((N=O.indexOf(" "))!=-1){O=O.substring(0,N)}S=parseInt(""+O,10);if(isNaN(S)){O=""+parseFloat(navigator.appVersion);S=parseInt(navigator.appVersion,10)}var M=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(Z);var T=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!T){document.cookie="testcookie";T=(document.cookie.indexOf("testcookie")!=-1)?true:false}var R="OTHER";var Y=[{s:"PC",r:/Win16/},{s:"PC",r:/(Windows 95|Win95|Windows_95)/},{s:"PC",r:/(Win 9x 4.90|Windows ME)/},{s:"PC",r:/(Windows 98|Win98)/},{s:"PC",r:/Windows CE/},{s:"PC",r:/(Windows NT 5.0|Windows 2000)/},{s:"PC",r:/(Windows NT 5.1|Windows XP)/},{s:"PC",r:/Windows NT 5.2/},{s:"PC",r:/Windows NT 6.0/},{s:"PC",r:/(Windows 7|Windows NT 6.1)/},{s:"PC",r:/(Windows 8.1|Windows NT 6.3)/},{s:"PC",r:/(Windows 8|Windows NT 6.2)/},{s:"PC",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"OTHER",r:/Windows ME/},{s:"Android",r:/Android/},{s:"PC",r:/OpenBSD/},{s:"PC",r:/SunOS/},{s:"PC",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"PC",r:/Mac OS X/},{s:"PC",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"OTHER",r:/QNX/},{s:"PC",r:/UNIX/},{s:"OTHER",r:/BeOS/},{s:"OTHER",r:/OS\/2/},{s:"OTHER",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var V in Y){var P=Y[V];if(P.r.test(aa)){R=P.s;break}else{R="OTHER"}}var L=ac;if(/Windows/.test(R)){L="unknown";R="OTHER"}switch(R){case"Android":L=/Android ([\.\_\d]+)/.exec(aa)[1];break;case"iOS":L=/OS (\d+)_(\d+)_?(\d+)?/.exec(Z);L=L[1]+"."+L[2]+"."+(L[3]|0);break}W={window:{width:window.innerWidth||screen.width,height:window.innerHeight||screen.height},screen:{width:screen.width,height:screen.height},browser:ab,browserVersion:O,mobile:M,os:R,osVersion:L,cookieEnabled:T};W.deviceIsWindow=function ad(){var ae=navigator.userAgent.toLocaleUpperCase();return ae.indexOf("WINDOWS")>0||ae.indexOf("WIN64")>0};W.deviceIsMacOSX=function U(){var ae=navigator.userAgent.toLocaleUpperCase();return ae.indexOf("MAC")>0};W.deviceIsLinuxOSX=function Q(){var ae=navigator.userAgent.toLocaleUpperCase();return ae.indexOf("LINUX")>0};W.deviceIsPC=function(){var ae=!!!!("createTouch" in document&&document.hasOwnProperty("ontouchstart"))||!!!!(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1);return !!!(W.mobile||ae)&&(W.os.toLowerCase()=="pc")};W.deviceIsMobile=function(){var ae=!!!!("createTouch" in document&&document.hasOwnProperty("ontouchstart"))||!!!!(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1);return W.mobile||ae};W.isAndroidAPP=function(){return W.deviceIsMobile()&&d.isAndroidApp()};W.isIOSAPP=function(){return W.deviceIsMobile()&&d.isIOSApp()};W.isIOS=function(){return W.deviceIsMobile()&&W.os.toUpperCase()=="IOS"};W.isAndroid=function(){return W.deviceIsMobile()&&W.os.toUpperCase()=="ANDROID"};W.getIEVersion=function(){var ai=navigator.userAgent;var af=ai.indexOf("compatible")>-1&&ai.indexOf("MSIE")>-1;var ah=ai.indexOf("Edge")>-1&&!af;var aj=ai.indexOf("Trident")>-1&&ai.indexOf("rv:11.0")>-1;if(af){var ae=new RegExp("MSIE (\\d+\\.\\d+);");ae.test(ai);var ag=parseFloat(RegExp["$1"]);if(ag==7){return 7}else{if(ag==8){return 8}else{if(ag==9){return 9}else{if(ag==10){return 10}else{return 6}}}}}else{if(ah){return"edge"}else{if(aj){return 11}}}return -1};return W};d.device=new v();d.pc=function(){return d.device.deviceIsPC()};d.isIEBrowser=function(){return d.device.getIEVersion()!=-1};d.supportSandbox=function(){return d.device.deviceIsPC()&&d.device.deviceIsWindow()};d.isWindowDesktopApp=function(){var K=false;try{K=!!!!js2WindowDesktopApp}catch(L){}G.i("是否是桌面嵌入式桌面浏览器:{}.",d.device.deviceIsPC()&&K);return d.device.deviceIsPC()&&K};d.androidApp=function(){return d.device.isAndroidAPP()};d.mobile=function(){return d.device.deviceIsMobile()};d.isAndroid=function(){return d.device.isAndroid()};d.isIOS=function(){return d.device.isIOS()};d.isPCApp=function(){var K=false;try{K=!!!!JsQuitLogin||!!!!JsUsePrinter||!!!!JsCreateShareDisk||!!!!JsSetClipboard||!!!!JsGetClipboard||!!!!JsUseUsb||!!!!JsOpenUsbRlf||!!!!JsCloseUsbRlf||!!!!JsQuitLogin}catch(L){K=false}return K};d.isMacOS=window.navigator.userAgent.toLowerCase().indexOf("mac")>0;d.homepage=window.location.protocol+"//"+window.location.host+window.location.pathname;d.tomcat_request_host=window.location.protocol+"//"+window.location.host;d.app_download_url={sandbox:d.tomcat_request_host+"/api/virwork-system-tools/download-sandbox-pc-app?token=download_sandbox_last_version_"+d.Base64Encode(window.location.origin,d.encode_type_utf8,1),android:d.tomcat_request_host+"/download/virwork.apk",ios_v1:"https://itunes.apple.com/us/app/vvwork/id1181331650?mt=8",ios:"https://itunes.apple.com/cn/app/virwork/id1371215960?mt=8"};d.client_home_page="/home";d.client_login_page="/";d.currentPageIsHomePage=function a(){var K=H.location.href.toLocaleLowerCase();return K.lastIndexOf(d.client_home_page)>=0&&K.length==K.lastIndexOf(d.client_home_page)+d.client_home_page.length};d.virworkWebModel=H.location.href.toLocaleLowerCase().indexOf("/online.html")>=0||H.location.href.toLocaleLowerCase().indexOf("/online.jsp")>=0||H.location.href.toLocaleLowerCase().indexOf("/admin-online.html")>=0||H.location.href.toLocaleLowerCase().indexOf("/admin-online.jsp")>=0||!d.supportSandbox();d.virworkAdminManageModel=H.location.href.toLocaleLowerCase().indexOf("/admin.html")>=0||H.location.href.toLocaleLowerCase().indexOf("/admin.jsp")>=0||H.location.href.toLocaleLowerCase().indexOf("/admin-online.html")>=0||H.location.href.toLocaleLowerCase().indexOf("/admin-online.jsp")>=0;d.debugModel=H.location.href.toLocaleLowerCase().indexOf("/debug.html")>=0||H.location.href.toLocaleLowerCase().indexOf("/demo.html")>=0||H.location.href.toLocaleLowerCase().indexOf("/debug.jsp")>=0||H.location.href.toLocaleLowerCase().indexOf("/demo.jsp")>=0;d.supportH5Browser=function C(){var L=false;var K=document.getElementById("test_square");if(!!!K){K=document.createElement("canvas")}try{if(!!!!K&&!!!!K.getContext("2d")&&!!!!window.WebSocket){L=true}else{L=false}}catch(M){L=false}return L};d.KeysymService=function E(){var M=this;this.keysymFromCodepoint=function K(P){if(P<=31||(P>=127&&P<=159)){return 65280|P}if(P>=0&&P<=255){return P}if(P>=256&&P<=1114111){return 16777216|P}return null};this.sendKeyUpCode=function(P){};this.sendKeyDownCode=function(P){};this.sendKeysym=function O(P){};this.sendCodepoint=function N(Q){var P=M.keysymFromCodepoint(Q);if(P){M.sendKeysym(P)}};this.sendText=function L(U){if(!!!U){return}var P="";var Q=4;var R=8203;for(var S=0;S<U.length;S++){var T=U.charCodeAt(S);if(T!==R){P+=String.fromCharCode(T);M.sendCodepoint(T)}}};return M};d.developModelHttpTunnel=false;d.httpdModelHttpTunnel=false;d.ERROR_TYPE={WEB_MODEL_CRD_CONNECTED_MACHINE_ERROR:"WEB_MODEL_CRD_CONNECTED_MACHINE_ERROR",CLIENT_NETWORK_DISCONNECTED:"CLIENT_NETWORK_DISCONNECTED",CLIENT_AUTH_DISCONNECTED:"CLIENT_AUTH_DISCONNECTED",CLIENT_AUTH_TIMEOUT:"CLIENT_AUTH_TIMEOUT",CLIENT_AUTH_DISCONNECTED_BACK_LOGED:"CLIENT_AUTH_DISCONNECTED_BACK_LOGED",CLILENT_CONNECTION_TUNNEL_ERROR_CODE:{CONNECTION_NULL:"ERROR_1024",CLIENT_CONNECTION_TIMEOUT:"ERROR_202",CLIENT_CONNECTION_APP_NULL:"ERROR_1025",CLIENT_CONNECTION_MACHINE_NULL:"ERROR_1026",CLIENT_CONNECTION_MACHINE_NOT_ALIVE:"ERROR_1027",CLIENT_CONNECTION_MAHCINE_NOT_USE_LICENSE:"ERROR_1028",CLIENT_CONNECTION_MACHINE_CRD_NOT_ALIVE:"ERROR_1029",CLIENT_CONNECTION_MACHINE_CRD_SOCKET_NULL:"ERROR_1030"},CLILENT_CONNECTION_TUNNEL_ERROR_TEXT:{ERROR_1024:"CONNECTION_NULL",ERROR_1025:"CLIENT_CONNECTION_APP_NULL",ERROR_1026:"CLIENT_CONNECTION_MACHINE_NULL",ERROR_1027:"CLIENT_CONNECTION_MACHINE_NOT_ALIVE",ERROR_1028:"CLIENT_CONNECTION_MAHCINE_NOT_USE_LICENSE",ERROR_1029:"CLIENT_CONNECTION_MACHINE_CRD_NOT_ALIVE",ERROR_1030:"CLIENT_CONNECTION_MACHINE_CRD_SOCKET_NULL",ERROR_202:"CLIENT_CONNECTION_TIMEOUT"}};d.CLIENT_ERRORS={513:true,514:true,515:true,517:true,769:true,771:true,776:true,797:true,1298:true,1905:true};d.CLIENT_AUTO_RECONNECT={512:true,514:true,515:true,769:true,776:true};d.TUNNEL_ERRORS={513:true,514:true,515:true,516:true,517:true,769:true,771:true,1298:true,1905:true,797:true};d.TUNNEL_AUTO_RECONNECT={512:true,514:true,515:true,776:true};d.htmlElement={hasClass:function D(L,K){return L.className.match(new RegExp("(\\s|^)"+K+"(\\s|$)"))},addClass:function q(L,K){if(!d.htmlElement.hasClass(L,K)){L.className+=" "+K}},removeClass:function h(M,K){if(d.htmlElement.hasClass(M,K)){var L=new RegExp("(\\s|^)"+K+"(\\s|$)");M.className=M.className.replace(L," ")}},toggleClass:function c(L,K){if(d.htmlElement.hasClass(L,K)){d.htmlElement.removeClass(L,K)}else{d.htmlElement.addClass(L,K)}}};d.IMAGE_CLIENT_IDENTIFIER_AUTH_COOKIE="CLIENT_IDENTIFIER_AUTH";d.saveImagesClientIdentifier=function(L,K){window.localStorage.setItem(L,K)};d.getImagesClientIdentifier=function(K){return window.localStorage.getItem(K)};d.removeImagesClientIdentifier=function(K){window.localStorage.removeItem(K)};d.icons=["CRM01.png","erp.jpg","HIS.jpg","HR.png","MES01.jpg","OA.jpg","oracle01.jpg","pdm.png","sap.png","scm.png","yongyou01.png","yongyou02.png","jindie.jpg","61htq5jIvpL.png","360-secure.png","browser.png","firefox-512.png","Google-Chrome-icon.png","iOS-7-Safari-app-icon-large-e1442348114864.png","qq.png","safari_PNG21.png","UC-Browser-Mini.png","MetroUI_Google_Chromium.png","Word2013.jpg","SCOM0519-summary-icon-100x100.png","p-images.png","office.png","office-2013-microsoft-icon-23.png","Office-icon.png","pdf-word-icon-31.png","Word-2-icon.png","1200x630bb.jpg","iBooks-S3-icon.png","txt.png","photo.jpg","iCloud-Icon.png","MetroUI_Mail.png","mail.jpg","qq-penguin-png-image-45182.png","wechat-logo-preview.png","youtube-512.png","soundcloud-icon.png","unnamed.png","massage.png","MetroUI_Mac_App_Store.png","Settings-icon.png","crm.png","cropped-OA-Investment-News-Icon.png","Customer_Support-512.png","sapapps.png","Users-Vector-sales-collaboration.png","VPNreviews-512.png"];d.init_object_paging=function(){return{objs:[],length:0,total:0,page_size:0,page_number:0,pages:0,page_objects:[],page_row_start:0,page_row_end:0,condition:"",fields:[]}};d.seach_condition_objs=function(S,O,N){if(!!!S){return[]}var Q=S;if(!!!!O&&!!!!N&&N.length>0){Q=[];for(var M=0;M<S.length;M++){var L=S[M];for(var K=0;K<N.length;K++){var P=N[K];if(!!!P||P==""){continue}if(L[""+P]!=null&&L[""+P]!=undefined){var R=L[""+P];if(!!!R||R==""){continue}if(R.toLocaleLowerCase().indexOf(O.toLocaleLowerCase())>-1){Q.push(L);break}}}}}return Q};d.object_paging=function(W,V,Q,U,N){if(!!!W){W=[]}if(!!!V){V=1}if(!!!Q||parseInt(Q)<10){Q=10}if(parseInt(Q)>100){Q=100}V=parseInt(V);Q=parseInt(Q);var M=[];var P=[];var K=0;var O=0;var S=0;var T=W;if(W.length!=0){if(!!!!U&&U==""){}else{if(!!!!U&&!!!!N&&N.length>0){T=d.seach_condition_objs(W,U,N)}else{}}var R=T.length;K=(R/Q)>parseInt(R/Q)?parseInt(R/Q)+1:(R/Q);if(R/Q<1){K=1}for(var L=1;L<=K;L++){P.push({page:L,active:(L==V)})}O=Q*(V-1);S=O+Q-1;if(S>R){S=R}var M=[];for(var X=O;X<=S;X++){if(X<R){M.push(T[X])}}if(M.length>0){O++;S++}}return{objs:M,length:M.length,total:W.length,page_size:Q,page_number:V,pages:K,page_objects:P,page_row_start:O,page_row_end:S,condition:U,fields:N}};d.notify=function(M){var K=false;if(K){var L=new Notify({});if(!!!!M){L.notify({title:M,body:"跨屏云办公",icon:"/userdata/logo.png"})}else{L.notify({title:"欢迎使用跨屏云办公",body:"跨屏云办公",icon:"/userdata/logo.png"})}}};d.clientNetwork=function u(){var L={localIPs:false,publicIPs:false};function K(T){var R={};var N=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!N){var O=document.createElement("iframe");O.style.display="none";document.body.appendChild(O);var Q=O.contentWindow;window.RTCPeerConnection=Q.RTCPeerConnection;window.mozRTCPeerConnection=Q.mozRTCPeerConnection;window.webkitRTCPeerConnection=Q.webkitRTCPeerConnection;N=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection}var P={optional:[{RtpDataChannels:true}]};var S={iceServers:[{url:"stun:stun.stunprotocol.org"}]};if(window.webkitRTCPeerConnection){S={iceServers:[{urls:"stun:stun.stunprotocol.org"}]}}var M=new N(S,P);M.onicecandidate=function(V){if(V.candidate){var U=/([0-9]{1,3}(\.[0-9]{1,3}){3})/;var W=U.exec(V.candidate.candidate)[1];if(R[W]===undefined){T(W)}R[W]=true}};M.createDataChannel("");M.createOffer(function(U){M.setLocalDescription(U,function(){},function(){})},function(){})}K(function(M){if(M.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)){L.localIPs=M}else{L.publicIPs=M}});return L};return d}]);angular.module("virWorkBox").controller("virWorkBoxController",["$scope","$injector","$interval","$timeout",function virWorkBoxController(m,l,f,b){var g=l.get("$q");var j=l.get("$route");var h=l.get("$http");var k=l.get("$routeParams");var c=l.get("$document");var a=l.get("$window");var e=l.get("$location");var n=l.get("$cookieStore");var i=l.get("$rootScope");var d=l.get("utilService");m.APP.NAME="启动沙盒 | 跨屏云办公";m.APP.className="";if(i.virworkBoxConnected){e.url(d.client_home_page)}d.notify("请先启动沙盒!")}]);angular.module("virWorkBox",[]);angular.module("virWorkBox").controller("virWorkBoxPCAppController",["$scope","$injector","$interval","$timeout",function virWorkBoxPCAppController(m,l,f,b){var g=l.get("$q");var j=l.get("$route");var h=l.get("$http");var k=l.get("$routeParams");var c=l.get("$document");var a=l.get("$window");var e=l.get("$location");var n=l.get("$cookieStore");var i=l.get("$rootScope");var d=l.get("utilService");m.APP.NAME="请切换浏览器! | 跨屏云办公";m.APP.className="";d.notify("请使用沙盒浏览器访问")}]);angular.module("virWorkBox").controller("virWorkBoxPCBrowserController",["$scope","$injector","$interval","$timeout",function virWorkBoxPCBrowserController(m,l,f,b){var g=l.get("$q");var j=l.get("$route");var h=l.get("$http");var k=l.get("$routeParams");var c=l.get("$document");var a=l.get("$window");var e=l.get("$location");var n=l.get("$cookieStore");var i=l.get("$rootScope");var d=l.get("utilService");m.APP.NAME="请切换浏览器! | 跨屏云办公";m.APP.className="";d.notify("请使用浏览器访问")}]);angular.module("rest").factory("virworkBoxService",["$injector","$interval","$timeout",function virworkBoxService(N,y,M){var d=N.get("$q");var D=N.get("$route");var x=N.get("$http");var ae=N.get("$routeParams");var A=N.get("$document");var aa=N.get("$window");var P=N.get("$location");var w=N.get("$rootScope");var ag=N.get("userService");var l=N.get("applicationService");var z=N.get("utilService");var Z=N.get("loggerService");var k={};var B="sandbox_app_auto_into_url_switch";var U="sandbox_app_auto_into_domain_switch";var v="x.x.x.x";var u="_._._._";var I="0";var K="1";var ak=" ";var al='"%VirWork_Host%\\VirWorkHost\\bin\\tools\\virwDisk.exe"';var i='"%VirWork_Host%\\VirWorkHost\\bin\\tools\\VirCndInit.exe"';k.sandboxClientVersion="x.x.x.x";k.sandboxClientLastVersion="_._._._";k.virworkBoxIsUpdate=false;k.virworkBoxIsRunning=false;k.virworkBoxVPNConnected=false;k.httpProtocol="http";k.httpsProtocol="https";k.hostname="127.0.0.1";k.port=21010;k.MARK={PARAMETER_EQUALS:"=",PARAMETER_CONNECTOR:"*?*",PARAMETER_BLANK:" "};k.vpn_command_proxy=true;k.defaultStrategyCommand="--route";k.requestURL=k.httpProtocol+"://"+k.hostname+":"+k.port;k.VPN_STATE={VPN_DISCONNECT:"0",VPN_CONNECTED:"1",VPN_CONNECTING:"2",VPN_RECONNECT:"3",VPN_ERROR_AUTH:"4"};k.vpnConectionState=-1;k.get=function(am){if(!!!am){return}return x({method:"GET",url:k.requestURL+"/"+am,params:{}})};k.init=function ab(){var am="init?method=init&time="+(new Date().getTime());try{if(!!!!window.virwork_debug_model){am="init"}}catch(an){}return k.get(am)};k.router=null;k.openvpn=function p(at){if(k.isConnectedVPN()){return}if(!!!at){return}if(!!!!at.request_token){k.router=at.router;var an=z.decodeToken(at.request_token);var ar=z.encode_type_utf8,aI=1;var ax=z.Base64Decode(an,ar,aI);return k.get("openvpn?"+ax)}var aH="0";var av=z.decodeToken(at.vpntokenname);var aC=z.decodeToken(at.vpntokenkey);var am=at.router;if(!!!am){Z.i("router is undefined.");return false}k.router=am;var aH=am.vpn_connected_type;if(!!!aH){aH=I}var ap=am.machine_hostname+":"+am.machine_port;w.isInnerNetwork=z.valueIsTrue(at["subnet-network-address"]);if(w.isInnerNetwork){ap=am.machine+":"+am.port}else{ap=window.location.hostname+":"+am.machine_port}var aD=at.strategys;var aw="";var aq=false;Z.i("sslvpn network connect type:"+(aH==I)?"client network + vpn connect type model":"vpn connection model, not client network.");if(k.vpn_command_proxy){if(!!!!aD&&aD.length>0){for(var aF=0;aF<aD.length;aF++){var az=aD[aF];if(!!!!az&&!!!!az.command_name){aw+="--"+az.command_name+k.MARK.PARAMETER_BLANK;if(!!!!az.command_value){aw+=az.command_value+k.MARK.PARAMETER_BLANK}}}}}if(aH==I){var aG=window.location.hostname+":255.255.255.255:net_gateway";if(k.vpn_command_proxy){aG=k.defaultStrategyCommand+k.MARK.PARAMETER_BLANK+window.location.hostname+k.MARK.PARAMETER_BLANK+"255.255.255.255"+k.MARK.PARAMETER_BLANK+"net_gateway"}aw+=aG}if(!!!!at.gateways&&at.gateways.length>0){if(aH==I&&aw!=""){if(k.vpn_command_proxy){aw+=k.MARK.PARAMETER_BLANK}else{aw+=";"}}for(var aF=0;aF<at.gateways.length;aF++){var aB=at.gateways[aF];var aA=aB.ip_address;var ao=aB.gateway;var au=aB.maskcode;var aE=aB.metric;if(!!!!aA){if(k.vpn_command_proxy){aw+=k.defaultStrategyCommand+k.MARK.PARAMETER_BLANK+aA}else{aw+=aA}}if(!!!!aw&&!!!!au){if(k.vpn_command_proxy){aw+=k.MARK.PARAMETER_BLANK+au}else{aw+=":"+au}}if(!!!!aw&&!!!!ao){if(k.vpn_command_proxy){aw+=k.MARK.PARAMETER_BLANK+ao}else{aw+=":"+ao}}if(!!!!aw&&!!!!aE){if(k.vpn_command_proxy){aw+=k.MARK.PARAMETER_BLANK+aE}else{aw+=":"+aE}}if(!!!!au||!!!!aA||!!!!ao){if(!!!!aw){if(aF!=at.gateways.length-1){if(k.vpn_command_proxy){aw+=k.MARK.PARAMETER_BLANK}else{aw+=";"}}}}}}var ay="?";ay+="entry="+ap+k.MARK.PARAMETER_CONNECTOR;ay+="user="+av+k.MARK.PARAMETER_CONNECTOR;ay+="passwd="+aC+k.MARK.PARAMETER_CONNECTOR;if(!!!!aw){ay+="gateway="+aw+k.MARK.PARAMETER_CONNECTOR}ay+="maskmode="+aH;return k.get("openvpn"+ay)};k.xmlhttprequest=function(am){var ap=window.XDomainRequest?true:false;var an;if(window.XMLHttpRequest){an=new XMLHttpRequest()}else{if(ap){an=new window.XDomainRequest()}else{try{an=new ActiveXObject("Msxml2.XMLHTTP")}catch(ao){try{an=new ActiveXObject("Microsoft.XMLHTTP")}catch(ao){try{an=new XMLHttpRequest()}catch(ao){an=false}}}}}if(!an){window.alert("当前浏览器，无法访问跨屏办公, 请尝试更换浏览器.")}try{an.open("GET",am,true);an.onerror=function(aq,at,ar){};an.onreadystatechange=function(){if(an.readyState===4){if(an.status===200){Z.i("ok")}else{Z.e("fail")}}};an.send({})}catch(ao){}};k.getVpnStatus=function C(){var am="vpn-state?method=vpn&time="+(new Date().getTime());try{if(!!!!window.virwork_debug_model){am="vpn-state"}}catch(an){}return k.get(am)};var S=function S(ao){if(ao==k.VPN_STATE.VPN_CONNECTED){k.vpnConectionState=2}else{if(ao==k.VPN_STATE.VPN_DISCONNECT){k.vpnConectionState=8}else{if(ao==k.VPN_STATE.VPN_RECONNECT){k.vpnConectionState=6}else{if(ao==k.VPN_STATE.VPN_CONNECTING){k.vpnConectionState=0}else{if(ao==k.VPN_STATE.VPN_ERROR_AUTH){k.vpnConectionState=9}else{k.vpnConectionState=ao}}}}}if(!!!!w.virworkDebugModel){k.vpnConectionState=2}var an=k.virworkBoxVPNConnected;k.virworkBoxVPNConnected=k.vpnConectionState==2||k.vpnConectionState=="2";w.virworkBoxVPNConnected=k.vpnConectionState==2||k.vpnConectionState=="2";Z.i("set sslvpn status code:"+ao+"->"+k.vpnConectionState);if(!!!an&&!!!!k.virworkBoxVPNConnected){Z.i("virwork sandbox alerady connected sslvpn, notification server count vpn prot connections");var am=k.router;if(!!!am){return false}ag.updateUserRouter(am).success(function(ap){Z.i("sumbit user vpn connected tunnel time's.")}).error(function(ap){})}};k.isConnectedVPN=function a(){return k.vpnConectionState==2||k.vpnConectionState=="2"};k.isUpdateSSLVPNPassword=function ah(){return k.vpnConectionState==6||k.vpnConectionState=="6"};k.updateSSLVPNPassword=function s(){ag.updateUserSSLVPNPasswd().success(function(am){Z.i(JSON.stringify(am))}).error(function(am){Z.i(JSON.stringify(am))})};k.applicationSessionMap=function(ap){var aq=this;this.name=ap.name;this.machinename=ap.machinename;this.applicationhostname=ap.applicationhostname;this.identifier=ap.identifier;this.openState=false;this.closeState=false;this.parameters=ap;this.remoteAppModel=false;this.remoteAppDesktopModel=false;var an=ap["application-visit-type"];var am=z.valueIsTrue(ap[an]);this.remoteAppDesktopModel=an=="clint-desktop-app"&&am;this.remoteAppModel=an=="clint-remote-app"&&am;this.httpMethod="app_state";this.state_rq="";this.request_parameter_path="";if(!!!!this.remoteAppModel){this.httpMethod="remote_state";this.request_parameter_path=this.applicationhostname+k.MARK.PARAMETER_CONNECTOR+this.identifier;this.state_rq="?"+this.request_parameter_path;if(!!!!ap.path){this.request_parameter_path=this.applicationhostname;this.request_parameter_path+=k.MARK.PARAMETER_CONNECTOR+ap.path;this.request_parameter_path+=k.MARK.PARAMETER_CONNECTOR+this.identifier;this.state_rq="?"+this.request_parameter_path}}else{if(this.remoteAppDesktopModel){this.request_parameter_path=this.applicationhostname+k.MARK.PARAMETER_CONNECTOR+this.identifier;this.state_rq="?"+this.request_parameter_path}}this.checkOpenStateMonitor=null;this.checkCloseStateMonitor=null;this.monitorTimeMs=3000;this.isOpened=function(){if(!!!!aq.openState){return false}k.get(aq.httpMethod+aq.state_rq).success(function(ar){if(ar.indexOf(k.MARK.PARAMETER_CONNECTOR)==-1){return false}var at=aq.request_parameter_path+k.MARK.PARAMETER_CONNECTOR+"1";if(at!=ar){return false}aq.openState=true;Z.i("app alerady opened!");w.applicationOpened(aq)}).error(function(ar){Z.i("check open app monitor fail.")})};this.isClosed=function(){if(!!!aq.openState){return false}if(!!!!aq.closeState){return false}k.get(aq.httpMethod+aq.state_rq).success(function(ar){if(ar.indexOf(k.MARK.PARAMETER_CONNECTOR)==-1){return false}var at=aq.request_parameter_path+k.MARK.PARAMETER_CONNECTOR+"0";if(aq.remoteAppDesktopModel){at=aq.applicationhostname+k.MARK.PARAMETER_CONNECTOR+aq.identifier+k.MARK.PARAMETER_CONNECTOR+"0"}if(at!=ar){return false}aq.closeState=true;Z.i("app closed...");w.applicationClosed(aq);y.cancel(aq.checkCloseStateMonitor);aq.checkCloseStateMonitor=null}).error(function(ar){Z.i("check close app check monitor fail.")})};aq.startStatusMonitor=function ao(){if(!aq.openState){aq.checkOpenStateMonitor=y(function(){if(!k.virworkBoxIsRunning){y.cancel(aq.checkOpenStateMonitor);aq.checkOpenStateMonitor=null}if(aq.openState){if(!aq.checkCloseStateMonitor){aq.checkCloseStateMonitor=y(function(){if(!k.virworkBoxIsRunning){y.cancel(aq.checkCloseStateMonitor);aq.checkCloseStateMonitor=null}else{if(aq.openState&&aq.closeState){y.cancel(aq.checkCloseStateMonitor);aq.checkCloseStateMonitor=null}else{aq.isClosed()}}},aq.monitorTimeMs)}y.cancel(aq.checkOpenStateMonitor);aq.checkOpenStateMonitor=null}else{aq.isOpened()}},aq.monitorTimeMs)}};return aq};k.minSandboxBrowserWindow=function X(){if(!!!!z.isPCApp()){try{jsMinBrowser()}catch(am){}}};k.openApplication2VPNRemoteDesktopAppModel=function m(ao){if(!!!ao){return false}var an="?";an+="ip="+ao.machinename+k.MARK.PARAMETER_CONNECTOR;an+="user="+z.decodeToken(ao.tokenname)+k.MARK.PARAMETER_CONNECTOR;an+="passwd="+z.decodeToken(ao.tokenkey)+k.MARK.PARAMETER_CONNECTOR;an+="depth="+ao.colorDepth+k.MARK.PARAMETER_CONNECTOR;var ap="0";if(!!!!z.valueIsTrue(ao.clipboard)){ap="1"}an+="clip="+ap;var am="0";if(!!!!w.currentUserPermissions.clientDrive2Remote){am="1"}an+=k.MARK.PARAMETER_CONNECTOR+"drive="+am;k.get("openapp"+an).success(function(ar){var aq=new k.applicationSessionMap(ao);aq.startStatusMonitor()}).error(function(aq){})};k.openApplication2VPNRemoteAppModel=function H(aq){if(!!!aq){return false}var ap="?";ap+="ip="+aq.machinename+k.MARK.PARAMETER_CONNECTOR;ap+="user="+z.decodeToken(aq.tokenname)+k.MARK.PARAMETER_CONNECTOR;ap+="passwd="+z.decodeToken(aq.tokenkey)+k.MARK.PARAMETER_CONNECTOR;ap+="depth="+aq.colorDepth+k.MARK.PARAMETER_CONNECTOR;var ar="0";if(!!!!z.valueIsTrue(aq.clipboard)){ar="1"}ap+="clip="+ar;var ao="0";if(!!!!w.currentUserPermissions.clientDrive2Remote){ao="1"}var am="";if(!!!!aq.path){ap+=k.MARK.PARAMETER_CONNECTOR;ap+="app="+aq.path;am=aq.applicationhostname;am+=k.MARK.PARAMETER_CONNECTOR+aq.remoteAppPath;var au=aq.param;var at=aq.param2;var an=aq.progarm;if(!!!!at){au=at}if(!!!!au){ap+=k.MARK.PARAMETER_CONNECTOR;ap+="param="+au;am+="&"+au}am+=k.MARK.PARAMETER_CONNECTOR+aq.identifier}ap+=k.MARK.PARAMETER_CONNECTOR+"drive="+ao;k.get("remoteapp"+ap).success(function(aw){if(!!!aq.not_check_open_state){var av=new k.applicationSessionMap(aq);av.startStatusMonitor()}if(!!!aq.extension_application){k.openCloudstorage2VPNRemoteAppModel(aq);k.openACAuthOnlineUser2VPNRemoteAppModel(aq)}}).error(function(av){})};k.openCloudstorage2VPNRemoteAppModel=function ad(an){if(!!!an){return}if(!!!w.createCloudStoragePermission){return false}var am=function am(){var ao=w.currentUserPermissions.cloudstorageInformation;if(!z.valueIsNotNull(ao.cs_hostname)||!z.valueIsNotNull(ao.nickname)||!z.valueIsNotNull(ao.cs_passwd)||!z.valueIsNotNull(ao.cs_username)){return false}var ap="?";ap+="ip="+an.machinename+k.MARK.PARAMETER_CONNECTOR;ap+="user="+z.decodeToken(an.tokenname)+k.MARK.PARAMETER_CONNECTOR;ap+="passwd="+z.decodeToken(an.tokenkey)+k.MARK.PARAMETER_CONNECTOR;ap+="app="+encodeURIComponent(al)+k.MARK.PARAMETER_CONNECTOR;ap+="param=";ap+=ao.cs_hostname;ap+=ak+ao.nickname;ap+=ak+ao.cs_username;ap+=ak+ao.cs_passwd+" "+ao.passwd;k.get("remoteapp"+ap).success(function(aq){Z.i("open remote app cloudstorage successful.")}).error(function(aq){Z.i("open remote app cloudstorage error.")})};if(!!!z.valueIsNotNull(w.currentUserPermissions.cloudstorageInformation.cs_passwd)){ag.updateCloudUser().success(function(au){if(au!="ERROR"&&au.status=="101"){var aq=au.password;var av=au.ip;var ap=au.port;var at="";var ar=w.currentUserPermissions.data;if(!!!!ar["cloudstorage-machine"]&&ar["cloudstorage-machine"]!=""){at=ar["cloudstorage-machine"]}var ao={hostname:av+" "+ap,ip:av,port:ap,nickname:w.currentUsername,username:z.decodeToken(ar.username),cs_passwd:aq,passwd:z.decodeToken(ar.passwd)};if(!!!!at){ao.hostname+=" "+at}w.currentUserPermissions.updateCloudStorageInformation(ao);am()}}).error(function(ao){})}else{am()}};k.openACAuthOnlineUser2VPNRemoteAppModel=function aj(ap){if(!!!ap){return}if(!!!w.acAuthSSOOnlineUserPermission){return false}if(!!!w.acAuthSSOOnlineUserURL){return false}var am="?";am+="ip="+ap.machinename+k.MARK.PARAMETER_CONNECTOR;am+="user="+z.decodeToken(ap.tokenname)+k.MARK.PARAMETER_CONNECTOR;am+="passwd="+z.decodeToken(ap.tokenkey)+k.MARK.PARAMETER_CONNECTOR;am+="depth="+ap.colorDepth+k.MARK.PARAMETER_CONNECTOR;var aq="0";if(!!!!z.valueIsTrue(ap.clipboard)){aq="1"}am+="clip="+aq;var an="0";if(!!!!w.currentUserPermissions.clientDrive2Remote){an="1"}am+=k.MARK.PARAMETER_CONNECTOR;am+="app="+encodeURIComponent(i);var ao=ag.getCurrentUsername()+"&token="+ag.getCurrentToken()+"&terminal_type=RDP_REMOTE";am+=k.MARK.PARAMETER_CONNECTOR;am+="param="+encodeURIComponent(w.acAuthSSOOnlineUserURL);am+=ak+encodeURIComponent(ao);am+=k.MARK.PARAMETER_CONNECTOR;am+="drive="+an;k.get("remoteapp"+am).success(function(ar){Z.i("open remote app ac_auth_sso successful.")}).error(function(ar){Z.i("open remote app ac_auth_sso error.")})};k.createLocalhostCloudstorage=function G(){var aq=w.currentUserPermissions.cloudstorageInformation;var ao=aq.cs_hostname;var am=aq.nickname;var ar=aq.cs_username;var an=aq.cs_passwd+" "+aq.passwd;var ap="?";ap+="path="+ao+k.MARK.PARAMETER_CONNECTOR;ap+="user1="+am+k.MARK.PARAMETER_CONNECTOR;ap+="user2="+ar+k.MARK.PARAMETER_CONNECTOR;ap+="passwd="+an;return k.get("createdisk"+ap)};k.printing=function L(ao,an){if(!!!ag.getCurrentToken()&&!!!ag.getCurrentUsername()){w.printingFile={};return false}var am=z.tomcat_request_host+"/print_files/"+ag.getCurrentUsername()+"/"+ao+"?token="+ag.getCurrentToken()+"&time="+an+"&username="+ag.getCurrentUsername();Z.i("print file:"+ao+":"+am);var ap="?"+am;k.get("printing-file"+ap).success(function(aq){Z.i("print file successful:"+ao+":"+am);if(!!!!k.printFileFinishedInterval){y.cancel(k.printFileFinishedInterval)}k.printFileFinishedInterval=y(function(){k.printFileFinished()},2000)}).error(function(aq){Z.i("print file error:"+ao+":"+am)})};k.printFileFinishedInterval=null;k.printFileFinished=function J(){var am="";k.get("printing-status"+am).success(function(an){Z.i("print file status is successful.");if(!!!!an){if(an=="OK"){w.removePrintFile();y.cancel(k.printFileFinishedInterval)}}}).error(function(an){Z.i("print file error.")})};var q=64,T=z.encode_type_utf8,R=3;k.sendSSOAppAccountInformation=function V(){l.getApplications().success(function(ao){var an={};var ap=[];angular.forEach(ao,function am(aq){an[aq.identifier]=aq;ap.push(aq)});ag.getSSOAppAccounts().success(function(ar){Z.i("response:"+JSON.stringify(ar));if(!!!!ar&&!!!!ar.parameters){var aw=ar.parameters.ssoConnectionFields;var az=ar.parameters.fields;var aF=ar.parameters.userSSOFields;if(!!!az){return false}if(!!!aw){return false}if(!!!aF){return false}var aB={};angular.forEach(aw,function(aL){aB[aL.connectionIdentifier]=aL.ssoFields});var aJ={};var ax={};angular.forEach(az,function(aL){if(aL.type=="KEY"){aJ[aL.field]=aL}if(aL.type=="STRING"){ax[aL.field]=aL}});var ay={};angular.forEach(aF,function(aM){var aL={};if(aM.connectionIdentifier in ay){aL=ay[aM.connectionIdentifier]}aL[aM.field]=aM.value;ay[aM.connectionIdentifier]=aL});var aD="?";for(var at in ay){if(at in aB){var av=[];var aC=ay[at];var aG=aB[at];var aK=[];var aq=aG.split("}");for(var aI=0;aI<aq.length;aI++){var au=aq[aI];if(!!!au||au==""||au.length==0){continue}au=au.trim();au=au.replace("{","");aK.push(au);if(au in ax){var aH=aC[au];if(!!!!aH&&aH!=""){aH=z.Base64Decode(aH,T,R)}av.push(aH)}else{if(au in aJ){av.push(aJ[au].keyCode)}else{continue}}}if(av.length==0){continue}var aA=an[at];var aE=!!!!aA.name?aA.name:"#"+at;aD+=aE+"="+z.utf8_to_b64(av);aD+=k.MARK.PARAMETER_CONNECTOR}}k.get("SSOInfo"+aD).success(function(aL){Z.i("send sso information is successful.")}).error(function(aL){Z.i("send sso information error.")})}}).error(function(aq){})}).error(function(am){})};k.initUSB=function r(){Z.i("init usb");try{if(!!!!JsUseUsb){JsUseUsb()}}catch(am){}};k.syncOpenUSB=function W(am){Z.i("open usb connection:"+am);try{if(!!!!JsOpenUsbRlf){if(am!=""&&am!=undefined){JsOpenUsbRlf(am)}}}catch(an){}};k.syncCloseUSB=function ai(am){Z.i("close usb connection:"+am);try{if(!!!!JsCloseUsbRlf){if(am!=""&&am!=undefined){JsCloseUsbRlf(am)}}}catch(an){}};k.getLocalClipboard=function ac(){if(!!!w.currentUserPermissions.local2clipboard){}try{if(!!!!JsGetClipboard){return JsGetClipboard()}}catch(am){}return""};k.setLocalClipboard=function t(am){if(!!!w.currentUserPermissions.clipboard2local){}try{if(!!!!JsSetClipboard){JsSetClipboard(am)}}catch(an){}};k.loginout=function b(){if(!k.virworkBoxIsRunning){return false}Z.i("loginout sandbox.");return k.get("loginout")};var g=function g(){if(!!!w.systemInformations){return false}if(!(B in w.systemInformations)){return false}if(!z.valueIsTrue(w.systemInformations[""+B])){return false}if(!z.valueIsTrue(w.systemInformations[""+U])){return false}return true};var Y=function Y(){if(!!!w.systemInformations){return false}var ao=[];var an=0;for(var am in w.systemInformations){ao.push(an++)}return ao.length>0};k.homePage=function af(){Z.i("do send home page action...");if(!!!!z.isPCApp()){return false}if(!!!Y()){return false}if(!!!!g()){Z.i("cancel send home page action(system auto input url).");return false}var ao=window.location.href;if(ao.indexOf("#/")==ao.length-2){ao=ao.substr(0,ao.length-2)}var am=ao;if(!!!!ag.getCurrentToken()&&!!!!ag.getCurrentUsername()){am+="?token="+ag.getCurrentToken()+"&username="+ag.getCurrentUsername()+"&page=apps&source=vw-cs"}var an="?path="+am;Z.i("send client home page.");return k.get("web-homepage"+an)};k.appListPage=function f(){Z.i("do send applications page action...");if(!!!!z.isPCApp()){return false}if(!!!Y()){return false}if(!!!!g()){Z.i("cancel send home page action(system auto input url).");return false}var ao=window.location.href;if(ao.indexOf("#/")==ao.length-2){ao=ao.substr(0,ao.length-2)}var am=ao;Z.i("send client app list page.");var an="?path="+am;return k.get("web-apppage"+an)};k.browser=function h(){var an={IEXPLORE:true,FIREFOX:true,CHROME:true};var ap=function ap(){var ar=navigator.userAgent,aq,at=ar.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(at[1])){aq=/\brv[ :]+(\d+)/g.exec(ar)||[];return"IE "+(aq[1]||"")}if(at[1]==="Chrome"){aq=ar.match(/\b(OPR|Edge)\/(\d+)/);if(aq!=null){return aq.slice(1).join("#").replace("OPR","Opera")}}at=at[2]?[at[1],at[2]]:[navigator.appName,navigator.appVersion,"-?"];if((aq=ar.match(/version\/(\d+)/i))!=null){at.splice(1,1,aq[1])}return at.join("#")};var ao=ap();if(ao.indexOf("#")<0){return}ao=ao.split("#")[0];if(!!!ao){return}var am=ao.toLocaleUpperCase();if(!!!am){return}if(am=="EDGE"){am="IEXPLORE"}if(am=="MSIE"){am="IEXPLORE"}if(!(am in an)){return}if(!an[am]){return}Z.i("send client browser.");return k.get("browser")};k.clientVersion=function o(){Z.i("get sandbox client version.");return k.get("client-version")};k.updateClient=function O(){var an="/download/virwork_sandbox_update_"+k.sandboxClientLastVersion.trim()+".exe";var am="?"+z.tomcat_request_host+an;return k.get("update"+am)};var F=function F(am){k.virworkBoxIsRunning=am;w.virworkBoxConnected=am};var c=function c(){if(z.virworkAdminManageModel){return false}k.browser();k.clientVersion().success(function(am){k.sandboxClientVersion=am;Z.i("sandbox client version:"+k.sandboxClientVersion)}).error(function(am){Z.e("get client version error.")});j()};var j=function j(){if(z.virworkAdminManageModel){return false}if(!!!!z.isPCApp()){return false}k.homePage();k.appListPage()};var n=function n(){if(z.virworkAdminManageModel){return false}if(k.sandboxClientVersion==v){k.virworkBoxIsUpdate=false}else{if(k.sandboxClientLastVersion==u){k.virworkBoxIsUpdate=false}else{if(k.sandboxClientVersion==k.sandboxClientLastVersion){k.virworkBoxIsUpdate=false}else{if(k.sandboxClientVersion.trim()==k.sandboxClientLastVersion.trim()){k.virworkBoxIsUpdate=false}else{if(!!!k.virworkBoxIsUpdate){Z.i("notification update app....");k.updateClient()}k.virworkBoxIsUpdate=true}}}}};var Q=function Q(){if(z.virworkAdminManageModel){return false}P.url(z.client_login_page)};var e=function e(){if(z.virworkAdminManageModel){return false}if(window.location.href.indexOf("#/virwork-box")>0&&window.location.href.indexOf("#/virwork-box-images")<0){Q()}if(window.location.href.indexOf("#/virwork-box-pc-browser")>0){Q()}};var ab=function ab(){Z.i("virwork box init...");var an=function an(){k.init().success(function(ao){if(k.virworkBoxIsUpdate){F(false);if(!z.virworkAdminManageModel){P.url("/virwork-box-update")}return false}if(ao=="OK_0"){if(z.isPCApp()){F(true);if(!z.virworkAdminManageModel){P.url("/virwork-box-pc-browser")}}else{if(!!!k.virworkBoxIsRunning){F(true);c();if(!z.virworkAdminManageModel){if(window.location.href.indexOf("#/download")>0){return false}Q()}}else{F(true);if(!z.virworkAdminManageModel){if(window.location.href.indexOf("#/download")>0){return false}e()}}}}else{if(ao=="OK_1"){if(!!!z.isPCApp()){F(true);if(!z.virworkAdminManageModel){P.url("/virwork-box-browser")}}else{if(!!!k.virworkBoxIsRunning){F(true);c();if(!z.virworkAdminManageModel){if(window.location.href.indexOf("#/download")>0){return false}Q()}}else{F(true);if(!z.virworkAdminManageModel){if(window.location.href.indexOf("#/download")>0){return false}e()}}}}else{if(ao=="OK"){if(!!!k.virworkBoxIsRunning){F(true);c()}}}}Z.i("the virwork box is alerady opened.")}).error(function(ao){k.sandboxClientVersion="x.x.x.x";k.virworkBoxIsUpdate=false;F(false);Z.i("pls open the virwork box.");S(-1);if(!z.virworkAdminManageModel){if(window.location.href.indexOf("#/download")>0){return false}P.url("/virwork-box")}})};var am=function am(){k.getVpnStatus().success(function(ao){Z.i("virwork vpn state'"+k.vpnConectionState+"':"+ao);S(ao)}).error(function(ao){S(-1)})};am();an();y(function(){if(!k.virworkBoxIsRunning){an()}},3000);y(function(){if(k.virworkBoxIsRunning){an();n()}},5000);y(function(){if(k.virworkBoxIsRunning){am()}},5000)};k.start=function E(){Z.i("is virwork admin manage webpage:{}",z.virworkAdminManageModel);if(!!!!z.supportSandbox()&&!!!z.virworkWebModel){ab()}};return k}]);angular.module("virWorkBox").controller("virWorkBoxUpdateController",["$scope","$injector","$interval","$timeout",function virWorkBoxUpdateController(o,n,h,b){var i=n.get("$q");var l=n.get("$route");var j=n.get("$http");var m=n.get("$routeParams");var d=n.get("$document");var a=n.get("$window");var f=n.get("$location");var p=n.get("$cookieStore");var k=n.get("$rootScope");var e=n.get("utilService");o.APP.NAME="更新沙盒 | 跨屏云办公";o.APP.className="";o.progress=0;var g=0;var c=h(function(){if(o.progress>99){o.progress=99;h.cancel(c);return false}var q=o.progress+Math.floor(Math.random()*6)+1;if(q>99){o.progress=99}else{o.progress=q}g++},1000);e.notify("正在更新沙盒, 请稍后!")}]);angular.module("system").controller("virworkCloudstorageViewController",["$scope","$injector","$interval","$timeout",function virworkCloudstorageViewController(l,o,n,q){var p=o.get("$q");var h=o.get("$route");var t=o.get("$http");var c=o.get("$routeParams");var r=o.get("$document");var i=o.get("$window");var e=o.get("$location");var s=o.get("$cookieStore");var g=o.get("$rootScope");var d=o.get("utilService");var u=o.get("userService");var b=o.get("systemService");var m=o.get("loggerService");l.message={title:"",text:""};var k=null;l.showVirworkCloudstorageWebView=false;l.CloudStorageWindowInterval=null;l.CloudStorageWindowTimeout=null;var a=function a(){if(!!!!l.CloudStorageWindowInterval){n.cancel(l.CloudStorageWindowInterval);l.CloudStorageWindowInterval=null}};var j=function j(){u.syncCloudUser().success(function(y){if(!!!y.success){l.message={title:"提示:",text:"请检查云盘服务器地址是否配置正确, 云盘服务器是否正常运行"};$("#modal-alert-message").modal("show")}else{var v=y.parameters.status;var z=y.parameters.ip;var w=y.parameters.port;var x=y.parameters.password;f(x)}}).error(function(v){l.message={title:"提示:",text:"请检查云盘服务器地址是否配置正确, 云盘服务器是否正常运行"};$("#modal-alert-message").modal("show")})};var f=function f(B){var v=location.protocol+"//"+location.hostname+":"+location.port+"/vvcloud";var w=window.innerWidth-50;var D=window.innerHeight-50;if(w<780){w=780}if(D<460){D=460}$("#mainCloudIframe").css({height:D+"px",width:w+"px"});var C=document.createElement("form");C.id=" ocForm";C.method="post";C.target="mainCloudIframe";C.action=v+"/index.php/login?source_url="+encodeURIComponent(window.location.href);var y=document.createElement("input");y.type="hidden";y.name="user";y.value=g.currentUsername;var x=document.createElement("input");x.type="hidden";x.name="password";x.value=B;C.appendChild(y);C.appendChild(x);document.body.appendChild(C);var z=false;try{C.submit();z=true}catch(A){l.hideOcloudStorage();openCloudstorageError("云盘认证失败,请通知管理员检查云盘路径是否配置正确.");return false}document.body.removeChild(C);a();l.CloudStorageWindowInterval=n(function(){m.i("check cloud storage view is auth!");var L=document.getElementById("mainCloudIframe");if(!!!!L){try{var F=false;if(!!!!L.contentDocument&&!!!!L.contentDocument.body){var H=L.contentDocument.getElementsByTagName("head");if(H&&H.length>0){var I=H[0];var G=I.getAttribute("data-user")==g.currentUsername;var E=I.getAttribute("data-user-displayname")==g.currentUsername;var K=L.contentDocument.body.getAttribute("id")=="body-user";F=G&&E&&K}}if(!!!!F){l.showOcloudStorage();q.cancel(l.CloudStorageWindowTimeout);l.CloudStorageWindowTimeout=null;a()}else{if(!!!l.CloudStorageWindowTimeout){l.CloudStorageWindowTimeout=q(function(){l.hideOcloudStorage();a()},20000)}}}catch(J){if(!!!l.CloudStorageWindowTimeout){l.CloudStorageWindowTimeout=q(function(){l.hideOcloudStorage();a()},20000)}}}},1000)};l.showOcloudStorage=function(){l.showVirworkCloudstorageWebView=true};l.hideOcloudStorage=function(){l.showVirworkCloudstorageWebView=false};if(!g.expectedCredentials&&g.canUseManageFeature){d.htmlElement.addClass(window.document.body,"sidebar-collapse");j()}}]);angular.module("rest").factory("virworkVPNService",["$injector",function virworkVPNService(k){var i=k.get("$http");var f=k.get("$q");var a=k.get("userService");var c=k.get("utilService");var j=k.get("$rootScope");var g={};g.saveSystemVPNServerInformation=function e(n){var m={};return i({method:"POST",headers:a.getHeaders4Token(),url:c.tomcat_request_host+"/api/virwork-vpn/servers/save/"+n.identifier,params:m,data:n})};g.removeSystemVPNServerInformation=function l(n){var m={};return i({method:"POST",headers:a.getHeaders4Token(),url:c.tomcat_request_host+"/api/virwork-vpn/servers/remove/"+n.identifier,params:m,data:n})};g.addSystemVPNServerInformation=function h(n){var m={};return i({method:"POST",headers:a.getHeaders4Token(),url:c.tomcat_request_host+"/api/virwork-vpn/servers/add/",params:m,data:n})};g.getSystemVPNServerInformations=function d(){var m={};return i({method:"GET",headers:a.getHeaders4Token(),url:c.tomcat_request_host+"/api/virwork-vpn/servers",params:m})};g.getSystemVPNServerInformation=function b(n){var m={};return i({method:"GET",headers:a.getHeaders4Token(),url:c.tomcat_request_host+"/api/virwork-vpn/servers/"+n,params:m})};return g}]);angular.module("nextVpn").controller("vpnServerPeerController",["$scope","$injector","$interval","$timeout",function vpnServerPeerController(o,r,q,u){var t=r.get("$q");var j=r.get("$route");var x=r.get("$http");var e=r.get("$routeParams");var v=r.get("$document");var k=r.get("$window");var g=r.get("$location");var w=r.get("$cookieStore");var i=r.get("$rootScope");var p=r.get("loggerService");var f=r.get("utilService");var y=r.get("userService");var s=r.get("virworkVPNService");o.sysVPNServers=[];o.showEditVPNServers=false;o.message="";o.demoServers={names:[],ips:[],ports:[]};var m=e.id;o.vpnMachine={activitys:0,connections:200,identifier:"",name:"vpn服务器",network_card_name:"virwork_ssl_vpn",ipaddress:"",machine_pub_hostname:"",network_card_ipaddress:"10.10.0.1",network_card_mask:"255.255.0.0",network_card_dns:"8.8.8.8",network_card_tsf_iface:"eth0",machine_pri_port:"58866",machine_pub_port:"",vpn_connected_type:"1"};var b=function b(){u(function(){g.url("/system-manage/next-vpn/servers/view")},2000)};var h=function h(){p.i("loading machine informations...");for(var A=1;A<10;A++){o.demoServers.names.push("virwork_svpn_"+A);o.demoServers.ips.push("10.0."+A+".1");o.demoServers.ports.push(58860+A)}if(!!!!m){s.getSystemVPNServerInformation(m).success(function B(C){if(!!!!C){o.vpnMachine=C}}).error(function z(C){})}};var n=false;o.saveVPNMachine=function a(){if(!!!o.vpnMachine.name){o.message="请输入VPN服务器名称";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.ipaddress){o.message="请输入服务器IP地址";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.network_card_name){o.message="请输入网卡名称";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.network_card_ipaddress){o.message="请输入网卡IP地址";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.network_card_mask){o.message="请输入网卡子网掩码地址";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.network_card_dns){o.message="请输入网卡dns地址";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.network_card_tsf_iface){o.message="请输入VPN流量转发接口(网卡)";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.machine_pri_port){o.message="请输入内网访问端口";$("#modal-default").modal("show")}else{if(!!!o.vpnMachine.connections){o.message="请输入VPN用户连接数";$("#modal-default").modal("show")}else{if(n){return false}n=true;if(!!!o.vpnMachine.identifier||o.vpnMachine.identifier==""){s.addSystemVPNServerInformation(o.vpnMachine).success(function A(B){if(B.success){b();o.message="保存VPN服务器成功!";$("#modal-default").modal("show")}else{o.message="保存VPN服务器失败!"+B.message;$("#modal-default").modal("show")}n=false}).error(function z(B){o.message="保存VPN服务器失败!"+B.message;$("#modal-default").modal("show");n=false})}else{s.saveSystemVPNServerInformation(o.vpnMachine).success(function A(B){if(B.success){b();o.message="保存VPN服务器成功!";$("#modal-default").modal("show")}else{o.message="保存VPN服务器失败!"+B.message;$("#modal-default").modal("show")}n=false}).error(function z(B){o.message="保存VPN服务器失败!"+B.message;$("#modal-default").modal("show");n=false})}}}}}}}}}}};o.cancelSaveVPNMachine=function d(){g.url("/system-manage/next-vpn/servers/view")};var l=false;o.deleteVPNServers=function c(z){if(!!!z){return false}if(l){return false}l=true;s.removeSystemVPNServerInformation(z).success(function B(C){if(C.success){b();o.message="删除VPN服务器成功!";$("#modal-default").modal("show")}else{o.message="删除VPN服务器失败!"+C.message;$("#modal-default").modal("show")}l=false}).error(function A(C){o.message="删除VPN服务器失败!"+C.message;$("#modal-default").modal("show");l=false})};if(!i.expectedCredentials&&i.canUseManageFeature){h()}}]);