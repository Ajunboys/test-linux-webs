var service={encode_type_utf8:"utf-8",base64:function(){var e=this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",d="=";function o(e,t,r){var o,n="";for(o=0;o<=t-3;o+=3)n+=r.charAt(e.charCodeAt(o)>>>2),n+=r.charAt((3&e.charCodeAt(o))<<4|e.charCodeAt(o+1)>>>4),n+=r.charAt((15&e.charCodeAt(o+1))<<2|e.charCodeAt(o+2)>>>6),n+=r.charAt(63&e.charCodeAt(o+2));return t%3==2?(n+=r.charAt(e.charCodeAt(o)>>>2),n+=r.charAt((3&e.charCodeAt(o))<<4|e.charCodeAt(o+1)>>>4),n+=r.charAt((15&e.charCodeAt(o+1))<<2),n+=d):t%3==1&&(n+=r.charAt(e.charCodeAt(o)>>>2),n+=r.charAt((3&e.charCodeAt(o))<<4),n+=d,n+=d),n}function h(e){return"+"==e?62:"/"==e?63:r.indexOf(e)}return e.base64_encode=function(e){var t=unescape(encodeURIComponent(e));return o(t,t.length,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},e.base64url_encode=function(e){var t=unescape(encodeURIComponent(e));return o(t,t.length,r)},e.base64_decode=function(e){var t,r,o,n,a,c="";for(t=0;t<e.length-3;t+=4)r=h(e.charAt(t+0)),o=h(e.charAt(t+1)),n=h(e.charAt(t+2)),a=h(e.charAt(t+3)),c+=String.fromCharCode(r<<2|o>>>4),e.charAt(t+2)!=d&&(c+=String.fromCharCode(o<<4&240|n>>>2&15)),e.charAt(t+3)!=d&&(c+=String.fromCharCode(n<<6&192|a));return c=decodeURIComponent(escape(c))},e},decode:function(e,t,r){if(!e||""==e)return"";t||(t="utf-8"),(!r||r<=0)&&(r=1);for(var o="",n=0;n<r;n++){o=e=(new service.base64).base64_decode(e)}return o},auth:function(){window.location.search;var e=window.location.search.split("?token=");if(!e||2!=e.length)return alert("非法请求, 云盘认证失败."),!1;var t=e[1];if(!t||""==t)return alert("非法请求, 云盘认证失败."),!1;var r=service.decode(t,service.encode_type_utf8,2),o=r.split("#-#")[0],n=r.split("#-#")[1],a=window.location.protocol+"//"+window.location.hostname+(""!=window.location.port?":"+window.location.port:""),c=document.createElement("form");c.id=" ocForm",c.method="post",c.action=a+"/vvcloud/index.php/login?source_url="+encodeURIComponent(a);var d=document.createElement("input");d.type="hidden",d.name="user",d.value=o;var h=document.createElement("input");h.type="hidden",h.name="password",h.value=n,c.appendChild(d),c.appendChild(h),document.body.appendChild(c);try{c.submit(),!0}catch(e){return alert("云盘认证失败,请通知管理员检查云盘路径是否配置正确."),!1}document.body.removeChild(c)}};service.auth();